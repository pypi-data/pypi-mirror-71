#### Limit for backend requests to 10 request per minute
limit_req_zone $binary_remote_addr zone=limited_{{SERVER_NAME}}:10m rate=10r/m;

server {
    server_name {{SERVER_NAME}};

#### Set up SSL/TLS
    include /etc/nginx/sites-enabled/defaults/ssl;
    ssl_certificate /etc/letsencrypt/live/{{SERVER_NAME}}/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/{{SERVER_NAME}}/privkey.pem;
    ssl_dhparam /dhparams/{{SERVER_NAME}}.pem;
#### Optional (to use 0-RTT feature of TLSv1.3)
#### Be aware of Replay-Attack risk!
#    ssl_early_data on;

#### Custom error pages (404 Not Found, 502 Bad Gateway)
#    error_page 404 /not_found.html;
#    error_page 502 /backend_down.html;
