define(["@jupyter-widgets/base"],(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){!function(e){"use strict";function t(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function n(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function r(e){return Math.sqrt(n(e,e))}function o(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function i(e,t,n,r,o){for(var i=0;i<e.length;++i)e[i]=t*n[i]+r*o[i]}function a(e,t,r,o,a,s,l){var c=r.fx,u=n(r.fxprime,t),f=c,d=c,m=u,p=0;function h(d,p,h){for(var y=0;y<16;++y)if(a=(d+p)/2,i(o.x,1,r.x,a,t),f=o.fx=e(o.x,o.fxprime),m=n(o.fxprime,t),f>c+s*a*u||f>=h)p=a;else{if(Math.abs(m)<=-l*u)return a;m*(p-d)>=0&&(p=d),d=a,h=f}return 0}a=a||1,s=s||1e-6,l=l||.1;for(var y=0;y<10;++y){if(i(o.x,1,r.x,a,t),f=o.fx=e(o.x,o.fxprime),m=n(o.fxprime,t),f>c+s*a*u||y&&f>=d)return h(p,a,d);if(Math.abs(m)<=-l*u)return a;if(m>=0)return h(a,p,f);d=f,p=a,a*=2}return a}e.bisect=function(e,t,n,r){var o=(r=r||{}).maxIterations||100,i=r.tolerance||1e-10,a=e(t),s=e(n),l=n-t;if(a*s>0)throw"Initial bisect points must have opposite signs";if(0===a)return t;if(0===s)return n;for(var c=0;c<o;++c){var u=t+(l/=2),f=e(u);if(f*a>=0&&(t=u),Math.abs(l)<i||0===f)return u}return t+l},e.nelderMead=function(e,t,n){var r,o=(n=n||{}).maxIterations||200*t.length,a=n.nonZeroDelta||1.05,s=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,c=n.minErrorDelta||1e-5,u=void 0!==n.rho?n.rho:1,f=void 0!==n.chi?n.chi:2,d=void 0!==n.psi?n.psi:-.5,m=void 0!==n.sigma?n.sigma:.5,p=t.length,h=new Array(p+1);h[0]=t,h[0].fx=e(t),h[0].id=0;for(var y=0;y<p;++y){var v=t.slice();v[y]=v[y]?v[y]*a:s,h[y+1]=v,h[y+1].fx=e(v),h[y+1].id=y+1}function g(e){for(var t=0;t<e.length;t++)h[p][t]=e[t];h[p].fx=e.fx}for(var x=function(e,t){return e.fx-t.fx},_=t.slice(),b=t.slice(),w=t.slice(),S=t.slice(),E=0;E<o;++E){if(h.sort(x),n.history){var k=h.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));k.sort((function(e,t){return e.id-t.id})),n.history.push({x:h[0].slice(),fx:h[0].fx,simplex:k})}for(r=0,y=0;y<p;++y)r=Math.max(r,Math.abs(h[0][y]-h[1][y]));if(Math.abs(h[0].fx-h[p].fx)<l&&r<c)break;for(y=0;y<p;++y){_[y]=0;for(var M=0;M<p;++M)_[y]+=h[M][y];_[y]/=p}var C=h[p];if(i(b,1+u,_,-u,C),b.fx=e(b),b.fx<h[0].fx)i(S,1+f,_,-f,C),S.fx=e(S),S.fx<b.fx?g(S):g(b);else if(b.fx>=h[p-1].fx){var A=!1;if(b.fx>C.fx?(i(w,1+d,_,-d,C),w.fx=e(w),w.fx<C.fx?g(w):A=!0):(i(w,1-d*u,_,d*u,C),w.fx=e(w),w.fx<b.fx?g(w):A=!0),A){if(m>=1)break;for(y=1;y<h.length;++y)i(h[y],1-m,h[0],m,h[y]),h[y].fx=e(h[y])}}else g(b)}return h.sort(x),{fx:h[0].fx,x:h[0]}},e.conjugateGradient=function(e,t,s){var l,c,u,f={x:t.slice(),fx:0,fxprime:t.slice()},d={x:t.slice(),fx:0,fxprime:t.slice()},m=t.slice(),p=1;u=(s=s||{}).maxIterations||20*t.length,f.fx=e(f.x,f.fxprime),o(l=f.fxprime.slice(),f.fxprime,-1);for(var h=0;h<u;++h){if(p=a(e,l,f,d,p),s.history&&s.history.push({x:f.x.slice(),fx:f.fx,fxprime:f.fxprime.slice(),alpha:p}),p){i(m,1,d.fxprime,-1,f.fxprime);var y=n(f.fxprime,f.fxprime);i(l,Math.max(0,n(m,d.fxprime)/y),l,-1,d.fxprime),c=f,f=d,d=c}else o(l,f.fxprime,-1);if(r(f.fxprime)<=1e-5)break}return s.history&&s.history.push({x:f.x.slice(),fx:f.fx,fxprime:f.fxprime.slice(),alpha:p}),f},e.gradientDescent=function(e,t,n){for(var o=(n=n||{}).maxIterations||100*t.length,a=n.learnRate||.001,s={x:t.slice(),fx:0,fxprime:t.slice()},l=0;l<o&&(s.fx=e(s.x,s.fxprime),n.history&&n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice()}),i(s.x,1,s.x,-a,s.fxprime),!(r(s.fxprime)<=1e-5));++l);return s},e.gradientDescentLineSearch=function(e,t,n){n=n||{};var i,s={x:t.slice(),fx:0,fxprime:t.slice()},l={x:t.slice(),fx:0,fxprime:t.slice()},c=n.maxIterations||100*t.length,u=n.learnRate||1,f=t.slice(),d=n.c1||.001,m=n.c2||.1,p=[];if(n.history){var h=e;e=function(e,t){return p.push(e.slice()),h(e,t)}}s.fx=e(s.x,s.fxprime);for(var y=0;y<c&&(o(f,s.fxprime,-1),u=a(e,f,s,l,u,d,m),n.history&&(n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),functionCalls:p,learnRate:u,alpha:u}),p=[]),i=s,s=l,l=i,!(0===u||r(s.fxprime)<1e-5));++y);return s},e.zeros=t,e.zerosM=function(e,n){return t(e).map((function(){return t(n)}))},e.norm2=r,e.weightedSum=i,e.scale=o}(t)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return i})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return l})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return u})),n.d(t,"__generator",(function(){return f})),n.d(t,"__createBinding",(function(){return d})),n.d(t,"__exportStar",(function(){return m})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return h})),n.d(t,"__spread",(function(){return y})),n.d(t,"__spreadArrays",(function(){return v})),n.d(t,"__await",(function(){return g})),n.d(t,"__asyncGenerator",(function(){return x})),n.d(t,"__asyncDelegator",(function(){return _})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return k})),n.d(t,"__classPrivateFieldGet",(function(){return M})),n.d(t,"__classPrivateFieldSet",(function(){return C}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var d=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function m(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||d(t,e,n)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function x(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=o[e](t)).value instanceof g?Promise.resolve(n.value.v).then(l,c):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var S=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&d(t,e,n);return S(t,e),t}function k(e){return e&&e.__esModule?e:{default:e}}function M(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0,t.MODULE_VERSION="1.3.0",t.MODULE_NAME="@upsetjs/jupyter_widget"},function(e,t,n){!function(e){"use strict";var t,n,r,o,i,a,s,l={},c=[],u=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function f(e,t){for(var n in t)e[n]=t[n];return e}function d(e){var t=e.parentNode;t&&t.removeChild(e)}function m(e,t,n){var r,o=arguments,i={};for(r in t)"key"!==r&&"ref"!==r&&(i[r]=t[r]);if(arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(i.children=n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===i[r]&&(i[r]=e.defaultProps[r]);return p(e,i,t&&t.key,t&&t.ref,null)}function p(e,n,r,o,i){var a={type:e,props:n,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return null==i&&(a.__v=a),t.vnode&&t.vnode(a),a}function h(e){return e.children}function y(e,t){this.props=e,this.context=t}function v(e,t){if(null==t)return e.__?v(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?v(e):null}function g(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return g(e)}}function x(e){(!e.__d&&(e.__d=!0)&&n.push(e)&&!r++||i!==t.debounceRendering)&&((i=t.debounceRendering)||o)(_)}function _(){for(var e;r=n.length;)e=n.sort((function(e,t){return e.__v.__b-t.__v.__b})),n=[],e.some((function(e){var t,n,r,o,i,a,s;e.__d&&(a=(i=(t=e).__v).__e,(s=t.__P)&&(n=[],(r=f({},i)).__v=r,o=M(s,i,r,t.__n,void 0!==s.ownerSVGElement,null,n,null==a?v(i):a),C(n,i),o!=a&&g(i)))}))}function b(e,t,n,r,o,i,a,s,u,f){var m,y,g,x,_,b,w,S,E,k=r&&r.__k||c,C=k.length;for(u==l&&(u=null!=a?a[0]:C?v(r,0):null),n.__k=[],m=0;m<t.length;m++)if(null!=(x=n.__k[m]=null==(x=t[m])||"boolean"==typeof x?null:"string"==typeof x||"number"==typeof x?p(null,x,null,null,x):Array.isArray(x)?p(h,{children:x},null,null,null):null!=x.__e||null!=x.__c?p(x.type,x.props,x.key,null,x.__v):x)){if(x.__=n,x.__b=n.__b+1,null===(g=k[m])||g&&x.key==g.key&&x.type===g.type)k[m]=void 0;else for(y=0;y<C;y++){if((g=k[y])&&x.key==g.key&&x.type===g.type){k[y]=void 0;break}g=null}if(_=M(e,x,g=g||l,o,i,a,s,u,f),(y=x.ref)&&g.ref!=y&&(S||(S=[]),g.ref&&S.push(g.ref,null,x),S.push(y,x.__c||_,x)),null!=_){if(null==w&&(w=_),E=void 0,void 0!==x.__d)E=x.__d,x.__d=void 0;else if(a==g||_!=u||null==_.parentNode){e:if(null==u||u.parentNode!==e)e.appendChild(_),E=null;else{for(b=u,y=0;(b=b.nextSibling)&&y<C;y+=2)if(b==_)break e;e.insertBefore(_,u),E=u}"option"==n.type&&(e.value="")}u=void 0!==E?E:_.nextSibling,"function"==typeof n.type&&(n.__d=u)}else u&&g.__e==u&&u.parentNode!=e&&(u=v(g))}if(n.__e=w,null!=a&&"function"!=typeof n.type)for(m=a.length;m--;)null!=a[m]&&d(a[m]);for(m=C;m--;)null!=k[m]&&O(k[m],k[m]);if(S)for(m=0;m<S.length;m++)N(S[m],S[++m],S[++m])}function w(e){return null==e||"boolean"==typeof e?[]:Array.isArray(e)?c.concat.apply([],e.map(w)):[e]}function S(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===u.test(t)?n+"px":null==n?"":n}function E(e,t,n,r,o){var i,a,s,l,c;if(o?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t)if(i=e.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(l in r)n&&l in n||S(i,l,"");if(n)for(c in n)r&&n[c]===r[c]||S(i,c,n[c])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),s=t.toLowerCase(),t=(s in e?s:t).slice(2),n?(r||e.addEventListener(t,k,a),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,k,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!o&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function k(e){this.l[e.type](t.event?t.event(e):e)}function M(e,n,r,o,i,a,s,l,c){var u,d,m,p,v,g,x,_,w,S,E,k=n.type;if(void 0!==n.constructor)return null;(u=t.__b)&&u(n);try{e:if("function"==typeof k){if(_=n.props,w=(u=k.contextType)&&o[u.__c],S=u?w?w.props.value:u.__:o,r.__c?x=(d=n.__c=r.__c).__=d.__E:("prototype"in k&&k.prototype.render?n.__c=d=new k(_,S):(n.__c=d=new y(_,S),d.constructor=k,d.render=z),w&&w.sub(d),d.props=_,d.state||(d.state={}),d.context=S,d.__n=o,m=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=k.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=f({},d.__s)),f(d.__s,k.getDerivedStateFromProps(_,d.__s))),p=d.props,v=d.state,m)null==k.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==k.getDerivedStateFromProps&&_!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(_,S),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(_,d.__s,S)||n.__v===r.__v){for(d.props=_,d.state=d.__s,n.__v!==r.__v&&(d.__d=!1),d.__v=n,n.__e=r.__e,n.__k=r.__k,d.__h.length&&s.push(d),u=0;u<n.__k.length;u++)n.__k[u]&&(n.__k[u].__=n);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(_,d.__s,S),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(p,v,g)}))}d.context=S,d.props=_,d.state=d.__s,(u=t.__r)&&u(n),d.__d=!1,d.__v=n,d.__P=e,u=d.render(d.props,d.state,d.context),null!=d.getChildContext&&(o=f(f({},o),d.getChildContext())),m||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(p,v)),E=null!=u&&u.type==h&&null==u.key?u.props.children:u,b(e,Array.isArray(E)?E:[E],n,r,o,i,a,s,l,c),d.base=n.__e,d.__h.length&&s.push(d),x&&(d.__E=d.__=null),d.__e=!1}else null==a&&n.__v===r.__v?(n.__k=r.__k,n.__e=r.__e):n.__e=A(r.__e,n,r,o,i,a,s,c);(u=t.diffed)&&u(n)}catch(e){n.__v=null,t.__e(e,n,r)}return n.__e}function C(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function A(e,t,n,r,o,i,a,s){var u,f,d,m,p,h=n.props,y=t.props;if(o="svg"===t.type||o,null!=i)for(u=0;u<i.length;u++)if(null!=(f=i[u])&&((null===t.type?3===f.nodeType:f.localName===t.type)||e==f)){e=f,i[u]=null;break}if(null==e){if(null===t.type)return document.createTextNode(y);e=o?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,y.is&&{is:y.is}),i=null,s=!1}if(null===t.type)h!==y&&e.data!=y&&(e.data=y);else{if(null!=i&&(i=c.slice.call(e.childNodes)),d=(h=n.props||l).dangerouslySetInnerHTML,m=y.dangerouslySetInnerHTML,!s){if(null!=i)for(h={},p=0;p<e.attributes.length;p++)h[e.attributes[p].name]=e.attributes[p].value;(m||d)&&(m&&d&&m.__html==d.__html||(e.innerHTML=m&&m.__html||""))}(function(e,t,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in t||E(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||E(e,i,t[i],n[i],r)})(e,y,h,o,s),m?t.__k=[]:(u=t.props.children,b(e,Array.isArray(u)?u:[u],t,n,r,"foreignObject"!==t.type&&o,i,a,l,s)),s||("value"in y&&void 0!==(u=y.value)&&u!==e.value&&E(e,"value",u,h.value,!1),"checked"in y&&void 0!==(u=y.checked)&&u!==e.checked&&E(e,"checked",u,h.checked,!1))}return e}function N(e,n,r){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,r)}}function O(e,n,r){var o,i,a;if(t.unmount&&t.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||N(o,null,n)),r||"function"==typeof e.type||(r=null!=(i=e.__e)),e.__e=e.__d=void 0,null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){t.__e(e,n)}o.base=o.__P=null}if(o=e.__k)for(a=0;a<o.length;a++)o[a]&&O(o[a],n,r);null!=i&&d(i)}function z(e,t,n){return this.constructor(e,n)}function j(e,n,r){var o,i,s;t.__&&t.__(e,n),i=(o=r===a)?null:r&&r.__k||n.__k,e=m(h,null,[e]),s=[],M(n,(o?n:r||n).__k=e,i||l,l,void 0!==n.ownerSVGElement,r&&!o?[r]:i?null:n.childNodes.length?c.slice.call(n.childNodes):null,s,r||l,o),C(s,e)}function L(e,t){j(e,t,a)}function I(e,t){var n,r;for(r in t=f(f({},e.props),t),arguments.length>2&&(t.children=c.slice.call(arguments,2)),n={},t)"key"!==r&&"ref"!==r&&(n[r]=t[r]);return p(e.type,n,t.key||e.key,t.ref||e.ref,null)}t={__e:function(e,t){for(var n,r;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(e)),r)return x(n.__E=n)}catch(t){e=t}throw e}},y.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=f({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&f(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),x(this))},y.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),x(this))},y.prototype.render=h,n=[],r=0,o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,a=l,s=0;var q,P,T,F=0,R=[],U=t.__r,B=t.diffed,D=t.__c,H=t.unmount;function W(e,n){t.__h&&t.__h(P,e,F||n),F=0;var r=P.__H||(P.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function V(e){return F=1,K(te,e)}function K(e,t,n){var r=W(q++,2);return r.t=e,r.__c||(r.__c=P,r.__=[n?n(t):te(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__[0]=t,r.__c.setState({}))}]),r.__}function $(e,n){var r=W(q++,4);!t.__s&&ee(r.__H,n)&&(r.__=e,r.__H=n,P.__h.push(r))}function G(e){return F=5,Q((function(){return{current:e}}),[])}function Q(e,t){var n=W(q++,7);return ee(n.__H,t)?(n.__H=t,n.__h=e,n.__=e()):n.__}function J(e,t){return F=8,Q((function(){return e}),t)}function Y(){R.some((function(e){if(e.__P)try{e.__H.__h.forEach(Z),e.__H.__h.forEach(X),e.__H.__h=[]}catch(n){return e.__H.__h=[],t.__e(n,e.__v),!0}})),R=[]}function Z(e){"function"==typeof e.u&&e.u()}function X(e){e.u=e.__()}function ee(e,t){return!e||t.some((function(t,n){return t!==e[n]}))}function te(e,t){return"function"==typeof t?t(e):t}function ne(e,t){for(var n in t)e[n]=t[n];return e}function re(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}t.__r=function(e){U&&U(e),q=0;var t=(P=e.__c).__H;t&&(t.__h.forEach(Z),t.__h.forEach(X),t.__h=[])},t.diffed=function(e){B&&B(e);var n=e.__c;n&&n.__H&&n.__H.__h.length&&(1!==R.push(n)&&T===t.requestAnimationFrame||((T=t.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);"undefined"!=typeof window&&(t=requestAnimationFrame(n))})(Y))},t.__c=function(e,n){n.some((function(e){try{e.__h.forEach(Z),e.__h=e.__h.filter((function(e){return!e.__||X(e)}))}catch(r){n.some((function(e){e.__h&&(e.__h=[])})),n=[],t.__e(r,e.__v)}})),D&&D(e,n)},t.unmount=function(e){H&&H(e);var n=e.__c;if(n&&n.__H)try{n.__H.__.forEach(Z)}catch(e){t.__e(e,n.__v)}};var oe=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).isPureReactComponent=!0,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.shouldComponentUpdate=function(e,t){return re(this.props,e)||re(this.state,t)},r}(y),ie=t.__b;t.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),ie&&ie(e)};var ae="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function se(e){function t(t,n){var r=ne({},t);return delete r.ref,e(r,t.ref||n)}return t.$$typeof=ae,t.render=t,t.prototype.isReactComponent=t.t=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var le=function(e,t){return e?w(e).reduce((function(e,n,r){return e.concat(t(n,r))}),[]):null},ce={map:le,forEach:le,count:function(e){return e?w(e).length:0},only:function(e){if(1!==(e=w(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:w},ue=t.__e;function fe(e){return e&&((e=ne({},e)).__c=null,e.__k=e.__k&&e.__k.map(fe)),e}function de(){this.__u=0,this.o=null,this.__b=null}function me(e){var t=e.__.__c;return t&&t.u&&t.u(e)}function pe(){this.i=null,this.l=null}t.__e=function(e,t,n){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return r.__c(e,t.__c);ue(e,t,n)},(de.prototype=new y).__c=function(e,t){var n=this;null==n.o&&(n.o=[]),n.o.push(t);var r=me(n.__v),o=!1,i=function(){o||(o=!0,r?r(a):a())};t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){i(),t.__c&&t.__c()};var a=function(){var e;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});e=n.o.pop();)e.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),e.then(i,i)},de.prototype.render=function(e,t){return this.__b&&(this.__v.__k[0]=fe(this.__b),this.__b=null),[m(y,null,t.u?null:e.children),t.u&&e.fallback]};var he=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(pe.prototype=new y).u=function(e){var t=this,n=me(t.__v),r=t.l.get(e);return r[0]++,function(o){var i=function(){t.props.revealOrder?(r.push(o),he(t,e,r)):o()};n?n(i):i()}},pe.prototype.render=function(e){this.i=null,this.l=new Map;var t=w(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},pe.prototype.componentDidUpdate=pe.prototype.componentDidMount=function(){var e=this;e.l.forEach((function(t,n){he(e,n,t)}))};var ye=function(){function e(){}var t=e.prototype;return t.getChildContext=function(){return this.props.context},t.render=function(e){return e.children},e}();function ve(e){var t=this,n=e.container,r=m(ye,{context:t.context},e.vnode);return t.s&&t.s!==n&&(t.v.parentNode&&t.s.removeChild(t.v),O(t.h),t.p=!1),e.vnode?t.p?(n.__k=t.__k,j(r,n),t.__k=n.__k):(t.v=document.createTextNode(""),L("",n),n.appendChild(t.v),t.p=!0,t.s=n,j(r,n,t.v),t.__k=t.v.__k):t.p&&(t.v.parentNode&&t.s.removeChild(t.v),O(t.h)),t.h=r,t.componentWillUnmount=function(){t.v.parentNode&&t.s.removeChild(t.v),O(t.h)},null}var ge=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;y.prototype.isReactComponent={};var xe="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,_e=t.event;function be(e,t){e["UNSAFE_"+t]&&!e[t]&&Object.defineProperty(e,t,{configurable:!1,get:function(){return this["UNSAFE_"+t]},set:function(e){this["UNSAFE_"+t]=e}})}t.event=function(e){_e&&(e=_e(e)),e.persist=function(){};var t=!1,n=!1,r=e.stopPropagation;e.stopPropagation=function(){r.call(e),t=!0};var o=e.preventDefault;return e.preventDefault=function(){o.call(e),n=!0},e.isPropagationStopped=function(){return t},e.isDefaultPrevented=function(){return n},e.nativeEvent=e};var we={configurable:!0,get:function(){return this.class}},Se=t.vnode;function Ee(e){return!!e&&e.$$typeof===xe}t.vnode=function(e){e.$$typeof=xe;var t=e.type,n=e.props;if(t){if(n.class!=n.className&&(we.enumerable="className"in n,null!=n.className&&(n.class=n.className),Object.defineProperty(n,"className",we)),"function"!=typeof t){var r,o,i;for(i in n.defaultValue&&void 0!==n.value&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),Array.isArray(n.value)&&n.multiple&&"select"===t&&(w(n.children).forEach((function(e){-1!=n.value.indexOf(e.props.value)&&(e.props.selected=!0)})),delete n.value),n)if(r=ge.test(i))break;if(r)for(i in o=e.props={},n)o[ge.test(i)?i.replace(/[A-Z0-9]/,"-$&").toLowerCase():i]=n[i]}!function(t){var n=e.type,r=e.props;if(r&&"string"==typeof n){var o={};for(var i in r)/^on(Ani|Tra|Tou)/.test(i)&&(r[i.toLowerCase()]=r[i],delete r[i]),o[i.toLowerCase()]=i;if(o.ondoubleclick&&(r.ondblclick=r[o.ondoubleclick],delete r[o.ondoubleclick]),o.onbeforeinput&&(r.onbeforeinput=r[o.onbeforeinput],delete r[o.onbeforeinput]),o.onchange&&("textarea"===n||"input"===n.toLowerCase()&&!/^fil|che|ra/i.test(r.type))){var a=o.oninput||"oninput";r[a]||(r[a]=r[o.onchange],delete r[o.onchange])}}}(),"function"==typeof t&&!t.m&&t.prototype&&(be(t.prototype,"componentWillMount"),be(t.prototype,"componentWillReceiveProps"),be(t.prototype,"componentWillUpdate"),t.m=!0)}Se&&Se(e)};var ke={useState:V,useReducer:K,useEffect:function(e,n){var r=W(q++,3);!t.__s&&ee(r.__H,n)&&(r.__=e,r.__H=n,P.__H.__h.push(r))},useLayoutEffect:$,useRef:G,useImperativeHandle:function(e,t,n){F=6,$((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==n?n:n.concat(e))},useMemo:Q,useCallback:J,useContext:function(e){var t=P.context[e.__c],n=W(q++,9);return n.__c=e,t?(null==n.__&&(n.__=!0,t.sub(P)),t.props.value):e.__},useDebugValue:function(e,n){t.useDebugValue&&t.useDebugValue(n?n(e):e)},version:"16.8.0",Children:ce,render:function(e,t,n){if(null==t.__k)for(;t.firstChild;)t.removeChild(t.firstChild);return j(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return L(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(j(null,e),!0)},createPortal:function(e,t){return m(ve,{vnode:e,container:t})},createElement:m,createContext:function(e){var t={},n={__c:"__cC"+s++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,o=this;return this.getChildContext||(r=[],this.getChildContext=function(){return t[n.__c]=o,t},this.shouldComponentUpdate=function(e){o.props.value!==e.value&&r.some((function(t){t.context=e.value,x(t)}))},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Consumer.contextType=n,n.Provider.__=n,n},createFactory:function(e){return m.bind(null,e)},cloneElement:function(e){return Ee(e)?I.apply(null,arguments):e},createRef:function(){return{}},Fragment:h,isValidElement:Ee,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:y,PureComponent:oe,memo:function(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:re(this.props,e)}function r(t){return this.shouldComponentUpdate=n,m(e,t)}return r.prototype.isReactComponent=!0,r.displayName="Memo("+(e.displayName||e.name)+")",r.t=!0,r},forwardRef:se,unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:h,Suspense:de,SuspenseList:pe,lazy:function(e){var t,n,r;function o(o){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return m(n,o)}return o.displayName="Lazy",o.t=!0,o}};function Me(e){return e instanceof Set?e.size:e.length}function Ce(e,t){var n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=n.size,o={setA:r,setB:r,union:r,intersection:r};return function(i){if(i===e)return o;var a=0;i.forEach((function(e){(t&&n.has(t(e))||!t&&n.has(e))&&a++}));var s=Me(i);return{setA:r,setB:s,intersection:a,union:r+s-a}}}function Ae(e,t){var n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=Array.isArray(e)?e:Array.from(e),o={setA:r,setB:r,union:r,intersection:r};return function(i){if(i===e)return o;var a=[],s=r.slice();return i.forEach((function(e){t&&n.has(t(e))||!t&&n.has(e)?a.push(e):s.push(e)})),{setA:r,setB:Array.isArray(i)?i:Array.from(i),intersection:a,union:s}}}function Ne(e,t){var n=e instanceof Set?Array.from(e):e,r=t?new Set(n.map(t)):e instanceof Set?e:new Set(e);return function(o){if(o===e)return n;var i=[];return o.forEach((function(e){(t&&r.has(t(e))||!t&&r.has(e))&&i.push(e)})),i}}function Oe(e){return Array.isArray(e.elems)}function ze(e){return"function"==typeof e.overlap}function je(e){return null!=e.set}function Le(e,t,n){if(ze(e))return e.overlap;if(je(e)&&e.set.overlap)return e.set.overlap;var r=Ce(Oe(e)?e.elems:e.set.elems,n);return function(n){return n.overlap&&Oe(e)&&Array.isArray(e.elems)?n.overlap(e.elems):n.overlap&&je(e)?n.overlap(e.set):r(n.elems)[t]}}function Ie(e,t,n){if(ze(e))return function(){return null};if("intersection"===t){var r=Ne(Oe(e)?e.elems:e.set.elems,n);return function(e){return r(e.elems)}}var o=Ae(Oe(e)?e.elems:e.set.elems,n);return function(e){return o(e.elems)[t]}}function qe(e){return null!=e&&"number"==typeof e.cardinality&&"string"==typeof e.name&&Array.isArray(e.elems)}function Pe(e){return qe(e)&&"set"===e.type}function Te(e){var t=e;return qe(e)&&["composite","union","intersection","distinctIntersection"].includes(t.type)&&t.sets instanceof Set&&"number"==typeof t.degree}function Fe(e){return Pe(e)||Te(e)}function Re(e){return null!=e&&(null==e.type||["intersection","union"].includes(e.type))}function Ue(e){var t=e;return null!=e&&"string"==typeof t.name&&"string"==typeof t.color&&(Oe(t)||je(t)||ze(t))}function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function De(e,t){return e.name.localeCompare(t.name)}function He(e,t){return t.cardinality-e.cardinality}function We(e,t){return e.degree-t.degree}function Ve(e){return function(t,n){return e.reduce((function(e,r){return 0===e?r(t,n):e}),0)}}function Ke(e){return function(t,n){return-e(t,n)}}function $e(e){return function(t,n){var r=function(e){return e<0?Number.POSITIVE_INFINITY:e};return r(e.findIndex((function(e){return t.sets.has(e)})))-r(e.findIndex((function(e){return n.sets.has(e)})))}}function Ge(e,t,n){var r=n(e);return Object.assign({type:t,cardinality:e.elems.length,sets:new Set(r),degree:r.length},e)}var Qe={distinctIntersection:" ∩ ",intersection:" ∩ ",union:" ∪ ",composite:","};function Je(e,t,n){var r=Array.from(e).sort((function(e,n){return t.get(e)-t.get(n)}));return 1===r.length?r[0].name:"("+r.map((function(e){return e.name})).join(n)+")"}function Ye(e,t,n,r,o){return{type:0===n.size?"composite":e,elems:r,color:o(Array.from(n).map((function(e){return e.color}))),sets:n,name:t,cardinality:r.length,degree:n.size}}function Ze(e,t,n,r,o,i,a){var s=new Set(e.sets);t.sets.forEach((function(e){return s.add(e)}));var l=Je(s,o,Qe[i]);if(0===e.cardinality||0===t.cardinality)return Ye(i,l,s,[],a);var c=e,u=t;e.cardinality>t.cardinality&&(c=t,u=e);for(var f=new Set,d=n.get(u),m=[],p=c.elems.length,h=0;h<p;h++){var y=c.elems[h],v=r(y);d.has(v)&&(f.add(v),m.push(y))}var g=Ye(i,l,s,m,a);return n.set(g,f),g}function Xe(e,t,n,r,o,i,a){var s=new Set(e.sets);t.sets.forEach((function(e){return s.add(e)}));var l=Je(s,o,Qe[i]);if(0===e.cardinality){var c=Ye(i,l,s,t.elems,a);return n.set(c,n.get(t)),c}if(0===t.cardinality){var u=Ye(i,l,s,e.elems,a);return n.set(u,n.get(e)),u}var f=e,d=t;e.cardinality>t.cardinality&&(f=t,d=e);var m=new Set(n.get(d)),p=n.get(d),h=d.elems.slice();f.elems.forEach((function(e){var t=r(e);p.has(t)||(m.add(t),h.push(e))}));var y=Ye(i,l,s,h,a);return n.set(y,m),y}function et(e,t,n,r,o,i){if("number"==typeof t)return{type:"composite",elems:[],color:i?i([]):void 0,sets:new Set,name:"()",cardinality:t,overlap:function(e){return e===this||Fe(e)&&e.name===this.name&&e.cardinality===this.cardinality?this.cardinality:0},degree:0};if(Array.isArray(t))return Ye(e,"()",new Set,t,i);var a=Array.from(r.values()),s=n.filter((function(e){var t=o(e);return a.every((function(e){return!e.has(t)}))}));return Ye(e,"()",new Set,s,i)}function tt(e){if(1===e.length)return e[0]}function nt(e,t){var n=void 0===t?{}:t,r=n.type,o=void 0===r?"intersection":r,i=n.min,a=void 0===i?0:i,s=n.max,l=void 0===s?1/0:s,c=n.empty,u=void 0!==c&&c,f=n.elems,d=void 0===f?[]:f,m=n.notPartOfAnySet,p=n.toElemKey,h=n.mergeColors,y=void 0===h?tt:h,v=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(n,["type","min","max","empty","elems","notPartOfAnySet","toElemKey","mergeColors"]),g=[],x=new Map(e.map((function(e,t){return[e,t]}))),_=new Map(e.map((function(e){return[e,p?new Set(e.elems.map(p)):new Set(e.elems)]}))),b=p?null:_,w=p?_:null,S="union"===o?Xe:Ze;function E(t){if(!(t.degree<a||t.degree>l||0===t.cardinality&&!u))if("distinctIntersection"===o){var n=e.filter((function(e){return!t.sets.has(e)})),r=t.elems.filter(p?function(e){var t=p(e);return n.every((function(e){return!w.get(e).has(t)}))}:function(e){return n.every((function(t){return!b.get(t).has(e)}))});if(r.length!==t.cardinality){var i=Ye(o,t.name,t.sets,r,y);(0!==i.cardinality||u)&&g.push(i)}else g.push(t)}else g.push(t)}function k(e,t,n,r){if(!(t>l))for(var i=e.length,a=0;a<i;a++){for(var s=e[a],c=[],f=a+1;f<i;f++){var d=S(s,e[f],n,r,x,o,y);E(d),("union"===o||d.cardinality>0||u)&&c.push(d)}c.length>1&&k(c,t+1,n,r)}}a<=0&&E(p?et(o,m,d,w,p,y):et(o,m,d,b,(function(e){return e}),y));var M=e.map((function(e){var t=Ye(o,e.name,new Set([e]),e.elems,y);return _.set(t,_.get(e)),E(t),t}));return p?k(M,2,w,p):k(M,2,b,(function(e){return e})),function(e,t,n){void 0===n&&(n={});var r=t;return n.order&&(r=r.sort(function(e,t){if(!t)return De;var n=Array.isArray(t)?t:[t];return 0===n.length?De:Ve(n.map((function(t){switch(t){case"cardinality":case"cardinality:desc":return He;case"cardinality:asc":return Ke(He);case"name:desc":return Ke(De);case"degree":case"degree:asc":return We;case"degree:desc":return Ke(We);case"group":case"group:asc":return $e(e);case"group:desc":return Ke($e(e));default:return De}})))}(e,n.order))),null!=n.limit?r.slice(0,n.limit):r}(e,g,v)}function rt(e){return Object.assign({type:"set",cardinality:e.elems.length},e)}function ot(e,t){void 0===t&&(t={});var n=e;if(t.order){var r=function(e){if(!e)return De;switch(e){case"cardinality":case"cardinality:desc":return Ve([He,De]);case"cardinality:asc":return Ve([Ke(He),De]);case"name:desc":return Ke(De);default:return De}}(t.order);n=n.slice().sort(r)}return null!=t.limit?n.slice(0,t.limit):n}function it(e){return e.name+":"+e.type+"#"+e.cardinality}var at=function(e,t,n){var r=t/Math.max(1,e.length+n),o=t-r*e.length,i=new Map(e.map((function(e,t){return[e,t]}))),a=r/(1+n),s=function(e){var t=i.get(e);if(null!=t)return o+r*t};return s.bandwidth=function(){return a},s};function st(e,t,n){void 0===n&&(n=1);for(var r=0;r<e.length-n;r+=n){var o=e[r],i=e[r+1];if(o<i){if(o+t[r]/2>i-t[r+1]/2)return!0}else if(i+t[r+1]/2>o-t[r]/2)return!0}return!1}function lt(e,t,n,r,o){var i=e[e.length-1];if(!i.label)for(var a=e.length-2;a>0;--a)if(e[a].label){i=e[a];break}if(i.value<t){var s=n(i.value),l=n(t);if(s<l)s+r(i.value)/2<l-r(t)/2&&e.push({value:t,label:o(t)});else{var c=s-r(i.value)/2;l+r(t)/2<c&&e.push({value:t,label:o(t)})}}return e}function ct(e,t,n){return void 0===t&&(t=String),void 0===n&&(n=1),e.map((function(e,r){return{value:e,label:1===n||r%n==0?t(e):void 0}}))}function ut(e,t,n,r,o){var i=e.map((function(e){return t(e)})),a=e.map((function(e){return n(e)}));return st(i,a)&&st(i,a,2)?null:lt(ct(e,o),r,t,n,o)}function ft(e){return e.toLocaleString()}function dt(e,t){void 0===t&&(t=1);for(var n=[],r=0;r<=e;r+=t)n.push(r);return n}function mt(e,t,n,r){if(t<=0)return[];for(var o=function(e,t){void 0===t&&(t=11);var n=Math.max(0,Math.floor(Math.log10(e)-.5)),r=Math.pow(10,n),o=[1,2,5],i=o.map((function(e){return e*r}));n>0&&i.unshift(o[o.length-1]*Math.pow(10,n-1)),i.push(o[0]*Math.pow(10,n+1));var a=Math.ceil(e/t);return i.filter((function(t){return t>=a&&t<=e}))}(e,t),i=0;i<o.length;i++){var a=ut(dt(e,o[i]),n,r,e,ft);if(a)return a}return ct([0,e],ft)}var pt=function(e,t,n){var r=t[1]-t[0],o=e,i=function(e){return t[0]+e/o*r};return i.ticks=function(t){if(void 0===t&&(t=10),"vertical"===n.orientation){var r=Math.ceil(1.4*n.fontSizeHint);return mt(e,t+1,i,(function(){return r}))}var o=n.fontSizeHint/1.4;return mt(e,t+1,i,(function(e){return Math.ceil(ft(e).length*o)}))},i.tickFormat=function(){return ft},i};function ht(e){var t=["","k","M","G"],n=Math.max(0,Math.min(Math.floor(Math.log10(e)/3),t.length-1));return""+(Math.round(e/Math.pow(10,3*n-1))/10).toLocaleString()+t[n]}function yt(e,t){for(var n=[],r=Math.pow(10,t),o=1;o<=e;o*=r)n.push(o);return n}function vt(e,t){for(var n=[],r=1,o=0;r<=e;r*=10,o++){n.push({value:r,label:1===t||o%t==0?ht(r):void 0});for(var i=r+r;i<10*r&&i<e;i+=r*t)n.push({value:i})}return n}function gt(e,t,n,r){if(t<=0)return[];for(var o=0,i=[1,2,5];o<i.length;o++){var a=i[o];if(ut(yt(e,a),n,r,e,ht))return lt(vt(e,a),e,n,r,ht)}return ct([0,e],ht)}var xt=function(e,t,n){var r=t[1]-t[0],o=e<1?1:Math.log10(e),i=function(e){var n=e<=1?0:Math.log10(e)/o;return t[0]+n*r};return i.ticks=function(t){if(void 0===t&&(t=10),"vertical"===n.orientation){var r=Math.ceil(1.4*n.fontSizeHint);return gt(e,t+1,i,(function(){return r}))}var o=n.fontSizeHint/1.4;return gt(e,t+1,i,(function(e){return Math.ceil(ht(e).length*o)}))},i.tickFormat=function(){return ht},i};function _t(e,t,n){var r=void 0===n?{}:n,o=r.sortAble,i=r.compress,a=void 0===i?"auto":i;if(0===e.length)return[];var s=e.map((function(e){return t(e)}));if("no"===a)return s;o&&s.sort((function(e,t){return e-t}));var l=function(e){if(0===e.length)return"";for(var t=[],n=0,r=function(r){return t.push(r===n+1?e[n].toString():r===n+2&&r<10?e[n]+","+e[n+1]:e[n]+"+"+(r-n-1)),r},o=1;o<e.length;o++)e[o]!==e[o-1]+1&&(n=r(o),n=o);return r(e.length),t.join(",")}(s),c=JSON.stringify(s).length,u=l.length+2;return u<.6*c||c-u>50||"yes"===a&&u<c?l:s}function bt(e,t){return"string"==typeof e?0===e.length?[]:e.split(",").map((function(e){if(e.includes("+")){var n=e.split("+").map((function(e){return Number.parseInt(e,10)})),r=n[0];return t.slice(r,r+n[1]+1)}return t[Number.parseInt(e,10)]})).flat():e.map((function(e){return t[e]}))}function wt(e,t){return t.color&&(e.color=t.color),e}function St(e,t){var n;void 0===t&&(t={});var r=Be({sortAble:!0},t),o=null!==(n=t.toKey)&&void 0!==n?n:it,i=new Map(e.sets.map((function(e,t){return[o(e),t]}))),a=new Map(e.combinations.map((function(e,t){return[o(e),t]}))),s=function(t){if("set"===t.type)return{type:t.type,index:i.get(o(t))};var n=a.get(o(t));return null==n||n<0?_t(t.elems,e.toElemIndex,r):{type:t.type,index:n}},l=e.sets.map((function(e,t){return{key:o(e),i:t}}));return{sets:e.sets.map((function(t){return wt({name:t.name,cardinality:t.cardinality,elems:_t(t.elems,e.toElemIndex,r)},t)})),combinations:"no"===t.compress?e.combinations.map((function(t){var n=new Set(Array.from(t.sets).map(o));return wt({name:t.name,type:t.type,cardinality:t.cardinality,degree:t.degree,sets:l.filter((function(e){return n.has(e.key)})).map((function(e){return e.i})),elems:_t(t.elems,e.toElemIndex,r)},t)})):void 0,combinationOptions:e.combinationOptions,selection:e.selection?Array.isArray(e.selection)?_t(e.selection,e.toElemIndex,r):s(e.selection):void 0,queries:e.queries.map((function(t){var n=je(t)?s(t.set):_t(Array.from(t.elems),e.toElemIndex,r);return{name:t.name,color:t.color,set:"string"==typeof n||Array.isArray(n)?void 0:n,elems:"string"==typeof n||Array.isArray(n)?n:void 0}}))}}function Et(e,t){return 1===e.length?e[0].name:"("+e.map((function(e){return e.name})).join(Qe[t])+")"}function kt(e,t){var n;void 0===t&&(t={});var r=null!==(n=t.toKey)&&void 0!==n?n:it,o=new Map(e.sets.map((function(e,t){return[r(e),t]}))),i=new Map(e.combinations.map((function(e,t){return[r(e),t]}))),a=function(t){if(Fe(t)){if("set"===t.type)return{type:t.type,index:o.get(r(t))};var n=i.get(r(t));if(null!=n&&n>=0)return{type:t.type,index:n}}var a=Ce(Fe(t)?t.elems:t);return e.sets.map((function(e){return a(e.elems).intersection})).concat(e.combinations.map((function(e){return a(e.elems).intersection})))},s=new Map(e.sets.map((function(e,t){return[r(e),t]}))),l=function(e,t,n){var r=void 0===n?{}:n,o=r.toElemKey,i=r.what,a=void 0===i?"intersection":i,s=r.compress,l=void 0===s?"auto":s,c=e.concat(t),u=c.map((function(e,t){for(var n=function(e){if(e.overlap)return e.overlap;var t=Ce(e.elems,o);return function(n){return n.overlap?n.overlap(e):t(n.elems)[a]}}(e),r=[],i=t+1;i<c.length;i++)r.push(n(c[i]));return r}));if(u.pop(),"no"===l)return u;var f=function(e){return 0===e.length?"":e.length+";"+function(e){if(0===e.length)return"";for(var t=[],n=e[0],r=1,o=1;o<e.length;o++){var i=e[o];i===n?r++:(t.push(r>1?n+"="+(r-1):0===n?"":n.toString()),n=i,r=1)}return t.push(r>1?n+"="+r:0===n?"":n.toString()),t.join(",")}(e.flat())}(u);if("yes"===l)return f;var d=JSON.stringify(u).length;return f.length+2<.6*d?f:u}(e.sets,e.combinations,t),c="yes"===t.compress;return{sets:e.sets.map(c?function(e){return{n:e.name,cc:e.color,c:e.cardinality}}:function(e){return wt({name:e.name,cardinality:e.cardinality},e)}),combinations:e.combinations.map(c?function(t){var n=Array.from(t.sets).map((function(e){return s.get(r(e))})).sort((function(e,t){return e-t})),o={c:t.cardinality,s:n.reduce((function(e,t){return e+Math.pow(2,t)}),0)};return t.name!==Et(n.map((function(t){return e.sets[t]})),t.type)&&(o.n=t.name),"intersection"!==t.type&&(o.type=t.type[0]),t.color&&(o.cc=t.color),o}:function(e){return wt({name:e.name,cardinality:e.cardinality,type:e.type,sets:Array.from(e.sets).map((function(e){return s.get(r(e))})).sort((function(e,t){return e-t}))},e)}),overlaps:l,selection:e.selection?a(e.selection):void 0,queries:e.queries.map((function(t){if(je(t)){var n=a(t.set);return Array.isArray(n)?{name:t.name,color:t.color,overlaps:n}:{name:t.name,color:t.color,set:n}}var r=Ce(t.elems),o=e.sets.map((function(e){return r(e.elems).intersection})).concat(e.combinations.map((function(e){return r(e.elems).intersection})));return{name:t.name,color:t.color,overlaps:o}}))}}function Mt(e){return"number"==typeof e.c}function Ct(e){return"number"==typeof e.c}var At=function(e,t,n){return function(e){var t=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return o(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return o(n,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,o,i,a={},s={},l="",c="",u="",f=2,d=3,m=2,p=[],h=0,y=0;for(i=0;i<e.length;i+=1)if(l=e.charAt(i),Object.prototype.hasOwnProperty.call(a,l)||(a[l]=d++,s[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(a,c))u=c;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(r=0;r<m;r++)h<<=1,y==t-1?(y=0,p.push(n(h)),h=0):y++;for(o=u.charCodeAt(0),r=0;r<8;r++)h=h<<1|1&o,y==t-1?(y=0,p.push(n(h)),h=0):y++,o>>=1}else{for(o=1,r=0;r<m;r++)h=h<<1|o,y==t-1?(y=0,p.push(n(h)),h=0):y++,o=0;for(o=u.charCodeAt(0),r=0;r<16;r++)h=h<<1|1&o,y==t-1?(y=0,p.push(n(h)),h=0):y++,o>>=1}0==--f&&(f=Math.pow(2,m),m++),delete s[u]}else for(o=a[u],r=0;r<m;r++)h=h<<1|1&o,y==t-1?(y=0,p.push(n(h)),h=0):y++,o>>=1;0==--f&&(f=Math.pow(2,m),m++),a[c]=d++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(r=0;r<m;r++)h<<=1,y==t-1?(y=0,p.push(n(h)),h=0):y++;for(o=u.charCodeAt(0),r=0;r<8;r++)h=h<<1|1&o,y==t-1?(y=0,p.push(n(h)),h=0):y++,o>>=1}else{for(o=1,r=0;r<m;r++)h=h<<1|o,y==t-1?(y=0,p.push(n(h)),h=0):y++,o=0;for(o=u.charCodeAt(0),r=0;r<16;r++)h=h<<1|1&o,y==t-1?(y=0,p.push(n(h)),h=0):y++,o>>=1}0==--f&&(f=Math.pow(2,m),m++),delete s[u]}else for(o=a[u],r=0;r<m;r++)h=h<<1|1&o,y==t-1?(y=0,p.push(n(h)),h=0):y++,o>>=1;0==--f&&(f=Math.pow(2,m),m++)}for(o=2,r=0;r<m;r++)h=h<<1|1&o,y==t-1?(y=0,p.push(n(h)),h=0):y++,o>>=1;for(;;){if(h<<=1,y==t-1){p.push(n(h));break}y++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var o,i,a,s,l,c,u,f=[],d=4,m=4,p=3,h="",y=[],v={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)f[o]=o;for(a=0,l=Math.pow(2,2),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,l=Math.pow(2,8),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;u=e(a);break;case 1:for(a=0,l=Math.pow(2,16),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;u=e(a);break;case 2:return""}for(f[3]=u,i=u,y.push(u);;){if(v.index>t)return"";for(a=0,l=Math.pow(2,p),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;switch(u=a){case 0:for(a=0,l=Math.pow(2,8),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;f[m++]=e(a),u=m-1,d--;break;case 1:for(a=0,l=Math.pow(2,16),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*c,c<<=1;f[m++]=e(a),u=m-1,d--;break;case 2:return y.join("")}if(0==d&&(d=Math.pow(2,p),p++),f[u])h=f[u];else{if(u!==m)return null;h=i+i.charAt(0)}y.push(h),f[m++]=i+h.charAt(0),i=h,0==--d&&(d=Math.pow(2,p),p++)}}};return i}();null!=e&&(e.exports=t)}(n={path:void 0,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),n.exports}();function Nt(e){return Array.from(e.classList).find((function(e){return e.startsWith("root-")})).slice("root-".length)}function Ot(e,t){var n,r;return null!==(n=null===(r=e.querySelector("titleTextStyle-"+t))||void 0===r?void 0:r.textContent)&&void 0!==n?n:"UpSetJS"}function zt(e,t){var n,r;return null!==(n=null===(r=e.querySelector("descTextStyle-"+t))||void 0===r?void 0:r.textContent)&&void 0!==n?n:""}function jt(e,t){var n=function(e,t){return function(e,t){return Math.sqrt(e*e+t*t)}(e.cx-t.cx,e.cy-t.cy)}(e,t),r=(e.r*e.r-t.r*t.r+n*n)/(2*n),o=e.cx+r*(t.cx-e.cx)/n,i=e.cy+r*(t.cy-e.cy)/n,a=Math.sqrt(e.r*e.r-r*r);return[{cx:o-a*(t.cy-e.cy)/n,cy:i+a*(t.cx-e.cx)/n},{cx:o+a*(t.cy-e.cy)/n,cy:i-a*(t.cx-e.cx)/n}]}var Lt=1/180*Math.PI;function It(e,t,n,r){return{x:e+Math.cos(r*Lt)*n,y:t+Math.sin(r*Lt)*n}}function qt(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),{rx:t,ry:t,rotation:0,largeArcFlag:n,sweepFlag:r,x2:e.cx,y2:e.cy}}function Pt(e){var t=e.reduce((function(e,t){return e+t.x2}),0),n=e.reduce((function(e,t){return e+t.y2}),0);return{cx:t/e.length,cy:n/e.length}}function Tt(e,t,n){var r=[qt(t,n),qt(e,n)],o=Pt(r);return{x1:e.cx,y1:e.cy,arcs:r,text:{x:o.cx,y:o.cy}}}function Ft(e,t){var n=Pt(t);return{x1:e.cx,y1:e.cy,arcs:t,text:{x:n.cx,y:n.cy}}}function Rt(e){return void 0===e&&(e=.25),{maxSets:3,compute:function(t,n,r,o){var i={w:r,h:o,cx:r/2,cy:o/2,r:Math.min(r,o)/2};return function(e,t,n){switch(void 0===n&&(n=.25),e){case 0:return{sets:[],universe:{text:{x:t.cx,y:t.cy},angle:0,width:t.w,height:t.h,x1:0,y1:0,arcs:[]},intersections:[]};case 1:return function(e){var t={cx:e.cx,cy:e.cy-e.r},n={cx:e.cx,cy:e.cy+e.r};return{sets:[{r:e.r,cx:e.cx,cy:e.cy,angle:180,text:It(e.cx,e.cy,1.1*e.r,30)}],universe:{width:e.w,height:e.h,x1:t.cx,y1:t.cy,text:{x:(e.w-2*e.r)/2,y:e.h-(e.h-2*e.r)/2},angle:90,arcs:[qt(n,e.r),qt(t,e.r)]},intersections:[{x1:t.cx,y1:t.cy,text:{x:e.cx,y:e.cy},arcs:[qt(n,e.r),qt(t,e.r)]}]}}(t);case 2:return function(e,t){var n=Math.floor(Math.min(e.h/2,e.w/(4-t))),r=e.w-3.5*n,o=e.cx-n*(1-t),i={r:n,cx:o,cy:e.cy,angle:270,text:It(o,e.cy,1.1*n,210)},a=e.cx+n*(1-t),s={r:n,cx:a,cy:e.cy,angle:90,text:It(a,e.cy,1.1*n,-30)},l=jt(i,s),c=l[0],u=l[1];return{sets:[i,s],universe:{width:e.w,height:e.h,x1:c.cx,y1:c.cy,angle:90,text:{x:r/2,y:e.h-(e.h-2*e.r)/2},arcs:[qt(u,n,!0),qt(c,n,!0)]},intersections:[{x1:c.cx,y1:c.cy,arcs:[qt(u,n,!1,!0),qt(c,n,!0)],text:{x:o,y:e.cy}},{x1:c.cx,y1:c.cy,arcs:[qt(u,n,!0,!1),qt(c,n,!1,!0)],text:{x:a,y:e.cy}},Tt(c,u,n)]}}(t,n);default:return function(e,t){var n=1+(2-2*t)*Math.cos(30*Lt)+1,r=Math.floor(Math.min(e.h/n,e.w/n)),o=e.cx,i=r*(2-2*t)/Math.sqrt(3),a=e.h-r-i,s=i,l=o+s*Math.cos(-90*Lt),c=a-s*Math.sin(-90*Lt),u={r:r,cx:l,cy:c,angle:180,text:It(l,c,1.1*r,30)},f=o-s*Math.cos(30*Lt),d=a-s*Math.sin(30*Lt),m={r:r,cx:f,cy:d,angle:300,text:It(f,d,1.1*r,210)},p=o-s*Math.cos(150*Lt),h=a-s*Math.sin(150*Lt),y={r:r,cx:p,cy:h,angle:60,text:It(p,h,1.1*r,-30)},v=jt(m,y),g=v[0],x=v[1],_=jt(y,u),b=_[0],w=_[1],S=jt(u,m),E=S[0],k=S[1];return{sets:[u,m,y],universe:{text:{x:(e.cx-r)/2,y:e.h-(e.cy-r)/2},angle:90,width:e.w,height:e.h,x1:g.cx,y1:g.cy,arcs:[qt(b,r,!0),qt(E,r,!0),qt(g,r,!0)]},intersections:[{x1:k.cx,y1:k.cy,arcs:[qt(g,r),qt(w,r),qt(k,r,!0,!0)],text:{x:l,y:c}},{x1:x.cx,y1:x.cy,arcs:[qt(b,r),qt(k,r),qt(x,r,!0,!0)],text:{x:f,y:d}},{x1:w.cx,y1:w.cy,arcs:[qt(E,r),qt(x,r),qt(w,r,!0,!0)],text:{x:p,y:h}},Ft(b,[qt(k,r),qt(g,r),qt(b,r,!1,!0)]),Ft(g,[qt(w,r),qt(E,r),qt(g,r,!1,!0)]),Ft(E,[qt(x,r),qt(b,r),qt(E,r,!1,!0)]),Ft(g,[qt(b,r,!1,!0),qt(E,r,!1,!0),qt(g,r,!1,!0)])]}}(t,n)}}(t.length,i,e)}}}var Ut={},Bt=[],Dt={setLabel:"16px",axisTick:"10px",chartLabel:"16px",barLabel:"10px",legend:"10px",description:"16px",title:"24px",valueLabel:"12px",exportLabel:"10px"},Ht=[.18,.12,.7],Wt=[.6,.4],Vt={type:"intersection"},Kt=Object.keys(Dt),$t=["axisTick","bar","barLabel","chartLabel","dot","legend","title","description","setLabel","set","valueLabel"],Gt=["dump","png","share","svg","vega"],Qt=Rt(),Jt={selectionColor:"#ffa500",color:"#000000",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff"},Yt={selectionColor:"#ffa500",color:"#cccccc",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#ffffff",hoverHintColor:"#d9d9d9",notMemberColor:"#666666",alternatingBackgroundColor:"rgba(255, 255, 255, 0.2)",valueTextColor:"#ffffff",strokeColor:"#ffffff",backgroundColor:"#303030"},Zt={selectionColor:"#4c78a8",color:"#4c78a8",hasSelectionColor:"#c9d6e5",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff"};function Xt(e){return"vega"===e?Zt:"dark"===e?Yt:Jt}function en(e){return e.toLocaleString()}function tn(e){return function(e){var t,n=Xt(e.theme);return Object.assign({theme:"light",padding:20,barPadding:.3,dotPadding:.7,combinations:Vt,selection:null,combinationName:null==e.combinations||(t=e.combinations,Array.isArray(t))||"union"!==e.combinations.type?"Intersection Size":"Union Size",barLabelOffset:2,setNameAxisOffset:"auto",combinationNameAxisOffset:"auto",setName:"Set Size",title:"",description:"",fontFamily:"sans-serif",widthRatios:Ht,heightRatios:Wt,queries:Bt,queryLegend:null!=e.queries&&e.queries.length>0,exportButtons:!0,numericScale:"linear",bandScale:"band",className:"",fontSizes:Dt,classNames:Ut,style:Ut,styles:Ut,childrenFactories:Ut,setAddons:Bt,combinationAddons:Bt,emptySelection:!0,toKey:it},n,e,e.fontSizes?{fontSizes:Object.assign({},Dt,e.fontSizes)}:Ut)}(e)}function nn(e){return function(e){var t=Xt(e.theme);return Object.assign({theme:"light",padding:20,selection:null,title:"",description:"",fontFamily:"sans-serif",queries:Bt,queryLegend:null!=e.queries&&e.queries.length>0,exportButtons:!0,valueFormat:en,layout:Qt,className:"",fontSizes:Dt,classNames:Ut,style:Ut,styles:Ut,toKey:it},t,e,e.fontSizes?{fontSizes:Object.assign({},Dt,e.fontSizes)}:Ut)}(e)}function rn(e,t){var n=e.cloneNode(!0);return n.style.backgroundColor=Xt(e.dataset.theme).backgroundColor,t&&Array.from(n.querySelectorAll(t)).forEach((function(e){return e.remove()})),(new XMLSerializer).serializeToString(n)}function on(e,t){var n=t.type,r=void 0===n?"png":n,o=t.title,i=new Blob([rn(e,t.toRemove)],{type:"image/svg+xml;charset=utf-8"}),a=Nt(e),s=null!=o?o:Ot(e,a),l=URL.createObjectURL(i);return"svg"===r?(an(l,s+"."+r,e.ownerDocument),URL.revokeObjectURL(l),Promise.resolve()):function(e,t){var n=t.ownerDocument.createElement("canvas"),r=t.getBoundingClientRect();n.width=r.width,n.height=r.height;var o=n.getContext("2d"),i=new Image(n.width,n.height);return new Promise((function(t){i.onload=function(){o.drawImage(i,0,0);var e=n.toDataURL("image/png");t(e)},i.src=e}))}(l,e).then((function(t){an(t,s+"."+r,e.ownerDocument),URL.revokeObjectURL(l)}))}function an(e,t,n){var r=n.createElement("a");r.href=e,r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.download=t,n.body.appendChild(r),r.click(),r.remove()}function sn(){return(sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ln=["bandScale","numericScale"].concat(["selectionColor","color","textColor","hoverHintColor","notMemberColor","alternatingBackgroundColor","hasSelectionColor","hasSelectionOpacity","opacity","strokeColor","valueTextColor"],["padding","barPadding","dotPadding","widthRatios","heightRatios"],["fontSizes","combinationName","setName","barLabelOffset","setNameAxisOffset","combinationNameAxisOffset","theme","fontFamily","emptySelection","exportButtons","queryLegend"]);function cn(e){var t,n=tn({width:0,height:0,sets:null!==(t=e.sets)&&void 0!==t?t:[],combinations:e.combinations,theme:e.theme}),r={};return ln.forEach((function(t){var o=e[t],i=n[t];if("theme"!==t||"light"===o){if(null!=o&&o!==i)if("fontSizes"===t){var a=!0,s={};Kt.forEach((function(e){var t=o[e];t!==i[e]&&(s[e]=t,a=!1)})),a||(r[t]=s)}else r[t]=o}else r[t]=o})),r}function un(e,t,n,r){return Object.assign({$schema:"https://upset.js.org/schema.1.0.0.json",name:"string"==typeof n.title?n.title:"UpSetJS",description:"string"==typeof n.description?n.description:"",author:r,elements:t,attrs:[],props:cn(n)},e)}function fn(e,t,n){return Object.assign({$schema:"https://upset.js.org/schema-static.1.0.0.json",name:"string"==typeof t.title?t.title:"UpSetJS",description:"string"==typeof t.description?t.description:"",author:n,props:cn(t)},e)}function dn(e,t,n){var r,o;void 0===n&&(n=!1);var i=[],a=new Map;return un(St({sets:e.sets,queries:null!==(r=null===(o=e.queries)||void 0===o?void 0:o.filter((function(e){return Oe(e)||je(e)})))&&void 0!==r?r:[],toElemIndex:function(e){return a.has(e)?a.get(e):(a.set(e,i.length),i.push(e),i.length-1)},selection:e.selection&&Fe(e.selection)?e.selection:void 0,combinations:t.cs.v,combinationOptions:Array.isArray(e.combinations)?{}:e.combinations},{compress:n?"yes":"no"}),i,e)}function mn(e,t,n){var r=dn(t,n),o=URL.createObjectURL(new Blob([JSON.stringify(r,null,2)],{type:"application/json"}));an(o,r.name+".json",e.ownerDocument),URL.revokeObjectURL(o)}function pn(e,t){var n=dn(e,t,!0);delete n.$schema;var r=At.compressToEncodedURIComponent(JSON.stringify(n)),o=new URL("https://upset.js.org/app/embed.html");if(o.searchParams.set("p",r),o.toString().length<4096)return window.open(o.toString(),"_blank"),!0;var i=function(e,t,n){var r,o;return void 0===n&&(n=!1),fn(kt({sets:e.sets,queries:null!==(r=null===(o=e.queries)||void 0===o?void 0:o.filter((function(e){return Oe(e)||je(e)})))&&void 0!==r?r:[],selection:e.selection&&Fe(e.selection)?e.selection:void 0,combinations:t.cs.v},{compress:n?"yes":"no"}),e)}(e,t,!0);delete i.$schema;var a=At.compressToEncodedURIComponent(JSON.stringify(i));if(o.searchParams.set("p",a),o.toString().length<4096)return window.open(o.toString(),"_blank"),!0;o.searchParams.delete("p");var s=window.open(o.toString(),"_blank");return null==s||s.addEventListener("load",(function(){null==s||s.postMessage(n,o.origin)})),!1}function hn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function yn(e){return"upset-"+Math.random().toString(36).slice(4)}function vn(e){return null!=e&&!Array.isArray(e)}function gn(e,t){var n=Ce(e,t);return function(e){return n(e.elems).intersection}}function xn(e,t){if(!e)return bn;if("function"==typeof e)return e;if(Array.isArray(e))return gn(e,t);var n=e;if(n.overlap)return n.overlap;var r=gn(n.elems,t);return function(e){return e.overlap?e.overlap(n):r(e)}}function _n(e){return Array.isArray(e)?"Array("+e.length+")":"function"==typeof e?"?":null==e?void 0:e.name}function bn(){return 0}function wn(e){return Array.isArray(e)}function Sn(e){var t=e.transform,n=e.styleId,r=e.exportButtons,o=e.exportChart;if(!r)return null;var i=0,a=[];return!0!==r&&!1===r.svg||(a.push(ke.createElement("g",{key:"svg",className:"exportButton-"+n,onClick:o,"data-type":"svg",transform:"translate(-"+(i+=26)+", 0)"},ke.createElement("title",null,"Download SVG Image"),ke.createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),ke.createElement("text",{className:"exportTextStyle-"+n,x:13},"SVG"))),i+=2),!0!==r&&!1===r.png||(a.push(ke.createElement("g",{key:"png",className:"exportButton-"+n,onClick:o,"data-type":"png",transform:"translate(-"+(i+=26)+", 0)"},ke.createElement("title",null,"Download PNG Image"),ke.createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),ke.createElement("text",{className:"exportTextStyle-"+n,x:13},"PNG"))),i+=2),!0!==r&&!1===r.vega||(a.push(ke.createElement("g",{key:"vega",className:"exportButton-"+n,onClick:o,"data-type":"vega",transform:"translate(-"+(i+=34)+", 0)"},ke.createElement("title",null,"Download VEGA-Lite Specification"),ke.createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),ke.createElement("text",{className:"exportTextStyle-"+n,x:17},"VEGA"))),i+=2),!0!==r&&!1===r.dump||(a.push(ke.createElement("g",{key:"dump",className:"exportButton-"+n,onClick:o,"data-type":"dump",transform:"translate(-"+(i+=34)+", 0)"},ke.createElement("title",null,"Download UpSet.js JSON Dump"),ke.createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),ke.createElement("text",{className:"exportTextStyle-"+n,x:17},"DUMP"))),i+=2),!0!==r&&!1===r.share||(a.push(ke.createElement("g",{key:"share",className:"exportButton-"+n,onClick:o,"data-type":"share",transform:"translate(-"+(i+=42)+", 0)"},ke.createElement("title",null,"Open a shareable URL"),ke.createElement("rect",{y:-9,width:42,height:11,rx:2,ry:2}),ke.createElement("text",{className:"exportTextStyle-"+n,x:21},"SHARE"))),i+=2),ke.createElement("g",{className:"exportButtons-"+n,transform:t},a)}var En=ke.memo((function(e){var t=e.queries,n=e.style,r=e.data;return ke.createElement("text",{transform:"translate("+e.x+",4)",style:n.styles.legend,className:hn("legendTextStyle-"+n.id,n.classNames.legend)},t.map((function(e,t){var n=null;return je(e)?n=e.set.cardinality:Oe(e)&&(n=e.elems instanceof Set?e.elems.size:e.elems.length),ke.createElement(ke.Fragment,{key:e.name},ke.createElement("tspan",{className:"fillQ"+t+"-"+r.id},"  ⬤ "),ke.createElement("tspan",null,e.name,null!=n?": "+r.sets.format(n):""))})))})),kn=ke.memo((function(e){var t=e.tickSizeInner,n=e.orient,r=e.name,o=e.style,i="top"===n||"left"===n?-1:1;return ke.createElement("g",{transform:"translate(0, "+(e.pos+.5)+")"},r&&ke.createElement("text",{x:i*e.spacing,dy:"0.32em",className:hn("axisTextStyle-"+o.id,"right"===n?"startText-"+o.id:"endText-"+o.id,o.classNames.axisTick),style:o.styles.axisTick},r),ke.createElement("line",{x2:i*t,className:"axisLine-"+o.id}))})),Mn=ke.memo((function(e){var t=e.name,n=e.orient,r=e.tickSizeInner,o=e.style,i="top"===n||"left"===n?-1:1;return ke.createElement("g",{transform:"translate("+(e.pos+.5)+", 0)"},t&&ke.createElement("text",{y:i*e.spacing,dy:"top"===n?"0em":"0.71em",className:hn("axisTextStyle-"+o.id,o.classNames.axisTick),style:o.styles.axisTick},t),ke.createElement("line",{y2:i*r,className:"axisLine-"+o.id}))}));function Cn(e){var t=e.scale,n=e.orient,r=e.tickSizeInner,o=void 0===r?6:r,i=e.tickSizeOuter,a=void 0===i?6:i,s=e.tickPadding,l=void 0===s?3:s,c=e.size,u=e.shift,f=e.style,d=e.transform,m=Math.max(o,0)+l,p=u,h=c,y="top"===n||"left"===n?-1:1,v="left"===n||"right"===n?kn:Mn,g=t.ticks().map((function(e){return"number"==typeof e?{value:e,label:String(e)}:e}));return ke.createElement("g",{transform:d},g.map((function(e){return ke.createElement(v,{key:e.value,pos:t(e.value),name:e.label,spacing:m,tickSizeInner:o,orient:n,style:f})})),ke.createElement("path",{className:"axisLine-"+f.id,d:"left"===n||"right"===n?a?"M"+y*a+","+p+"H0.5V"+h+"H"+y*a:"M0.5,"+p+"V"+h:a?"M"+p+","+y*a+"V0.5H"+h+"V"+y*a:"M"+p+",0.5H"+h}))}var An=ke.memo((function(e){var t=e.width,n=e.text,r=e.dy,o=e.x,i=e.style,a=e.className,s=G(null),l=V("string"==typeof n?[n]:[]),c=l[0],u=l[1];return $((function(){u("string"==typeof n?[n]:[])}),[n]),$((function(){if(s.current&&!(s.current.childElementCount>0)&&"string"==typeof n){for(var e=s.current.getComputedTextLength(),r=[],o=t,i=0,a=s.current.getStartPositionOfChar(0);e>o;){a.x=o;var l=s.current.getCharNumAtPosition(a),c=n.lastIndexOf(" ",l);if(c<i)break;r.push(n.slice(i,c+1)),i=c+1,o=s.current.getEndPositionOfChar(c+1).x+t}r.push(n.slice(i)),u(r)}}),[s,n,t]),n?ke.createElement("tspan",{ref:s,dy:r,style:i,x:o,className:a},c.length>1?c.map((function(e,t){return ke.createElement("tspan",{key:e,x:0,dy:t>0?"1.2em":r},e)})):n):null})),Nn=ke.memo((function(e){var t=e.width,n=e.style;return n.title||n.description?ke.createElement("text",null,ke.createElement(An,{text:n.title,width:t,dy:"10px",className:hn("titleTextStyle-"+n.id,n.classNames.title),style:n.styles.title}),ke.createElement(An,{x:0,width:t,dy:n.title?"2em":"10px",text:n.description,className:hn("descTextStyle-"+n.id,n.classNames.description),style:n.styles.description})):null}));function On(){}function zn(e){return e?function(t){return function(n){return e.call(this,t,n.nativeEvent)}}:On}function jn(e){var t=0,n=0;return function(r){var o=0;return"before"===r.position?o=-(t+=r.size):(o=e+n,n+=r.size),o}}function Ln(e,t,n){var r,o;return void 0===n&&(n="fill"),t?e?Object.assign(((r={})[n]=t,r),e):t?((o={})[n]=t,o):void 0:e}var In=ke.memo((function(e){var t=e.size,n=e.style,r=e.data,o=jn(t.sets.w+t.labels.w+t.cs.w),i=jn(t.cs.h+t.sets.h),a="auto"===n.cs.offset?r.cs.labelOffset:n.cs.offset,s="auto"===n.sets.offset?r.sets.labelOffset:n.sets.offset;return ke.createElement("g",null,ke.createElement(Nn,{style:n,width:t.cs.x-a-20}),ke.createElement("g",{transform:"translate("+t.cs.x+","+t.cs.y+")","data-upset":"csaxis"},ke.createElement(Cn,{scale:r.cs.y,orient:"left",size:t.cs.h,shift:t.cs.h-r.cs.yAxisWidth,style:n}),ke.createElement("line",{x1:0,x2:t.cs.w,y1:t.cs.h+1,y2:t.cs.h+1,className:"axisLine-"+n.id}),ke.createElement("text",{className:hn("cChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+-a+", "+t.cs.h/2+")rotate(-90)"},n.cs.name),t.cs.addons.map((function(e){return ke.createElement("text",{key:e.name,className:hn("cChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+-a+", "+(i(e)+e.size/2)+")rotate(-90)"},e.name)}))),ke.createElement("g",{transform:"translate("+t.sets.x+","+t.sets.y+")","data-upset":"setaxis"},ke.createElement(Cn,{scale:r.sets.x,orient:"bottom",size:t.sets.w,shift:t.sets.w-r.sets.xAxisWidth,transform:"translate(0, "+t.sets.h+")",style:n}),ke.createElement("text",{className:hn("sChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+t.sets.w/2+", "+(t.sets.h+s)+")"},n.sets.name),t.sets.addons.map((function(e){return ke.createElement("text",{key:e.name,className:hn("sChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+(o(e)+e.size/2)+", "+(t.sets.h+s)+")"},e.name)}))))})),qn=ke.memo((function(e){var t=e.name;return ke.createElement("circle",{r:e.r,cx:e.cx,cy:e.cy,className:e.className,style:Ln(e.style,e.fill)},ke.createElement("title",null,t))})),Pn=ke.memo((function(e){var t=e.d,n=e.onClick,r=e.onMouseEnter,o=e.onMouseLeave,i=e.onContextMenu,a=e.className,s=e.data,l=e.size,c=e.style,u=e.children,f=s.cs.y(t.cardinality),d=jn(l.cs.h+l.sets.h);return ke.createElement("g",{transform:"translate("+s.cs.x(t)+", 0)",onMouseEnter:r(t),onMouseLeave:o,onClick:n(t),onContextMenu:i(t),className:a,"data-cardinality":t.cardinality},ke.createElement("title",null,t.name,": ",s.cs.format(t.cardinality)),ke.createElement("rect",{y:-l.cs.before,width:s.cs.bandWidth,height:l.sets.h+l.cs.h+l.cs.before+l.cs.after,className:"hoverBar-"+c.id}),ke.createElement("rect",{y:f,height:l.cs.h-f,width:s.cs.bandWidth,className:hn("fillPrimary-"+c.id,c.classNames.bar),style:Ln(c.styles.bar,t.color)}),ke.createElement("text",{y:f-c.barLabelOffset,x:s.cs.bandWidth/2,style:c.styles.barLabel,className:hn("cBarTextStyle-"+c.id,c.classNames.barLabel)},s.cs.format(t.cardinality)),ke.createElement("text",{y:-c.barLabelOffset-l.cs.before,x:s.cs.bandWidth/2,style:c.styles.barLabel,className:hn("hoverBarTextStyle-"+c.id,c.classNames.barLabel)},t.name),s.sets.v.map((function(e,n){var r=s.cs.has(t,e);return ke.createElement(qn,{key:s.sets.keys[n],r:s.r,cx:s.cs.cx,cy:s.sets.y(e)+s.sets.cy,name:r?e.name:t.name,style:c.styles.dot,fill:r?t.color:void 0,className:hn(r?"fillPrimary-"+c.id:"fillNotMember-"+c.id,c.classNames.dot)})})),t.sets.size>1&&ke.createElement("line",{x1:s.cs.cx,y1:s.sets.y(s.sets.v.find((function(e){return s.cs.has(t,e)})))+s.sets.cy,x2:s.cs.cx,y2:s.sets.y(s.sets.rv.find((function(e){return s.cs.has(t,e)})))+s.sets.cy,style:t.color?{stroke:t.color}:void 0,className:"upsetLine-"+s.id}),l.cs.addons.map((function(e){return ke.createElement("g",{key:e.name,transform:"translate(0,"+d(e)+")"},e.render({set:t,width:s.cs.bandWidth,height:e.size,theme:c.theme}))})),u)})),Tn=ke.memo((function(e){var t=e.d,n=e.i,r=e.onMouseEnter,o=e.onMouseLeave,i=e.onClick,a=e.onContextMenu,s=e.className,l=e.size,c=e.data,u=e.style,f=e.children,d=c.sets.x(t.cardinality),m=jn(l.sets.w+l.labels.w+l.cs.w);return ke.createElement("g",{transform:"translate(0, "+c.sets.y(t)+")",onMouseEnter:r(t),onMouseLeave:o,onClick:i(t),onContextMenu:a(t),className:s,"data-cardinality":t.cardinality},ke.createElement("title",null,t.name,": ",c.sets.format(t.cardinality)),ke.createElement("rect",{x:-l.sets.before,width:l.sets.w+l.labels.w+l.cs.w+l.sets.after,height:c.sets.bandWidth,className:"hoverBar-"+u.id}),n%2==1&&ke.createElement("rect",{x:l.sets.w,width:l.labels.w+l.cs.w+l.sets.after,height:c.sets.bandWidth,className:"fillAlternating-"+u.id}),ke.createElement("rect",{x:d,width:l.sets.w-d,height:c.sets.bandWidth,className:hn("fillPrimary-"+u.id,u.classNames.bar),style:Ln(u.styles.bar,t.color)}),ke.createElement("text",{x:d,dx:-u.barLabelOffset,y:c.sets.bandWidth/2,style:u.styles.barLabel,className:hn("sBarTextStyle-"+u.id,u.classNames.barLabel)},c.sets.format(t.cardinality)),ke.createElement("text",{x:l.sets.w+l.labels.w/2,y:c.sets.bandWidth/2,className:hn("setTextStyle-"+u.id,u.classNames.setLabel),style:u.styles.setLabel,clipPath:"url(#clip-"+l.id+")"},t.name),l.sets.addons.map((function(e){return ke.createElement("g",{key:e.name,transform:"translate("+m(e)+",0)"},e.render({set:t,width:e.size,height:c.sets.bandWidth,theme:u.theme}))})),f)})),Fn=ke.memo((function(e){var t=e.data,n=e.size,r=e.style,o=e.onHover,i=e.onClick,a=e.onContextMenu,s=e.setChildrenFactory,l=e.combinationChildrenFactory,c=ke.useMemo((function(){return[zn(i),zn(o),zn(a),o?function(e){return o(null,e.nativeEvent)}:void 0]}),[i,o,a]),u=c[0],f=c[1],d=c[2],m=c[3];return ke.createElement("g",{className:i?"clickAble-"+r.id:void 0},ke.createElement("g",{transform:"translate("+n.sets.x+","+n.sets.y+")","data-upset":"sets"},t.sets.v.map((function(e,a){return ke.createElement(Tn,{key:t.sets.keys[a],d:e,i:a,onClick:u,onMouseEnter:f,onMouseLeave:m,onContextMenu:d,className:i||o?"interactive-"+r.id:void 0,data:t,style:r,size:n},s&&s(e))}))),ke.createElement("g",{transform:"translate("+n.cs.x+","+n.cs.y+")","data-upset":"cs"},t.cs.v.map((function(e,a){return ke.createElement(Pn,{key:t.cs.keys[a],d:e,onClick:u,onMouseEnter:f,onMouseLeave:m,onContextMenu:d,className:i||o?"interactive-"+r.id:void 0,data:t,style:r,size:n},l&&l(e))}))))}));function Rn(e){var t=e.data,n=e.size,r=e.style,o=e.elemOverlap,i=e.secondary,a=e.tooltip,s=e.transform,l=e.empty,c=e.combinationAddons,u=t.cs.bandWidth,f=n.cs.h+n.sets.h,d=n.cs.h,m=hn("fill"+e.suffix,!a&&"pnone-"+r.id,r.classNames.bar);return ke.createElement("g",{transform:s,"data-upset":i?"cs-q":"cs-s"},t.cs.v.map((function(e,n){var s=t.cs.x(e),p=t.cs.keys[n];if(l&&!i)return ke.createElement("rect",{key:p,x:s,y:d,height:0,width:u,className:m,style:Ln(r.styles.bar,r.selectionColor?void 0:e.color)},a&&ke.createElement("title",null));var h=o(e);if(0===h)return null;var y=t.cs.y(h),v=a&&ke.createElement("title",null,e.name+" ∩ "+a+": "+h),g=i?ke.createElement("path",{key:p,transform:"translate("+s+", "+y+")",d:"M0,-1 l"+u+",0 l0,2 l"+-u+",0 L-"+t.triangleSize+",-"+t.triangleSize+" L-"+t.triangleSize+","+t.triangleSize+" Z",className:m,"data-i":n,"data-cardinality":h,style:Ln(void 0,r.selectionColor?void 0:e.color)},v):ke.createElement("rect",{key:p,x:s,y:y,height:d-y,"data-i":n,"data-cardinality":h,width:u,className:m,style:Ln(r.styles.bar,r.selectionColor?void 0:e.color)},v),x=jn(f),_=c.map((function(t){var n=x(t),o=t.render({set:e,width:u,height:t.size,theme:r.theme});return o?ke.createElement("g",{key:t.name,transform:"translate("+s+","+n+")"},o):null})).filter(Boolean);return 0===_.length?g:ke.createElement("g",{key:p},g,_)})))}function Un(e){var t=e.data,n=e.size,r=e.style,o=e.elemOverlap,i=e.secondary,a=e.empty,s=e.tooltip,l=e.setAddons,c=e.transform,u=n.sets.w,f=n.sets.w+n.labels.w+n.cs.w,d=t.sets.bandWidth,m=hn("fill"+e.suffix,!s&&" pnone-"+r.id,r.classNames.bar);return ke.createElement("g",{transform:c,"data-upset":i?"sets-q":"sets-s"},t.sets.v.map((function(e,n){var c=t.sets.y(e),p=t.sets.keys[n];if(a&&!i)return ke.createElement("rect",{key:p,x:u,y:c,width:0,height:d,className:m,style:Ln(r.styles.bar,r.selectionColor?void 0:e.color)},s&&ke.createElement("title",null));var h=o(e);if(0===h)return null;var y=t.sets.x(h),v=s&&ke.createElement("title",null,e.name+" ∩ "+s+": "+h),g=i?ke.createElement("path",{key:p,transform:"translate("+y+", "+(c+d)+")",d:"M1,0 l0,"+-d+" l-2,0 l0,"+d+" L-"+t.triangleSize+","+t.triangleSize+" L"+t.triangleSize+","+t.triangleSize+" Z","data-i":n,"data-cardinality":h,className:m,style:Ln(void 0,r.selectionColor?void 0:e.color)},v):ke.createElement("rect",{key:p,"data-i":n,"data-cardinality":h,x:y,y:c,width:u-y,height:d,className:m,style:Ln(r.styles.bar,r.selectionColor?void 0:e.color)},v),x=jn(f),_=l.map((function(t){var n=x(t),o=t.render({set:e,width:t.size,height:d,theme:r.theme});return o?ke.createElement("g",{key:t.name,transform:"translate("+n+","+c+")"},o):null})).filter(Boolean);return 0===_.length?g:ke.createElement("g",{key:p},g,_)})))}var Bn=[],Dn=ke.memo((function(e){var t=e.size,n=e.data,r=e.style,o=e.onHover,i=e.secondary,a=e.queries,s=t.sets.addons.some((function(e){return null!=e.renderQuery}))||t.cs.addons.some((function(e){return null!=e.renderQuery})),l=Q((function(){return a.map((function(e){return sn({},e,{overlap:Le(e,"intersection",n.toElemKey),elemOverlap:s?Ie(e,"intersection",n.toElemKey):null})}))}),[a,s,n.toElemKey]);function c(e,t,n,r,o){return sn({},e,{render:function(i){var a=r(i.set);return e.renderQuery?e.renderQuery(sn({query:t,overlap:a,index:n,secondary:o},i)):null}})}return ke.createElement("g",{className:o&&!i?"pnone-"+r.id:void 0},ke.createElement("g",{transform:"translate("+t.sets.x+","+t.sets.y+")"},l.map((function(e,a){return ke.createElement(Un,{key:e.name,data:n,size:t,style:r,elemOverlap:e.overlap,suffix:"Q"+a+"-"+n.id,secondary:i||a>0,tooltip:o&&!(i||a>0)?void 0:e.name,setAddons:0===t.sets.addons.length?Bn:t.sets.addons.map((function(t,n){return c(t,e,n,e.elemOverlap,i||n>0)}))})}))),ke.createElement("g",{transform:"translate("+t.cs.x+","+t.cs.y+")"},l.map((function(e,a){return ke.createElement(Rn,{key:e.name,data:n,size:t,style:r,elemOverlap:e.overlap,suffix:"Q"+a+"-"+n.id,secondary:i||a>0,tooltip:o&&!(i||a>0)?void 0:e.name,combinationAddons:0===t.cs.addons.length?Bn:t.cs.addons.map((function(t,n){return c(t,e,n,e.elemOverlap,i||n>0)}))})}))))}));function Hn(e){var t=e.data,n=e.size,r=e.style,o=e.selection;return o&&"set"===o.type&&t.sets.keys.includes(t.toKey(o))?ke.createElement("rect",{y:t.sets.y(o),width:n.labels.w+n.cs.w+n.sets.after,height:t.sets.bandWidth,className:"selectionHint-"+r.id}):null}function Wn(e){var t=e.data,n=e.size,r=e.style,o=e.selection,i=t.sets.bandWidth/2,a=t.cs.cx,s=t.r,l=n.sets.h+n.sets.after,c=t.cs.bandWidth;if(!o||"set"===o.type||!t.cs)return null;var u=o,f=t.cs.keys.indexOf(t.toKey(u));return f<0?null:ke.createElement("g",{transform:"translate("+(n.labels.w+t.cs.x(u))+", 0)","data-upset":"cs-ss","data-i":f},ke.createElement("rect",{width:c,height:l,className:"selectionHint-"+r.id}),t.sets.v.filter((function(e){return t.cs.has(u,e)})).map((function(e){return ke.createElement(qn,{key:t.toKey(e),r:1.1*s,cx:a,cy:t.sets.y(e)+i,name:e.name,className:hn("fillSelection-"+r.id,"pnone-"+r.id,r.classNames.dot),style:Ln(r.styles.dot,r.selectionColor?void 0:u.color)})})),u.sets.size>1&&ke.createElement("line",{x1:a,y1:t.sets.y(t.sets.v.find((function(e){return t.cs.has(u,e)})))+i,x2:a,y2:t.sets.y(t.sets.rv.find((function(e){return t.cs.has(u,e)})))+i,className:"upsetSelectionLine-"+t.id,style:Ln(void 0,r.selectionColor?void 0:u.color,"stroke")}))}var Vn=[];function Kn(e){var t=e.size,n=e.data,r=e.style,o=e.selection,i=e.onHover,a=r.emptySelection,s=xn(o,n.toElemKey),l=_n(o),c=t.sets.addons.some((function(e){return null!=e.renderSelection}))||t.cs.addons.some((function(e){return null!=e.renderSelection})),u=o&&"function"!=typeof o&&c?function(e,t){var n=Ae(e,t);return function(e){return n(e.elems).intersection}}(Array.isArray(o)?o:o.elems,n.toElemKey):null;function f(e){return sn({},e,{render:function(t){var n=u?u(t.set):null;return e.renderSelection?e.renderSelection(sn({selection:o,selectionColor:r.selectionColor||t.set.color||"orange",overlap:n},t)):null}})}return ke.createElement("g",{className:i?"pnone-"+r.id:void 0},(o||a)&&ke.createElement(Rn,{data:n,size:t,style:r,transform:"translate("+t.cs.x+","+t.cs.y+")",empty:a&&!o,elemOverlap:s,suffix:"Selection-"+r.id,tooltip:i?void 0:l,combinationAddons:0===t.cs.addons.length?Vn:t.cs.addons.map(f)}),(o||a)&&ke.createElement(Un,{data:n,size:t,style:r,transform:"translate("+t.sets.x+","+t.sets.y+")",empty:a&&!o,elemOverlap:s,suffix:"Selection-"+r.id,tooltip:i?void 0:l,setAddons:0===t.sets.addons.length?Vn:t.sets.addons.map(f)}),ke.createElement("g",{transform:"translate("+t.labels.x+","+t.labels.y+")"},vn(o)&&ke.createElement(Hn,{data:n,size:t,style:r,selection:o}),vn(o)&&ke.createElement(Wn,{data:n,size:t,style:r,selection:o})))}function $n(e,t){return void 0===t&&(t="font-size"),e?t+": "+e+";":""}function Gn(e,t,n,r){var o=[];return t.hasSelectionColor&&o.push("fill: "+t.hasSelectionColor+";"),null!=t.hasSelectionOpacity&&t.hasSelectionOpacity>=0&&o.push("fill-opacity: "+t.hasSelectionOpacity+";"),{p:$n,root:"\n  .root-"+e+" {\n    "+$n(n,"font-family")+"\n  }\n  ",text:"\n  .titleTextStyle-"+e+" {\n    fill: "+t.textColor+";\n    "+$n(r.title)+"\n  }\n  .descTextStyle-"+e+" {\n    fill: "+t.textColor+";\n    "+$n(r.description)+"\n  }\n\n  .legendTextStyle-"+e+" {\n    fill: "+t.textColor+";\n    "+$n(r.legend)+"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n    pointer-events: none;\n  }\n  ",hasSFill:o.join(" "),hasSStroke:o.join(" ").replace("fill:","stroke:").replace("fill-","stroke-"),fill:"\n  .fillPrimary-"+e+" { fill: "+t.color+"; fill-opacity: "+t.opacity+"; }\n  "+(o.length>0?".root-"+e+"[data-selection] .fillPrimary-"+e+" { "+o.join(" ")+" }":"")+"\n  "+(t.selectionColor?".fillSelection-"+e+" { fill: "+t.selectionColor+"; }":"")+"\n  .fillTransparent-"+e+" { fill: transparent; }\n\n  .selectionHint-"+e+" {\n    fill: transparent;\n    pointer-events: none;\n    "+$n(t.selectionColor,"stroke")+"\n  }\n  .clickAble-"+e+" {\n    cursor: pointer;\n  }\n\n  .startText-"+e+" {\n    text-anchor: start;\n  }\n  .endText-"+e+" {\n    text-anchor: end;\n  }\n  .pnone-"+e+" {\n    pointer-events: none;\n  }",export:"\n  .exportTextStyle-"+e+" {\n    fill: "+t.textColor+";\n    "+$n(r.exportLabel)+"\n  }\n  .exportButtons-"+e+" {\n    text-anchor: middle;\n  }\n  .exportButton-"+e+" {\n    cursor: pointer;\n    opacity: 0.5;\n  }\n  .exportButton-"+e+":hover {\n    opacity: 1;\n  }\n  .exportButton-"+e+" > rect {\n    fill: none;\n    stroke: "+t.textColor+";\n  }\n  "}}var Qn=se((function(e,t){var n,r=tn(e),o=r.selection,i=void 0===o?null:o,a=r.onClick,s=r.queries,l=void 0===s?[]:s,c=r.fontSizes,u=Q((function(){return r.id?r.id:yn()}),[r.id,r.fontFamily,c.axisTick,c.barLabel,c.chartLabel,c.legend,c.setLabel,c.title,c.exportLabel,c.description,r.textColor,r.hoverHintColor,r.color,r.hasSelectionColor,r.selectionColor,r.notMemberColor,r.alternatingBackgroundColor,r.opacity,r.hasSelectionOpacity]),f=Q((function(){return function(e,t,n,r,o,i,a,s,l,c,u,f,d){return{theme:e,styles:t,classNames:n,cs:{name:r,offset:o},sets:{name:i,offset:a},emptySelection:u,id:s,barLabelOffset:l,selectionColor:c,title:f,description:d}}(r.theme,r.styles,r.classNames,r.combinationName,r.combinationNameAxisOffset,r.setName,r.setNameAxisOffset,u,r.barLabelOffset,r.selectionColor,r.emptySelection,r.title,r.description)}),[r.theme,r.styles,r.classNames,r.barLabelOffset,r.combinationName,r.combinationNameAxisOffset,r.setName,r.setNameAxisOffset,u,r.selectionColor,r.emptySelection,r.title,r.description]),d=Q((function(){return function(e,t,n,r,o,i,a,s,l){var c=a.reduce((function(e,t){return e+("before"===t.position?t.size:0)}),0),u=a.reduce((function(e,t){return e+("before"!==t.position?t.size:0)}),0),f=s.reduce((function(e,t){return e+("before"===t.position?t.size:0)}),0),d=s.reduce((function(e,t){return e+("before"!==t.position?t.size:0)}),0),m=t-2*n-20-d-f,p=e-2*n-c-u,h=p*o[0],y=p*o[1],v=m*i[0];return{id:l||yn(),cs:{before:f,after:d,x:c+h+y,y:f,w:p-h-y,h:v,addons:s},labels:{x:c+h,y:f+v,w:y,h:m-v},sets:{before:c,after:u,x:c,y:f+v,w:h,h:m-v,addons:a},padding:r,legend:{x:e/2},margin:n,w:e,h:t}}(r.width,r.height,r.padding,r.barPadding,r.widthRatios,r.heightRatios,r.setAddons,r.combinationAddons,r.id)}),[r.width,r.height,r.padding,r.barPadding,r.widthRatios,r.heightRatios,r.setAddons,r.combinationAddons,r.id]),m=Q((function(){var e,t;return function(e,t,n,r,o,i,a,s,l,c,u,f){var d,m="linear"===(d=r)?pt:"log"===d?xt:d,p=function(e){return"band"===e?at:e}(o),h=wn(t)?t:nt(e,Object.assign({toElemKey:u},t)),y=p(h.map(c),n.cs.w,n.padding),v=h.reduce((function(e,t){return Math.max(e,t.cardinality)}),0),g=m(v,[n.cs.h,i],{orientation:"vertical",fontSizeHint:l}),x=function(e){return Math.floor(i/1.4*.7*g.tickFormat()(e).length)},_=e.reduce((function(e,t){return Math.max(e,t.cardinality)}),0),b=x(_),w=x(v),S=m(_,[n.sets.w,b],{orientation:"horizontal",fontSizeHint:l}),E=e.map(c),k=p(E.slice().reverse(),n.sets.h,n.padding),M=Math.min(k.bandwidth(),y.bandwidth())/2*a,C=Math.max(2,Math.min(k.bandwidth(),y.bandwidth())/2*s);return{id:f||yn(),r:M,triangleSize:C,sets:{v:e,keys:E,rv:e.slice().reverse(),x:S,xAxisWidth:n.sets.w-b,y:function(e){return k(c(e))},bandWidth:k.bandwidth(),cy:k.bandwidth()/2+n.cs.h,format:S.tickFormat(),labelOffset:i+9+2},cs:{v:h,keys:h.map(c),x:function(e){return y(c(e))},y:g,yAxisWidth:n.cs.h-i,cx:y.bandwidth()/2,bandWidth:y.bandwidth(),format:g.tickFormat(),has:function(e,t){var n=c(t);return Array.from(e.sets).some((function(e){return c(e)===n}))},labelOffset:w+9+6},toKey:c,toElemKey:u}}(r.sets,r.combinations,d,r.numericScale,r.bandScale,r.barLabelOffset+Number.parseInt(null!==(e=c.barLabel)&&void 0!==e?e:"10"),r.dotPadding,r.barPadding,Number.parseInt(null!==(t=c.axisTick)&&void 0!==t?t:"10"),r.toKey,r.toElemKey,r.id)}),[r.sets,r.combinations,d,r.numericScale,r.bandScale,r.barLabelOffset,c.barLabel,r.dotPadding,r.barPadding,c.axisTick,r.toKey,r.toElemKey,r.id]),p=Gn(u,r,r.fontFamily,c),h="\n  "+p.root+"\n  "+p.text+"\n\n  .axisTextStyle-"+u+" {\n    fill: "+r.textColor+";\n    "+p.p(c.axisTick)+"\n    text-anchor: middle;\n  }\n  .barTextStyle-"+u+" {\n    fill: "+r.textColor+";\n    "+p.p(c.barLabel)+"\n  }\n  .cBarTextStyle-"+u+" {\n    fill: "+r.textColor+";\n    "+p.p(c.barLabel)+"\n    text-anchor: middle;\n  }\n  .sBarTextStyle-"+u+" {\n    fill: "+r.textColor+";\n    "+p.p(c.barLabel)+"\n    text-anchor: end;\n    dominant-baseline: central;\n  }\n  .hoverBarTextStyle-"+u+" {\n    "+p.p(c.barLabel)+"\n    fill: "+r.hoverHintColor+";\n    display: none;\n    text-anchor: middle;\n  }\n  .setTextStyle-"+u+" {\n    fill: "+r.textColor+";\n    "+p.p(c.setLabel)+"\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-"+u+" {\n    fill: "+r.textColor+";\n    "+p.p(c.chartLabel)+"\n    text-anchor: middle;\n  }\n  .sChartTextStyle-"+u+" {\n    fill: "+r.textColor+";\n    "+p.p(c.chartLabel)+"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n  }\n\n  "+p.fill+"\n  .fillNotMember-"+u+" { fill: "+r.notMemberColor+"; }\n  .fillAlternating-"+u+" { fill: "+(r.alternatingBackgroundColor||"transparent")+"; }\n\n  .axisLine-"+u+" {\n    fill: none;\n    stroke: "+r.textColor+";\n  }\n  .hoverBar-"+u+" {\n    fill: transparent;\n  }\n\n  .interactive-"+u+":hover > .hoverBar-"+u+" {\n    stroke: "+r.hoverHintColor+";\n  }\n  .interactive-"+u+":hover > .hoverBarTextStyle-"+u+" {\n    display: unset;\n  }\n\n  "+p.export+"\n\n  .upsetLine-"+m.id+" {\n    stroke-linecap: round;\n    stroke-width: "+.6*m.r+";\n    stroke: "+r.color+";\n    stroke-opacity: "+r.opacity+";\n  }\n  "+(p.hasSStroke?".root-"+u+"[data-selection] .upsetLine-"+m.id+" { "+p.hasSStroke+" }":"")+"\n\n  .upsetSelectionLine-"+m.id+" {\n    stroke-width: "+.6*m.r*1.1+";\n    "+p.p(r.selectionColor,"stroke")+"\n    pointer-events: none;\n  }\n\n  "+l.map((function(e,t){return".fillQ"+t+"-"+m.id+" {\n    fill: "+e.color+";\n  }"})).join("\n")+"\n  ",y=J((function(t){var n=t.currentTarget.closest("svg"),r=t.currentTarget.dataset.type||"png";switch(r){case"vega":!function(e,t){var n=function(e,t){var n,r,o,i,a,s=null!==(n=e.getComputedStyle||(null===(r=e.ownerDocument)||void 0===r||null===(o=r.defaultView)||void 0===o?void 0:o.getComputedStyle))&&void 0!==n?n:window.getComputedStyle,l=Nt(e),c=null!=t?t:Ot(e,l),u=Array.from(e.querySelectorAll("[data-upset=sets] [data-cardinality]")).map((function(e){return{name:e.querySelector("text.setTextStyle-"+l).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10)}})).reverse(),f=-Number.parseFloat(e.querySelector(".sBarTextStyle-"+l).getAttribute("dx")),d=s(e.querySelector(".fillPrimary-"+l)).fill,m=s(e.querySelector(".fillNotMember-"+l)).fill,p=s(e.querySelector("text")).fill,h=e.querySelector(".cChartTextStyle-"+l).textContent,y=e.querySelector(".sChartTextStyle-"+l).textContent,v=Array.from(e.querySelectorAll("[data-upset=cs] [data-cardinality]")).map((function(e){return{name:e.querySelector("text.hoverBarTextStyle-"+l).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10),sets:Array.from(e.querySelectorAll(".fillPrimary-"+l+" > title")).map((function(e){return e.textContent}))}})),g=function(e){return Number.parseFloat(e.getAttribute("transform").match(/([\d.]+),/)[1])},x=e.querySelector("[data-upset=base]"),_=g(x),b=g(e.querySelector("[data-upset=csaxis]")),w=Number.parseFloat(x.querySelector("g").firstElementChild.children[1].getAttribute("x2")),S=function(e){return Number.parseFloat(e.getAttribute("transform").match(/,([\d.]+)/)[1])}(e.querySelector("[data-upset=setaxis]")),E=Number.parseFloat(e.querySelector("defs rect").getAttribute("width")),k=Number.parseFloat(e.querySelector("defs rect").getAttribute("height")),M=Number.parseFloat(e.querySelector("[data-cardinality] circle.fillPrimary-"+l).getAttribute("r")),C=null!=e.querySelector("[data-upset=sets-s] [data-cardinality]"),A=null!=e.querySelector("[data-upset=sets-q] [data-cardinality]"),N=C||A,O="orange";N&&(Array.from(e.querySelectorAll("[data-upset=sets-"+(C?"s]":"q]:first-of-type")+" [data-cardinality]")).forEach((function(e){var t=u.length-Number.parseInt(e.dataset.i,10)-1;u[t].selection=Number.parseInt(e.dataset.cardinality,10)})),Array.from(e.querySelectorAll("[data-upset=cs-"+(C?"s]":"q]:first-of-type")+" [data-cardinality]")).forEach((function(e){var t=Number.parseInt(e.dataset.i,10);v[t].selection=Number.parseInt(e.dataset.cardinality,10)})),O=s(e.querySelector("[data-upset=sets-"+(C?"s":"q")+"] [data-cardinality]")).fill);var z=Number.parseInt(null!==(i=null===(a=e.querySelector("[data-upset=cs-ss]"))||void 0===a?void 0:a.dataset.i)&&void 0!==i?i:"-1",10),j=z>=0?{field:"partOf",oneOf:[1,2]}:{field:"partOf",equal:1};return{$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:c,description:zt(e,l),datasets:{sets:u,combinations:v.map((function(e,t){return Object.assign({},e,{partOf:z===t?2:1,nsets:[""]})})).concat(v.map((function(e){return{name:e.name,cardinality:e.cardinality,partOf:0,sets:[""],nsets:u.filter((function(t){return!e.sets.includes(t.name)})).map((function(e){return e.name}))}})))},vconcat:[{hconcat:[{mark:"bar",width:b+E-40,height:S},{width:w,height:S,data:{name:"combinations"},transform:[{filter:j}],layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"center",baseline:"bottom",dy:-f},encoding:{text:{field:"cardinality",type:"quantitative"}}},N&&{mark:{type:"bar",fill:O,tooltip:!0},encoding:{y:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null},y:{field:"cardinality",type:"quantitative",axis:{grid:!1},title:h}}}]},{hconcat:[{width:b,height:k,data:{name:"sets"},layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"right",baseline:"middle",dx:-f},encoding:{text:{field:"cardinality",type:"quantitative"}}},N&&{mark:{type:"bar",fill:O,tooltip:!0},encoding:{x:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},x:{field:"cardinality",type:"quantitative",title:y,sort:"descending",axis:{grid:!1}}}},{data:{name:"sets"},width:E,height:k,mark:{type:"text",align:"center",baseline:"middle",fontSize:Number.parseInt(s(e.querySelector(".setTextStyle-"+l)).fontSize,10)},encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},text:{field:"name",type:"ordinal"}}},{width:w,height:k,data:{name:"combinations"},transform:[{flatten:["sets"],as:["has_set"]},{flatten:["nsets"],as:["has_not_set"]},{calculate:"datum.has_set+datum.has_not_set",as:"set"}],layer:[{mark:{type:"circle",size:M*M*Math.PI,tooltip:!0},encoding:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[m,d].concat(z>=0?[O]:[])}},y:{field:"set",type:"ordinal",axis:null,sort:null,scale:{domain:u.map((function(e){return e.name}))}}}},{mark:"rule",transform:[{filter:j},{calculate:"datum.sets[datum.sets.length -1]",as:"set_end"}],encoding:sn({y:{field:"sets[0]",type:"ordinal",axis:null,sort:null},y2:{field:"set_end"}},z<0?{}:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[d,O]}}})}],encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null}}}]}],config:{padding:_,background:Xt(e.dataset.theme).backgroundColor,concat:{spacing:0},view:{stroke:null},bar:{fill:d},circle:{opacity:1},rule:{stroke:d,strokeWidth:Number.parseInt(s(e.querySelector("[data-upset=cs] [data-cardinality] line")).strokeWidth,10)},axis:{labelColor:p,labelFontSize:Number.parseInt(s(e.querySelector(".axisTextStyle-"+l)).fontSize,10),titleColor:p,titleFontSize:Number.parseInt(s(e.querySelector(".cChartTextStyle-"+l)).fontSize,10)},title:{color:p},text:{fill:p,fontSize:Number.parseInt(s(e.querySelector(".sBarTextStyle-"+l)).fontSize,10)}}}}(e,{}.title),r=URL.createObjectURL(new Blob([JSON.stringify(n,null,2)],{type:"application/json"}));an(r,n.title+".json",e.ownerDocument),URL.revokeObjectURL(r)}(n);break;case"dump":mn(n,e,m);break;case"share":pn(e,m);break;case"svg":case"png":on(n,{type:r,toRemove:"."+t.currentTarget.getAttribute("class")})}}),[m,e]),v=_n(i),g=J((function(e){return a?a(null,e.nativeEvent):null}),[a]);return ke.createElement("svg",{id:r.id,className:hn("root-"+u,r.className),style:r.style,width:r.width,height:r.height,ref:t,viewBox:"0 0 "+r.width+" "+r.height,"data-theme":null!==(n=r.theme)&&void 0!==n?n:"light","data-selection":v||void 0},ke.createElement("style",null,h),ke.createElement("defs",null,ke.createElement("clipPath",{id:"clip-"+d.id},ke.createElement("rect",{x:d.sets.w,y:0,width:d.labels.w,height:d.sets.h}))),r.queryLegend&&ke.createElement(En,{queries:l,x:d.legend.x,style:f,data:m}),ke.createElement(Sn,{transform:"translate("+(d.w-2)+","+(d.h-3)+")",styleId:u,exportButtons:r.exportButtons,exportChart:y}),ke.createElement("g",{transform:"translate("+r.padding+","+r.padding+")","data-upset":"base"},r.onClick&&ke.createElement("rect",{width:d.cs.x,height:d.sets.y,onClick:g,className:"fillTransparent-"+u}),ke.createElement(In,{size:d,style:f,data:m}),ke.createElement(Fn,{size:d,style:f,data:m,onClick:r.onClick,onHover:r.onHover,onContextMenu:r.onContextMenu,setChildrenFactory:r.setChildrenFactory,combinationChildrenFactory:r.combinationChildrenFactory}),ke.createElement(Kn,{size:d,style:f,data:m,onHover:r.onHover,selection:i}),ke.createElement(Dn,{size:d,style:f,data:m,onHover:r.onHover,queries:l,secondary:null!=r.onHover||null!=i})),e.children)}));function Jn(e){var t=e.id,n=e.suffix,r=e.v,o=e.rotate,i=void 0===o?0:o,a=e.bgFill,s=e.styleId,l=e.fill;if(r>=1||r<=0)return null;var c=Math.round(10*r)/100;return ke.createElement("defs",null,ke.createElement("pattern",{id:t,width:"1",height:"0.1",patternContentUnits:"objectBoundingBox",patternTransform:"rotate("+i+")"},a&&ke.createElement("rect",{x:"0",y:"0",width:"1",height:"0.1",style:{fill:a},className:"fillPrimary-"+s}),ke.createElement("rect",{x:"0",y:"0",width:"1",height:c,className:"fill"+n,style:l?{fill:l}:void 0})))}function Yn(e){var t=e.slice,n=e.d,r=e.i,o=e.data,i=e.style,a=e.elemOverlap,s=e.selected,l=e.selectionName,c=e.onClick,u=e.onMouseEnter,f=e.onMouseLeave,d=e.onContextMenu,m=e.queries,p=e.size,h=e.qs,y=function(e,t){return void 0===t&&(t=0),e.path?e.path:"M "+(e.x1-t)+","+(e.y1-t)+" "+e.arcs.map((function(e){return"A "+(e.rx-t)+" "+(e.ry-t)+" "+e.rotation+" "+(e.largeArcFlag?1:0)+" "+(e.sweepFlag?1:0)+" "+(e.x2-t)+" "+(e.y2-t)})).join(" ")}(t),v=function(e,t){return e.text.x===t.cx?0:e.text.x>t.cx?e.text.y<=t.cy?60:-60:e.text.y<=t.cy?-60:60}(t,p.area),g=a?a(n):0,x=g===n.cardinality&&n.cardinality>0||s,_=hn("arc-"+i.id,0===g&&!s&&"arcP-"+i.id,x&&"fillSelection-"+i.id,i.classNames.set),b="upset-"+i.id+"-"+r,w=null!=a||null!=f,S=h.map((function(e){return e(n)})),E=function(e,t,n,r,o,i,a,s){var l=a.format(e.cardinality),c=n?e.name+" ∩ "+n:e.name,u=n?a.format(t)+"/"+l:l;if(0===o.length)return{tooltip:c+": "+u,title:"set"===e.type?ke.createElement(ke.Fragment,null,ke.createElement("tspan",{dy:"-0.6em"},e.name),ke.createElement("tspan",{x:s,dy:"1.2em"},u)):u};if(1===o.length&&!r&&!n)return{tooltip:e.name+" ∩ "+i[0].name+": "+a.format(o[0])+"/"+l,title:"set"===e.type?ke.createElement(ke.Fragment,null,ke.createElement("tspan",{dy:"-0.6em"},e.name),ke.createElement("tspan",{x:s,dy:"1.2em"},a.format(o[0])+"/"+l)):a.format(o[0])+"/"+l};var f=ke.createElement("tspan",{x:s,dy:"1.2em"},i.map((function(e,t){return ke.createElement(ke.Fragment,{key:e.name},ke.createElement("tspan",{className:"fillQ"+t+"-"+a.id},"⬤"),ke.createElement("tspan",null," "+a.format(o[t])+"/"+l+(t<i.length-1?" ":"")))})));return{tooltip:c+": "+u+"\n"+i.map((function(t,n){return e.name+" ∩ "+t.name+": "+a.format(o[n])+"/"+l})).join("\n"),title:"set"===e.type?ke.createElement(ke.Fragment,null,ke.createElement("tspan",{dy:"-1.2em"},e.name),ke.createElement("tspan",{x:s,dy:"1.2em"},u),f):ke.createElement(ke.Fragment,null,ke.createElement("tspan",{dy:"-0.6em"},u),f)}}(n,g,l,w,S,m,o,t.text.x),k=E.title,M=E.tooltip;return ke.createElement("g",null,ke.createElement(Jn,{id:b,v:0===g?0:g/n.cardinality,suffix:"Selection-"+i.id,rotate:v,bgFill:n.color,fill:i.selectionColor?void 0:n.color,styleId:i.id}),ke.createElement("path",{onMouseEnter:u(n),onMouseLeave:f,onClick:c(n),onContextMenu:d(n),d:y,className:_,style:Ln(i.styles.set,g>0&&g<n.cardinality?"url(#"+b+")":x&&i.selectionColor?void 0:n.color)},ke.createElement("title",null,M)),ke.createElement("text",{x:t.text.x,y:t.text.y,className:hn(("set"===n.type?"set":"value")+"TextStyle-"+i.id,"pnone-"+i.id)},k))}var Zn={__proto__:null,widthRatios:function(e){return null==e||Array.isArray(e)&&3===e.length&&e.every((function(e){return"number"==typeof e}))},heightRatios:function(e){return null==e||Array.isArray(e)&&2===e.length&&e.every((function(e){return"number"==typeof e}))},sets:function(e){return Array.isArray(e)&&e.every(Pe)},combinations:function(e){return null==e||Array.isArray(e)&&e.every(Te)||Re(e)},selection:function(e){return null==e||Array.isArray(e)||Fe(e)},onHover:function(e){return null==e||"function"==typeof e},onClick:function(e){return null==e||"function"==typeof e},queries:function(e){return!e||Array.isArray(e)&&e.every(Ue)},stringOrFalse:function(e){return null==e||"string"==typeof e||!1===e},theme:function(e){return null==e||"light"===e||"dark"===e||"vega"===e},classNames:function(e){return null==e||Object.keys(e).every((function(t){return $t.includes(t)&&"string"==typeof e[t]}))},fontSizes:function(e){return null==e||Object.keys(e).every((function(t){return Kt.includes(t)&&"string"==typeof e[t]}))},numericScale:function(e){return null==e||"linear"===e||"log"===e||"function"==typeof e},bandScale:function(e){return null==e||"band"===e||"function"==typeof e},axisOffset:function(e){return null==e||"auto"===e||"number"==typeof e},style:function(e){return null==e||"object"==typeof e},styles:function(e){return null==e||Object.keys(e).every((function(e){return $t.includes(e)}))},exportButtons:function(e){return null==e||"boolean"==typeof e||Object.keys(e).every((function(t){return Gt.includes(t)&&"boolean"==typeof e[t]}))}},Xn=se((function(e,t){var n,r=nn(e),o=r.selection,i=void 0===o?null:o,a=r.queries,s=void 0===a?[]:a,l=r.fontSizes,c=Q((function(){return r.id?r.id:yn()}),[r.id,r.fontFamily,l.valueLabel,l.legend,l.setLabel,l.title,l.exportLabel,l.description,r.textColor,r.color,r.hasSelectionColor,r.strokeColor,r.valueTextColor,r.selectionColor,r.opacity,r.hasSelectionOpacity]),u=Q((function(){return function(e,t,n,r,o,i,a){return{theme:e,styles:t,classNames:n,id:r,selectionColor:o,title:i,description:a}}(r.theme,r.styles,r.classNames,c,r.selectionColor,r.title,r.description)}),[r.theme,r.styles,r.classNames,c,r.selectionColor,r.title,r.description]),f=Q((function(){return function(e,t,n,r){var o=t-2*n,i=e-2*n,a=Math.min(i,o)/2;return{id:r||yn(),legend:{x:e/2},area:{w:i,h:o,cx:i/2,cy:o/2,r:a},margin:n,w:e,h:t}}(r.width,r.height,r.padding,r.id)}),[r.width,r.height,r.padding,r.id]),d=Q((function(){return function(e,t,n,r,o,i,a,s){var l=e.length>r.maxSets?e.slice(0,r.maxSets):e,c=l.map(i),u=[];if(wn(t)){var f=new Map(t.map((function(e){return[Array.from(e.sets).map(i).sort().join("#"),e]}))),d=l.map((function(e){return{type:"set",cardinality:0,elems:[],name:e.name,s:e}}));u=nt(d,{type:"distinctIntersection",min:1,empty:!0,order:["degree:asc","group:asc"]}).map((function(e){var t=Array.from(e.sets).map((function(e){return i(e.s)})).sort().join("#");return f.has(t)?f.get(t):{name:e.name,cardinality:0,degree:e.degree,elems:[],sets:new Set(Array.from(e.sets).map((function(e){return e.s}))),type:"distinctIntersection"}}))}else u=nt(l,Object.assign({},null!=t?t:{},{type:"distinctIntersection",min:1,empty:!0,order:["degree:asc","group:asc"]}));var m=u.map(i),p=r.compute(l,u,n.area.w,n.area.h);return{id:s||yn(),sets:{d:p.sets.map((function(e,t){return{v:l[t],l:e,key:c[t]}})),v:l,format:o},format:o,cs:{d:p.intersections.map((function(e,t){return{v:u[t],l:e,key:m[t]}})),v:u,has:function(e,t){var n=i(t);return Array.from(e.sets).some((function(e){return i(e)===n}))}},toKey:i,toElemKey:a}}(r.sets,r.combinations,f,r.layout,r.valueFormat,r.toKey,r.toElemKey,r.id)}),[r.sets,r.combinations,f,r.valueFormat,r.toKey,r.toElemKey,r.id,r.layout]),m=Gn(c,r,r.fontFamily,l),p="\n  "+m.root+"\n  "+m.text+"\n\n  .valueTextStyle-"+c+" {\n    fill: "+r.valueTextColor+";\n    "+m.p(l.valueLabel)+"\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .setTextStyle-"+c+" {\n    fill: "+r.textColor+";\n    "+m.p(l.setLabel)+"\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n\n  .stroke-circle-"+c+" {\n    fill: none;\n    stroke: "+r.strokeColor+";\n  }\n\n  .arc-"+c+" {\n    fill-rule: evenodd;\n  }\n  .arcP-"+c+" {\n    fill: transparent;\n    fill-opacity: "+r.opacity+";\n  }\n  "+m.fill+"\n  "+m.export+"\n\n  "+(m.hasSFill?".root-"+c+"[data-selection] .arcP-"+c+" { "+m.hasSFill+" }":"")+"\n\n  "+s.map((function(e,t){return".fillQ"+t+"-"+d.id+" {\n    fill: "+e.color+";\n  }"})).join("\n")+"\n  ",h=J((function(t){var n=t.currentTarget.closest("svg"),r=t.currentTarget.dataset.type||"png";switch(r){case"dump":mn(n,e,d);break;case"share":pn(e,d);break;case"svg":case"png":on(n,{type:r,toRemove:"."+t.currentTarget.getAttribute("class")})}}),[d,e]),y=ke.useMemo((function(){return[zn(r.onClick),zn(r.onHover),zn(r.onContextMenu),r.onHover?function(e){return r.onHover(null,e.nativeEvent)}:void 0]}),[r.onClick,r.onHover,r.onContextMenu]),v=y[0],g=y[1],x=y[2],_=y[3],b=null!=i&&vn(i)?d.toKey(i):null,w=null==i?null:xn(i,r.toElemKey),S=_n(i),E=ke.useMemo((function(){return s.map((function(e){return Le(e,"intersection",r.toElemKey)}))}),[s,r.toElemKey]),k=Q((function(){return!!r.exportButtons&&Object.assign({},!0===r.exportButtons?{}:r.exportButtons,{vega:!1})}),[r.exportButtons]);return ke.createElement("svg",{id:r.id,className:hn("root-"+c,r.className),style:r.style,width:r.width,height:r.height,ref:t,viewBox:"0 0 "+r.width+" "+r.height,"data-theme":null!==(n=r.theme)&&void 0!==n?n:"light","data-selection":S||void 0},ke.createElement("style",null,p),r.queryLegend&&ke.createElement(En,{queries:s,x:f.legend.x,style:u,data:d}),ke.createElement(Sn,{transform:"translate("+(f.w-2)+","+(f.h-3)+")",styleId:c,exportButtons:k,exportChart:h}),ke.createElement("g",{transform:"translate("+r.padding+","+r.padding+")","data-upset":"base"},ke.createElement(Nn,{style:u,width:f.area.w}),ke.createElement("g",{className:hn(r.onClick&&"clickAble-"+u.id)},d.sets.d.map((function(e,t){return ke.createElement("text",{key:e.key,x:e.l.text.x,y:e.l.text.y,onClick:v(d.sets.v[t]),onMouseEnter:g(d.sets.v[t]),onMouseLeave:_,onContextMenu:x(d.sets.v[t]),className:hn("setTextStyle-"+u.id,e.l.angle>200&&"endText-"+u.id,e.l.angle<200&&"startText-"+u.id)},d.sets.v[t].name)}))),ke.createElement("g",{className:hn(r.onClick&&"clickAble-"+u.id)},d.cs.d.map((function(e,t){return ke.createElement(Yn,{key:e.key,d:e.v,i:t,slice:e.l,size:f,style:u,data:d,onClick:v,onMouseEnter:g,onMouseLeave:_,onContextMenu:x,selectionName:S,selected:b===e.key||Pe(i)&&d.cs.has(e.v,i),elemOverlap:w,queries:s,qs:E})}))),ke.createElement("g",null,d.sets.d.map((function(e){return ke.createElement("circle",{key:e.key,cx:e.l.cx,cy:e.l.cy,r:e.l.r,className:hn("stroke-circle-"+u.id,u.classNames.set),style:u.styles.set})})))),e.children)}));function er(e,t,n){var r=t-1,o=function(t){var o=t*r,i=Math.floor(o),a=o-i,s=e[i];return 0===a?s:n(s,e[Math.min(i+1,r)],a)};return{q1:o(.25),median:o(.5),q3:o(.75)}}function tr(e,t){return void 0===t&&(t=e.length),er(e,t,(function(e,t,n){return e+n*(t-e)}))}function nr(e,t){void 0===t&&(t=e.length);var n=t,r=Math.floor((n+3)/2)/2,o=function(t){return.5*(e[Math.floor(t)-1]+e[Math.ceil(t)-1])};return{q1:o(r),median:o((n+1)/2),q3:o(n+1-r)}}var rr={hinges:nr,fivenum:nr,type7:tr,quantiles:tr,linear:function(e,t){return void 0===t&&(t=e.length),er(e,t,(function(e,t,n){return e+(t-e)*n}))},lower:function(e,t){return void 0===t&&(t=e.length),er(e,t,(function(e){return e}))},higher:function(e,t){return void 0===t&&(t=e.length),er(e,t,(function(e,t){return t}))},nearest:function(e,t){return void 0===t&&(t=e.length),er(e,t,(function(e,t,n){return n<.5?e:t}))},midpoint:function(e,t){return void 0===t&&(t=e.length),er(e,t,(function(e,t){return.5*(e+t)}))}};function or(e){return"function"==typeof e?e:rr[e]||tr}function ir(e){var t=e[1]-e[0];return function(n){return n*t+e[0]}}function ar(e){var t=e[1]-e[0];return function(n){return(n-e[0])/t}}function sr(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}function lr(e){return Math.round(100*e)/100}var cr=ke.memo((function(e){var t=e.theme,n=void 0===t?"light":t,r=e.mode,o=void 0===r?"normal":r,i=e.orient,a=void 0===i?"horizontal":i,s=e.width,l=e.height,c=e.min,u=e.max,f=e.boxStyle,d=e.lineStyle,m=e.outlierStyle,p=e.margin,h=void 0===p?0:p,y=e.boxPadding,v=void 0===y?.1:y,g=e.outlierRadius,x=void 0===g?3:g,_=e.numberFormat,b=void 0===_?function(e){return e.toFixed(2)}:_,w=function(e,t){void 0===t&&(t={});for(var n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=0,i=0,a=e.length,s=function(e){var t,n;return void 0===e&&(e={}),{coef:null!==(t=e.coef)&&void 0!==t?t:1.5,quantiles:or(null!==(n=e.quantiles)&&void 0!==n?n:"type7")}}(t),l=s.quantiles,c=s.coef,u=new Float32Array(a),f=0;f<a;++f){var d=e[f];null==d||Number.isNaN(d)||(u[i]=d,i++,d<n&&(n=d),d>r&&(r=d),o+=d)}var m=a-i;if(0===i)return{min:NaN,max:NaN,mean:NaN,missing:m,count:a,whiskerHigh:NaN,whiskerLow:NaN,outlier:[],median:NaN,q1:NaN,q3:NaN};for(var p=u.subarray(0,i).sort((function(e,t){return e===t?0:e<t?-1:1})),h=l(p,i),y=h.median,v=h.q1,g=h.q3,x=g-v,_="number"==typeof c&&c>0,b=_?Math.max(n,v-c*x):n,w=_?Math.min(r,g+c*x):r,S=[],E=b,k=0;k<i;++k){var M=p[k];if(b<M){E=M;break}0!==S.length&&S[S.length-1]===M||S.push(M)}for(var C=w,A=[],N=i-1;N>=0;--N){var O=p[N];if(O<w){C=O;break}0!==A.length&&A[A.length-1]===O||0!==S.length&&S[S.length-1]===O||A.push(O)}return{min:n,max:r,count:a,missing:m,mean:o/i,whiskerHigh:C,whiskerLow:E,outlier:S.concat(A.reverse()),median:y,q1:v,q3:g}}(e.values,sr(e,["theme","mode","values","orient","width","height","min","max","boxStyle","lineStyle","outlierStyle","margin","boxPadding","outlierRadius","numberFormat"]));if(Number.isNaN(w.median))return ke.createElement("g",null);var S="horizontal"===a,E=ar([c,u]),k=ir([0,S?s:l]),M=function(e){return lr(k(E(e)))},C={max:M(w.max),avg:M(w.mean),med:M(w.median),min:M(w.min),q1:M(w.q1),q3:M(w.q3),wh:M(w.whiskerHigh),wl:M(w.whiskerLow)},A=ke.createElement("title",null,"Min: "+b(w.min)+", 25% Quantile: "+b(w.q1)+", Median: "+b(w.median)+", 75% Quantile: "+b(w.q3)+", Max: "+b(w.max)),N=Xt(n).notMemberColor,O={box:Object.assign({fill:N},f),line:Object.assign({fill:"none",stroke:"light"===n?"black":"#cccccc"},d),outlier:Object.assign({fill:N},m)};if(S){var z=l/2,j=lr(l*v)+h,L=l-j,I=ke.createElement("path",{d:"M"+C.wl+","+h+" l0,"+(l-2*h)+" M"+C.wl+","+z+" L"+C.q1+","+z+" M"+C.q3+","+z+" L"+C.wh+","+z+" M"+C.wh+","+h+" L"+C.wh+","+(l-h)+" M"+C.q1+","+j+" L"+C.q3+","+j+" L"+C.q3+","+L+" L"+C.q1+","+L+" L"+C.q1+","+j+" M"+C.med+","+j+" l0,"+(L-j),style:O.line});return"indicator"===o?I:ke.createElement("g",null,A,"normal"===o&&ke.createElement("rect",{x:C.q1,y:j,width:C.q3-C.q1,height:l-2*j,style:O.box}),I,";",w.outlier.map((function(e){return ke.createElement("circle",{key:e,r:x,cy:z,cx:M(e),style:O.outlier},ke.createElement("title",null,"$",b(e)))})))}var q=s/2,P=lr(s*v)+h,T=s-P,F=ke.createElement("path",{d:"M"+h+","+C.wl+" l"+(s-2*h)+",0 M"+q+","+C.wl+" L"+q+","+C.q1+" M"+q+","+C.q3+" L"+q+","+C.wh+" M"+h+","+C.wh+" L"+(s-h)+","+C.wh+" M"+P+","+C.q1+" L"+P+","+C.q3+" l"+(T-P)+",0 L"+T+","+C.q1+" L"+P+","+C.q1+" M"+P+","+C.med+" l"+(T-P)+",0",style:O.line});return"indicator"===o?F:ke.createElement("g",null,A,"normal"===o&&ke.createElement("rect",{y:C.q1,x:P,height:C.q3-C.q1,width:s-2*P,style:O.box}),F,w.outlier.map((function(e){return ke.createElement("circle",{key:e,r:x,cx:q,cy:M(e),style:O.outlier},ke.createElement("title",null,"$",b(e)))})))}));function ur(e,t){var n=new Map(e.map((function(e){return[e.value,0]})));return t.forEach((function(e){if(null!=e){var t=e.toString();n.has(t)&&n.set(t,n.get(t)+1)}})),n}var fr=ke.memo((function(e){var t,n=e.theme,r=e.orient,o=void 0===r?"horizontal":r,i=e.width,a=e.height,s=e.values,l=e.base,c=e.margin,u=void 0===c?0:c,f=e.rectStyle,d=void 0===f?{}:f,m=function(e,t,n,r){var o=function(e){var t=["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],n=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],r="dark"===e?t.concat(n):n.concat(t),o=0;return function(){return r[o++%r.length]}}(r),i=t.map((function(e){return Object.assign({count:0,acc:0},{value:t="string"==typeof e?e:e.value,label:t.length>0?""+t[0].toUpperCase()+t.slice(1):t,color:o()},"string"==typeof e?{}:e);var t})),a=ur(i,e),s=n?ur(i,n):null,l=0;return i.forEach((function(e){e.acc=l,e.count=a.get(e.value),l+=s?s.get(e.value):a.get(e.value)})),i}(s,e.categories,l,void 0===n?"light":n),p="horizontal"===o,h=ar([0,null!==(t=null==l?void 0:l.length)&&void 0!==t?t:s.length]),y=ir([0,p?i:a]),v=function(e){return y(h(e))};return ke.createElement("g",null,m.map(p?function(e){return ke.createElement("rect",{key:e.value,x:v(e.acc),width:v(e.count),y:u,height:a-2*u,style:Object.assign({fill:e.color},d)},ke.createElement("title",null,e.label+": "+e.count))}:function(e){return ke.createElement("rect",{key:e.value,y:v(e.acc),height:v(e.count),x:u,width:i-2*u,style:Object.assign({fill:e.color},d)},ke.createElement("title",null,e.label+": "+e.count))}))}));function dr(e,t){j(m(Qn,t),e)}var mr=dr;function pr(e,t){L(m(Qn,t),e)}var hr=pr;e.asCombination=Ge,e.asCombinations=function(e,t,n){return e.map((function(e){return Ge(e,t,n)}))},e.asSet=rt,e.asSets=function(e,t){return void 0===t&&(t={}),ot(e.map(rt),t)},e.bandScale=at,e.boxplotAddon=function(e,t,n){return void 0===n&&(n={}),function(e,t,n){var r=void 0===n?{}:n,o=r.size,i=void 0===o?100:o,a=r.position,s=r.name,l=void 0===s?e.toString():s,c=sr(r,["size","position","name"]),u="function"==typeof e?e:function(t){return t[e]},f=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;return Array.isArray(t)?t.forEach((function(e){var t=u(e);null==t||Number.isNaN(t)||(t<f&&(f=t),t>d&&(d=t))})):(f=t.min,d=t.max),{name:l,position:a,size:i,render:function(e){var t=e.width,n=e.height,r=e.theme,o=e.set.elems.map(u);return ke.createElement(cr,Object.assign({values:o,width:t,height:n,min:f,max:d,theme:r},c))},renderSelection:function(e){var t=e.width,n=e.height,r=e.overlap,o=e.selectionColor,i=e.theme;if(null==r||0===r.length)return null;var a=r.map(u);return ke.createElement(cr,Object.assign({values:a,width:t,height:n,min:f,max:d,mode:"box",lineStyle:{stroke:o,strokeWidth:2},outlierStyle:{fill:o},theme:i},c))},renderQuery:function(e){var t=e.width,n=e.height,r=e.overlap,o=e.query,i=e.secondary,a=e.index,s=e.theme;if(null==r||0===r.length)return null;var l=r.map(u);return ke.createElement(cr,Object.assign({values:l,width:t,height:n,min:f,max:d,mode:i?"indicator":"box",margin:i?a+2:0,lineStyle:{stroke:o.color,strokeWidth:i?1:2},outlierStyle:{fill:o.color},theme:s},c))}}}(e,t,n)},e.categoricalAddon=function(e,t,n){return void 0===n&&(n={}),function(e,t,n){var r=void 0===n?{}:n,o=r.size,i=void 0===o?100:o,a=r.position,s=r.name,l=void 0===s?e.toString():s,c=sr(r,["size","position","name"]),u="function"==typeof e?e:function(t){return t[e]},f=[];if(Array.isArray(t)){var d=new Set;t.forEach((function(e){var t=u(e);null!=t&&d.add(t.toString())})),f=Array.from(d).sort()}else f=t.categories;return{name:l,position:a,size:i,render:function(e){var t=e.width,n=e.height,r=e.theme,o=e.set.elems.map(u);return ke.createElement(fr,Object.assign({values:o,categories:f,width:t,height:n,theme:r},c))},renderSelection:function(e){var t=e.width,n=e.height,r=e.theme,o=e.overlap,i=e.selectionColor;if(null==o||0===o.length)return null;var a=e.set.elems.map(u),s=o.map(u);return ke.createElement(fr,Object.assign({values:s,base:a,categories:f,width:t,height:n,theme:r,rectStyle:{stroke:i,strokeWidth:2,fill:"light"===r?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.2)"}},c))},renderQuery:function(e){var t=e.width,n=e.height,r=e.overlap,o=e.query,i=e.secondary,a=e.index,s=e.theme;if(null==r||0===r.length)return null;var l=e.set.elems.map(u),d=r.map(u);return ke.createElement(fr,Object.assign({values:d,base:l,categories:f,width:t,height:n,margin:i?a+2:0,rectStyle:{stroke:o.color,fill:"light"===s?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.2)"},theme:s},c))}}}(e,t,n)},e.createVennDiagramLayoutFunction=Rt,e.createVennJSAdapter=function(e,t){return{maxSets:1/0,compute:function(n,r,o,i){var a,s,l,c=r.map((function(e){return{sets:Array.from(e.sets).map((function(e){return e.name})),size:e.cardinality}})),u=e(c,Object.assign({},{width:o,height:i,distinct:!0},null!=t?t:{})),f=u.filter((function(e){return 1===e.data.sets.length})),d=(s=(a=f.map((function(e){return e.circles[0]}))).reduce((function(e,t){return e+t.x}),0),l=a.reduce((function(e,t){return e+t.y}),0),{x:s/a.length,y:l/a.length}),m=function(e){return{rx:e.circle.radius,ry:e.circle.radius,rotation:0,x2:e.p1.x,y2:e.p1.y,cx:e.circle.x,cy:e.circle.y,sweepFlag:!0,largeArcFlag:e.width>e.circle.radius,mode:"inside"}};return{sets:f.map((function(e){var t=e.circles[0],n=function(e,t){return Math.atan2(e.y-t.y,e.x-t.x)/Lt}(t,d);return{cx:t.x,cy:t.y,r:t.radius,angle:n+90,text:It(t.x,t.y,1.1*t.radius,n)}})),intersections:u.map((function(e){var t=e.arcs,n={x:e.text.x,y:e.text.y};if(0===t.length)return{text:n,x1:0,y1:0,arcs:[]};if(1===t.length){var r=e.arcs[0].circle;return{text:n,x1:e.arcs[0].p2.x,y1:r.y-r.radius,arcs:[m(e.arcs[0]),Object.assign(m(e.arcs[0]),{y2:r.y-r.radius})],path:e.distinctPath||e.path}}return{text:n,x1:e.arcs[0].p2.x,y1:e.arcs[0].p2.y,arcs:e.arcs.map((function(e){return m(e)})),path:e.distinctPath||e.path}}))}}}},e.downloadUrl=function(e,t,n){an(e,t,n)},e.exportSVG=function(e,t){return on(e,t)},e.extractSets=function(e,t,n){var r;void 0===n&&(n={});var o="function"==typeof t?t:function(e){return e.sets},i=null!==(r="function"!=typeof t?t:n)&&void 0!==r?r:{},a=new Map;return e.forEach((function(e){o(e).forEach((function(t){var n=String(t);a.has(n)?a.get(n).push(e):a.set(n,[e])}))})),ot(Array.from(a).map((function(e){var t=e[1];return{type:"set",elems:t,name:String(e[0]),cardinality:t.length}})),i)},e.fillDefaults=function(e){return tn(e)},e.fillVennDiagramDefaults=function(e){return nn(e)},e.fromDump=function(e,t,n){void 0===n&&(n={});var r,o=e.sets.map((function(e){return rt(Be({},e,{elems:bt(e.elems,t)}))})),i=e.combinations?e.combinations.map((function(e){return Ge(Be({},e,{elems:bt(e.elems,t)}),e.type,(function(e){return e.sets.map((function(e){return o[e]}))}))})):nt(o,Object.assign({type:"intersection",elems:t,toElemKey:n.toElemKey},null!==(r=e.combinationOptions)&&void 0!==r?r:{}));function a(e){return"set"===e.type?o[e.index]:i[e.index]}return{sets:o,combinations:i,selection:e.selection?"string"==typeof e.selection||Array.isArray(e.selection)?bt(e.selection,t):a(e.selection):void 0,queries:e.queries.map((function(e){return e.set?{name:e.name,color:e.color,set:a(e.set)}:{name:e.name,color:e.color,elems:bt(e.elems,t)}}))}},e.fromIndicesArray=bt,e.fromSetName=function(e,t){void 0===t&&(t=/[∩∪&|]/);var n=new Map(e.map((function(e){return[e.name,e]})));return function(e){return e.name.split(t).map((function(e){return n.get(e.trim())}))}},e.fromStaticDump=function(e,t){var n;void 0===t&&(t={});var r=null!==(n=t.toKey)&&void 0!==n?n:it,o=function(){return 0};function i(e){return e.overlap=function(t){return o(e,t)},e}var a=e.sets.map((function(e){return i({name:Ct(e)?e.n:e.name,cardinality:Ct(e)?e.c:e.cardinality,type:"set",elems:[]})})),s=e.combinations.map((function(e){var t,n,r=Mt(e)?function(e){return a.filter((function(t,n){var r=Math.pow(2,n);return(e&r)===r}))}(e.s):e.sets.map((function(e){return a[e]})),o={i:"intersection",u:"union",c:"composite",d:"distinctIntersection"}[(null!==(t=e.type)&&void 0!==t?t:"i")[0]];return i({name:Mt(e)?null!==(n=e.n)&&void 0!==n?n:Et(r,o):e.name,cardinality:Mt(e)?e.c:e.cardinality,type:o,degree:r.length,sets:new Set(r),elems:[]})})),l=function(e,t,n,r){void 0===r&&(r=it);var o="string"==typeof e?function(e){if(0===e.length)return[];for(var t,n=e.split(";"),r=n[1],o=Number.parseInt(n[0],10),i=0===(t=r).length?[]:t.split(",").map((function(e){if(""===e)return 0;if(e.includes("=")){var t=e.split("=").map((function(e){return Number.parseInt(e,10)})),n=t[0];return Array(t[1]+1).fill(n)}return Number.parseInt(e,10)})).flat(),a=[],s=0,l=o;l>0;l--)a.push(i.slice(s,s+l)),s+=l;return a}(e):e,i=new Map(t.map((function(e,t){return[r(e),t]}))),a=new Map(n.map((function(e,n){return[r(e),n+t.length]})));return{setIndex:i,compute:function(e,t){if(e===t)return e.cardinality;var n=r(e),s=r(t),l=i.has(n)?i.get(n):a.get(n),c=i.has(s)?i.get(s):a.get(s);if(l===c)return e.cardinality;var u=Math.min(l,c),f=Math.max(l,c)-u-1;return u<0||u>=o.length||f<0||f>=o[u].length?0:o[u][f]},combinationIndex:a}}(e.overlaps,a,s,r),c=l.setIndex,u=l.combinationIndex;function f(e){return"set"===e.type?a[e.index]:s[e.index]}function d(e){return function(t){var n=r(t),o=c.has(n)?c.get(n):u.get(n);return null==o||o<0||o>=e.length?0:e[o]}}return o=l.compute,{sets:a,combinations:s,selection:e.selection?Array.isArray(e.selection)?d(e.selection):f(e.selection):void 0,queries:e.queries.map((function(e){return e.set?{name:e.name,color:e.color,set:f(e.set)}:{name:e.name,color:e.color,overlap:d(e.overlaps)}}))}},e.generateCombinations=nt,e.hydrate=pr,e.hydrateUpSet=hr,e.hydrateVennDiagram=function(e,t){L(m(Xn,t),e)},e.isCalcQuery=ze,e.isElemQuery=Oe,e.isGenerateSetCombinationOptions=Re,e.isSet=Pe,e.isSetCombination=Te,e.isSetLike=Fe,e.isSetQuery=je,e.isUpSetQuery=Ue,e.linearScale=pt,e.logScale=xt,e.propValidators=Zn,e.queryElemOverlap=Ie,e.queryOverlap=Le,e.render=dr,e.renderUpSet=mr,e.renderVennDiagram=function(e,t){j(m(Xn,t),e)},e.setElemIntersectionFactory=Ne,e.setElemOverlap=function(e,t,n){if(Me(e)<Me(t)||e instanceof Set)return Ae(e,n)(t);var r=Ae(t,n)(e);return Object.assign({},r,{setA:r.setB,setB:r.setA})},e.setElemOverlapFactory=Ae,e.setOverlap=function(e,t,n){if(Me(e)<Me(t)||e instanceof Set)return Ce(e,n)(t);var r=Ce(t,n)(e);return Object.assign({},r,{setA:r.setB,setB:r.setA})},e.setOverlapFactory=Ce,e.toDump=St,e.toIndicesArray=_t,e.toKey=it,e.toStaticDump=kt,e.toUpSetJSDump=function(e,t,n,r){return un(e,t,n,r)},e.toUpSetJSStaticDump=function(e,t,n){return fn(e,t,n)},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);window.__webpack_public_path__=document.querySelector("body").getAttribute("data-base-url")+"nbextensions/upsetjs_jupyter_widget",r.__exportStar(n(5),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);r.__exportStar(n(2),t),r.__exportStar(n(6),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpSetView=t.UpSetModel=void 0;const r=n(7),o=n(2),i=n(3),a=n(8),s=n(9),l=i.createVennJSAdapter(a.layout);class c extends r.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:c.model_name,_model_module:c.model_module,_model_module_version:c.model_module_version,_view_name:c.view_name,_view_module:c.view_module,_view_module_version:c.view_module_version})}}t.UpSetModel=c,c.serializers=Object.assign({},r.DOMWidgetModel.serializers),c.model_name="UpSetModel",c.model_module=o.MODULE_NAME,c.model_module_version=o.MODULE_VERSION,c.view_name="UpSetView",c.view_module=o.MODULE_NAME,c.view_module_version=o.MODULE_VERSION;class u extends r.DOMWidgetView{constructor(){super(...arguments),this.props={sets:[],width:300,height:300},this.elems=[],this.elemToIndex=new Map,this.attrs=[],this.changeSelection=e=>{if(this.model.off("change",this.changed_prop,null),e){const t={name:e.name,type:e.type,cardinality:e.cardinality,elems:e.elems.map(e=>this.elemToIndex.get(e))};"set"!==e.type&&(t.degree=e.degree,t.set_names=Array.from(e.sets).map(e=>e.name)),this.model.set("value",t)}else this.model.set("value",null);this.props.selection=e,this.renderImpl(),this.touch(),this.model.on("change",this.changed_prop,this)}}render(){this.model.on("change",this.changed_prop,this),this.updateProps(this.stateToProps())}stateToProps(){const e={},t=this.model.get_state(!0),n=e=>e.replace(/([-_]\w)/g,e=>e[1].toUpperCase());return Object.keys(t).forEach(r=>{let o=t[r];if(null==o||Array.isArray(o)&&0===o.length||r.startsWith("_")||"layout"===r)return;const i=(e=>"value"===e?"selection":n(e))(r);if("fontSizes"===i){const e={};Object.keys(o).forEach(t=>{const r=o[t];null!=r&&(e[n(t)]="number"==typeof r?r+"px":String(r))}),o=e}e[i]=o}),e}updateProps(e){e&&Object.assign(this.props,e),this.fixProps(e),this.renderImpl()}syncAddons(){if(0===this.attrs.length)return delete this.props.setAddons,void delete this.props.combinationAddons;const e=(e,t=!1)=>"number"===e.type?i.boxplotAddon(t=>t.attrs[e.name],{min:e.domain[0],max:e.domain[1]},{name:e.name,quantiles:"hinges",orient:t?"vertical":"horizontal"}):i.categoricalAddon(t=>t.attrs[e.name],{categories:e.categories},{name:e.name,orient:t?"vertical":"horizontal"});this.props.setAddons=this.attrs.map(t=>e(t,!1)),this.props.combinationAddons=this.attrs.map(t=>e(t,!0))}fixProps(e){var t,n,r;const o=this.props;if(e.elems)if(null!=e.elems){this.attrs=null!==(t=e.attrs)&&void 0!==t?t:this.attrs;const n=this.attrs.map(e=>e.elems?new Map(e.elems.map((e,t)=>[e,t])):null);this.elems=e.elems.map((e,t)=>{const r={};return this.attrs.forEach((o,i)=>{var a;return r[o.name]=o.values[n[i]&&null!==(a=n[i].get(e))&&void 0!==a?a:t]}),{name:e,attrs:r}}),this.elemToIndex.clear(),this.elems.forEach((e,t)=>this.elemToIndex.set(e,t)),this.syncAddons()}else if(null!=e.attrs){this.attrs=e.attrs;const t=this.attrs.map(e=>e.elems?new Map(e.elems.map((e,t)=>[e,t])):null);this.elems.forEach((e,n)=>{const r={};this.attrs.forEach((o,i)=>{var a;return r[o.name]=o.values[t[i]&&null!==(a=t[i].get(e.name))&&void 0!==a?a:n]}),e.attrs=r}),this.syncAddons()}if(delete this.props.elems,delete this.props.attrs,null!=e.sets&&(o.sets=s.fixSets(e.sets,this.elems)),null!=e.combinations){const t=s.fixCombinations(e.combinations,o.sets,this.elems);null==t?delete o.combinations:o.combinations=t}e.selection&&(o.selection=s.resolveSet(e.selection,null!==(n=o.sets)&&void 0!==n?n:[],null!==(r=o.combinations)&&void 0!==r?r:[],this.elems)),e.queries&&(o.queries=e.queries.map(e=>{var t,n;return i.isSetQuery(e)?Object.assign({},e,{set:s.resolveSet(e.set,null!==(t=o.sets)&&void 0!==t?t:[],null!==(n=o.combinations)&&void 0!==n?n:[],this.elems)}):i.isElemQuery(e)?Object.assign({},e,{elems:i.fromIndicesArray(e.elems,this.elems)}):e})),delete o.onHover,delete o.onClick,delete o.onContextMenu,"click"===this.model.get("mode")?o.onClick=this.changeSelection:"hover"===this.model.get("mode")?o.onHover=this.changeSelection:"contextMenu"===this.model.get("mode")&&(o.onContextMenu=this.changeSelection)}changed_prop(e){this.updateProps(e.changed)}renderImpl(){const e=this.el.getBoundingClientRect(),t=Object.assign({},this.props),n=this.model.get("_render_mode");e.width&&e.height?(t.width=e.width,t.height=e.height,"venn"===n?(delete t.layout,i.renderVennDiagram(this.el,t)):"euler"===n?(t.layout=l,i.renderVennDiagram(this.el,t)):i.render(this.el,t)):requestAnimationFrame(()=>{const e=this.el.getBoundingClientRect();t.width=e.width||600,t.height=e.height||400,"venn"===n?(delete t.layout,i.renderVennDiagram(this.el,t)):"euler"===n?(t.layout=l,i.renderVennDiagram(this.el,t)):i.render(this.el,t)})}}t.UpSetView=u},function(t,n){t.exports=e},function(e,t,n){"use strict";n.r(t),n.d(t,"VennDiagram",(function(){return S})),n.d(t,"bestInitialLayout",(function(){return d})),n.d(t,"circleArea",(function(){return i})),n.d(t,"circleCircleIntersection",(function(){return l})),n.d(t,"circleFromPath",(function(){return z})),n.d(t,"circleOverlap",(function(){return s})),n.d(t,"circlePath",(function(){return O})),n.d(t,"computeTextCentre",(function(){return M})),n.d(t,"computeTextCentres",(function(){return A})),n.d(t,"disjointCluster",(function(){return v})),n.d(t,"distance",(function(){return a})),n.d(t,"distanceFromIntersectArea",(function(){return f})),n.d(t,"greedyLayout",(function(){return m})),n.d(t,"intersectionArea",(function(){return o})),n.d(t,"intersectionAreaPath",(function(){return I})),n.d(t,"layout",(function(){return q})),n.d(t,"logRatioLossFunction",(function(){return h})),n.d(t,"lossFunction",(function(){return p})),n.d(t,"normalizeSolution",(function(){return x})),n.d(t,"scaleSolution",(function(){return _})),n.d(t,"sortAreas",(function(){return N})),n.d(t,"venn",(function(){return u})),n.d(t,"wrapText",(function(){return E}));var r=n(0);function o(e,t){const n=function(e){const t=[];for(let n=0;n<e.length;++n)for(let r=n+1;r<e.length;++r){const o=l(e[n],e[r]);for(const e of o)e.parentIndex=[n,r],t.push(e)}return t}(e),r=n.filter(t=>function(e,t){return t.every(t=>a(e,t)<t.radius+1e-10)}(t,e));let o=0,s=0;const u=[];if(r.length>1){const t=c(r);for(let e=0;e<r.length;++e){const n=r[e];n.angle=Math.atan2(n.x-t.x,n.y-t.y)}r.sort((e,t)=>t.angle-e.angle);let n=r[r.length-1];for(let t=0;t<r.length;++t){const l=r[t];s+=(n.x+l.x)*(l.y-n.y);const c={x:(l.x+n.x)/2,y:(l.y+n.y)/2};let f=null;for(let t=0;t<l.parentIndex.length;++t)if(n.parentIndex.includes(l.parentIndex[t])){const r=e[l.parentIndex[t]],o=Math.atan2(l.x-r.x,l.y-r.y),i=Math.atan2(n.x-r.x,n.y-r.y);let s=i-o;s<0&&(s+=2*Math.PI);const u=i-s/2;let d=a(c,{x:r.x+r.radius*Math.sin(u),y:r.y+r.radius*Math.cos(u)});d>2*r.radius&&(d=2*r.radius),(null==f||f.width>d)&&(f={circle:r,width:d,p1:l,p2:n,large:d>r.radius,sweep:!0})}null!=f&&(u.push(f),o+=i(f.circle.radius,f.width),n=l)}}else{let t=e[0];for(let n=1;n<e.length;++n)e[n].radius<t.radius&&(t=e[n]);let n=!1;for(let r=0;r<e.length;++r)if(a(e[r],t)>Math.abs(t.radius-e[r].radius)){n=!0;break}n?o=s=0:(o=t.radius*t.radius*Math.PI,u.push({circle:t,p1:{x:t.x,y:t.y+t.radius},p2:{x:t.x-1e-10,y:t.y+t.radius},width:2*t.radius,large:!0,sweep:!0}))}return s/=2,t&&(t.area=o+s,t.arcArea=o,t.polygonArea=s,t.arcs=u,t.innerPoints=r,t.intersectionPoints=n),o+s}function i(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function a(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function s(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);const r=t-(n*n-e*e+t*t)/(2*n);return i(e,e-(n*n-t*t+e*e)/(2*n))+i(t,r)}function l(e,t){const n=a(e,t),r=e.radius,o=t.radius;if(n>=r+o||n<=Math.abs(r-o))return[];const i=(r*r-o*o+n*n)/(2*n),s=Math.sqrt(r*r-i*i),l=e.x+i*(t.x-e.x)/n,c=e.y+i*(t.y-e.y)/n,u=-(t.y-e.y)*(s/n),f=-(t.x-e.x)*(s/n);return[{x:l+u,y:c-f},{x:l-u,y:c+f}]}function c(e){const t={x:0,y:0};for(const n of e)t.x+=n.x,t.y+=n.y;return t.x/=e.length,t.y/=e.length,t}function u(e,t={}){t.maxIterations=t.maxIterations||500;const n=t.initialLayout||d,o=t.lossFunction||p,i=function(e,t={}){const n=t.distinct,r=e.map(e=>Object.assign({},e));function o(e){return e.join(";")}if(n){const e=new Map;for(const t of r)for(let n=0;n<t.sets.length;n++){const r=String(t.sets[n]);e.set(r,t.size+(e.get(r)||0));for(let o=n+1;o<t.sets.length;o++){const n=String(t.sets[o]),i=`${r};${n}`,a=`${n};${r}`;e.set(i,t.size+(e.get(i)||0)),e.set(a,t.size+(e.get(a)||0))}}for(const t of r)t.sets.length<3&&(t.size=e.get(o(t.sets)))}const i=[],a=new Set;for(const e of r)if(1===e.sets.length)i.push(e.sets[0]);else if(2===e.sets.length){const t=e.sets[0],n=e.sets[1];a.add(o(e.sets)),a.add(o([n,t]))}i.sort((e,t)=>e===t?0:e<t?-1:1);for(let e=0;e<i.length;++e){const t=i[e];for(let n=e+1;n<i.length;++n){const e=i[n];a.has(o([t,e]))||r.push({sets:[t,e],size:0})}}return r}(e,t),a=n(i,t),s=Object.keys(a),l=[];for(const e of s)l.push(a[e].x),l.push(a[e].y);const c=Object(r.nelderMead)(e=>{const t={};for(let n=0;n<s.length;++n){const r=s[n];t[r]={x:e[2*n],y:e[2*n+1],radius:a[r].radius}}return o(t,i)},l,t).x;for(let e=0;e<s.length;++e){const t=s[e];a[t].x=c[2*e],a[t].y=c[2*e+1]}return a}function f(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+1e-10?Math.abs(e-t):Object(r.bisect)(r=>s(e,t,r)-n,0,e+t)}function d(e,t={}){let n=m(e,t);const o=t.lossFunction||p;if(e.length>=8){const i=function(e,t={}){const n=t.restarts||10,o=[],i={};for(const t of e)1===t.sets.length&&(i[t.sets[0]]=o.length,o.push(t));let{distances:a,constraints:s}=function(e,t,n){const o=Object(r.zerosM)(t.length,t.length),i=Object(r.zerosM)(t.length,t.length);return e.filter(e=>2===e.sets.length).forEach(e=>{const r=n[e.sets[0]],a=n[e.sets[1]],s=f(Math.sqrt(t[r].size/Math.PI),Math.sqrt(t[a].size/Math.PI),e.size);o[r][a]=o[a][r]=s;let l=0;e.size+1e-10>=Math.min(t[r].size,t[a].size)?l=1:e.size<=1e-10&&(l=-1),i[r][a]=i[a][r]=l}),{distances:o,constraints:i}}(e,o,i);const l=Object(r.norm2)(a.map(r.norm2))/a.length;a=a.map(e=>e.map(e=>e/l));const c=(e,t)=>function(e,t,n,r){for(let e=0;e<t.length;++e)t[e]=0;let o=0;for(let i=0;i<n.length;++i){const a=e[2*i],s=e[2*i+1];for(let l=i+1;l<n.length;++l){const c=e[2*l],u=e[2*l+1],f=n[i][l],d=r[i][l],m=(c-a)*(c-a)+(u-s)*(u-s),p=Math.sqrt(m),h=m-f*f;d>0&&p<=f||d<0&&p>=f||(o+=2*h*h,t[2*i]+=4*h*(a-c),t[2*i+1]+=4*h*(s-u),t[2*l]+=4*h*(c-a),t[2*l+1]+=4*h*(u-s))}}return o}(e,t,a,s);let u=null;for(let e=0;e<n;++e){const e=Object(r.zeros)(2*a.length).map(Math.random),n=Object(r.conjugateGradient)(c,e,t);(!u||n.fx<u.fx)&&(u=n)}const d=u.x,m={};for(let e=0;e<o.length;++e){const t=o[e];m[t.sets[0]]={x:d[2*e]*l,y:d[2*e+1]*l,radius:Math.sqrt(t.size/Math.PI)}}if(t.history)for(const e of t.history)Object(r.scale)(e.x,l);return m}(e,t);o(i,e)+1e-8<o(n,e)&&(n=i)}return n}function m(e,t){const n=t&&t.lossFunction?t.lossFunction:p,r={},o={};for(const t of e)if(1===t.sets.length){const e=t.sets[0];r[e]={x:1e10,y:1e10,rowid:r.length,size:t.size,radius:Math.sqrt(t.size/Math.PI)},o[e]=[]}e=e.filter(e=>2===e.sets.length);for(const t of e){let e=null!=t.weight?t.weight:1;const n=t.sets[0],i=t.sets[1];t.size+1e-10>=Math.min(r[n].size,r[i].size)&&(e=0),o[n].push({set:i,size:t.size,weight:e}),o[i].push({set:n,size:t.size,weight:e})}const i=[];function a(e,t){return t.size-e.size}Object.keys(o).forEach(e=>{let t=0;for(let n=0;n<o[e].length;++n)t+=o[e][n].size*o[e][n].weight;i.push({set:e,size:t})}),i.sort(a);const s={};function c(e){return e.set in s}function u(e,t){r[t].x=e.x,r[t].y=e.y,s[t]=!0}u({x:0,y:0},i[0].set);for(let t=1;t<i.length;++t){const s=i[t].set,m=o[s].filter(c),p=r[s];if(m.sort(a),0===m.length)throw"ERROR: missing pairwise overlap information";const h=[];for(var d=0;d<m.length;++d){const e=r[m[d].set],t=f(p.radius,e.radius,m[d].size);h.push({x:e.x+t,y:e.y}),h.push({x:e.x-t,y:e.y}),h.push({y:e.y+t,x:e.x}),h.push({y:e.y-t,x:e.x});for(let n=d+1;n<m.length;++n){const o=r[m[n].set],i=f(p.radius,o.radius,m[n].size),a=l({x:e.x,y:e.y,radius:t},{x:o.x,y:o.y,radius:i});h.push(...a)}}let y=1e50,v=h[0];for(const t of h){r[s].x=t.x,r[s].y=t.y;const o=n(r,e);o<y&&(y=o,v=t)}u(v,s)}return r}function p(e,t){let n=0;for(const r of t){if(1===r.sets.length)continue;let t;if(2===r.sets.length){const n=e[r.sets[0]],o=e[r.sets[1]];t=s(n.radius,o.radius,a(n,o))}else t=o(r.sets.map(t=>e[t]));n+=(null!=r.weight?r.weight:1)*(t-r.size)*(t-r.size)}return n}function h(e,t){let n=0;for(const r of t){if(1===r.sets.length)continue;let t;if(2===r.sets.length){const n=e[r.sets[0]],o=e[r.sets[1]];t=s(n.radius,o.radius,a(n,o))}else t=o(r.sets.map(t=>e[t]));const i=null!=r.weight?r.weight:1,l=Math.log((t+1)/(r.size+1));n+=i*l*l}return n}function y(e,t,n){if(null==n?e.sort((e,t)=>t.radius-e.radius):e.sort(n),e.length>0){const t=e[0].x,n=e[0].y;for(const r of e)r.x-=t,r.y-=n}if(2===e.length){a(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y)}if(e.length>1){const n=Math.atan2(e[1].x,e[1].y)-t,r=Math.cos(n),o=Math.sin(n);for(const t of e){const e=t.x,n=t.y;t.x=r*e-o*n,t.y=o*e+r*n}}if(e.length>2){let n=Math.atan2(e[2].x,e[2].y)-t;for(;n<0;)n+=2*Math.PI;for(;n>2*Math.PI;)n-=2*Math.PI;if(n>Math.PI){const t=e[1].y/(1e-10+e[1].x);for(const n of e){var r=(n.x+t*n.y)/(1+t*t);n.x=2*r-n.x,n.y=2*r*t-n.y}}}}function v(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}function n(e,n){const r=t(e),o=t(n);r.parent=o}e.forEach(e=>{e.parent=e});for(let t=0;t<e.length;++t)for(let r=t+1;r<e.length;++r){const o=e[t].radius+e[r].radius;a(e[t],e[r])+1e-10<o&&n(e[r],e[t])}const r=new Map;for(let n=0;n<e.length;++n){const o=t(e[n]).parent.setid;r.has(o)||r.set(o,[]),r.get(o).push(e[n])}return e.forEach(e=>{delete e.parent}),Array.from(r.values())}function g(e){const t=t=>({max:e.reduce((e,n)=>Math.max(e,n[t]+n.radius),Number.NEGATIVE_INFINITY),min:e.reduce((e,n)=>Math.min(e,n[t]-n.radius),Number.POSITIVE_INFINITY)});return{xRange:t("x"),yRange:t("y")}}function x(e,t,n){null==t&&(t=Math.PI/2);let r=w(e).map(e=>Object.assign({},e));const o=v(r);for(const e of o){y(e,t,n);const r=g(e);e.size=(r.xRange.max-r.xRange.min)*(r.yRange.max-r.yRange.min),e.bounds=r}o.sort((e,t)=>t.size-e.size),r=o[0];let i=r.bounds;const a=(i.xRange.max-i.xRange.min)/50;function s(e,t,n){if(!e)return;const o=e.bounds;let s,l;if(t)s=i.xRange.max-o.xRange.min+a;else{s=i.xRange.max-o.xRange.max;const e=(o.xRange.max-o.xRange.min)/2-(i.xRange.max-i.xRange.min)/2;e<0&&(s+=e)}if(n)l=i.yRange.max-o.yRange.min+a;else{l=i.yRange.max-o.yRange.max;const e=(o.yRange.max-o.yRange.min)/2-(i.yRange.max-i.yRange.min)/2;e<0&&(l+=e)}for(const t of e)t.x+=s,t.y+=l,r.push(t)}let l=1;for(;l<o.length;)s(o[l],!0,!1),s(o[l+1],!1,!0),s(o[l+2],!0,!0),l+=3,i=g(r);return b(r)}function _(e,t,n,r,o){const i=w(e);t-=2*r,n-=2*r;const{xRange:a,yRange:s}=g(i);if(a.max===a.min||s.max===s.min)return console.log("not scaling solution: zero size detected"),e;let l,c;if(o){const e=2*Math.sqrt(o/Math.PI);l=t/e,c=n/e}else l=t/(a.max-a.min),c=n/(s.max-s.min);const u=Math.min(c,l),f=(t-(a.max-a.min)*u)/2,d=(n-(s.max-s.min)*u)/2;return b(i.map(e=>({radius:u*e.radius,x:r+f+(e.x-a.min)*u,y:r+d+(e.y-s.min)*u,setid:e.setid})))}function b(e){const t={};for(const n of e)t[n.setid]=n;return t}function w(e){return Object.keys(e).map(t=>Object.assign(e[t],{setid:t}))}function S(e={}){let t=!1,n=600,r=350,o=15,i=1e3,a=Math.PI/2,s=!0,l=null,c=!0,f=!0,d=null,m=null,y=!1,v=null,g=!(!e||!e.symmetricalTextCentre)&&e.symmetricalTextCentre,b={},w=e&&e.colourScheme?e.colourScheme:e&&e.colorScheme?e.colorScheme:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],S=0,k=function(e){if(e in b)return b[e];var t=b[e]=w[S];return S+=1,S>=w.length&&(S=0),t},M=u,C=p;function N(u){let p=u.datum();const h=new Set;p.forEach(e=>{0==e.size&&1==e.sets.length&&h.add(e.sets[0])}),p=p.filter(e=>!e.sets.some(e=>h.has(e)));let b={},w={};if(p.length>0){let e=M(p,{lossFunction:C,distinct:y});s&&(e=x(e,a,m)),b=_(e,n,r,o,l),w=A(b,p,g)}const S={};function N(e){return e.sets in S?S[e.sets]:1==e.sets.length?""+e.sets[0]:void 0}p.forEach(e=>{e.label&&(S[e.sets]=e.label)}),u.selectAll("svg").data([b]).enter().append("svg");const O=u.select("svg");t?O.attr("viewBox",`0 0 ${n} ${r}`):O.attr("width",n).attr("height",r);const j={};let L=!1;function q(e){return t=>I(e.sets.map(e=>{let o=j[e],i=b[e];return o||(o={x:n/2,y:r/2,radius:1}),i||(i={x:n/2,y:r/2,radius:1}),{x:o.x*(1-t)+i.x*t,y:o.y*(1-t)+i.y*t,radius:o.radius*(1-t)+i.radius*t}}),v)}O.selectAll(".venn-area path").each((function(e){const t=this.getAttribute("d");1==e.sets.length&&t&&!y&&(L=!0,j[e.sets[0]]=z(t))}));const P=O.selectAll(".venn-area").data(p,e=>e.sets),T=P.enter().append("g").attr("class",e=>`venn-area venn-${1==e.sets.length?"circle":"intersection"}${e.colour||e.color?" venn-coloured":""}`).attr("data-venn-sets",e=>e.sets.join("_")),F=T.append("path"),R=T.append("text").attr("class","label").text(e=>N(e)).attr("text-anchor","middle").attr("dy",".35em").attr("x",n/2).attr("y",r/2);function U(e){return"function"==typeof e.transition?e.transition("venn").duration(i):e}f&&(F.style("fill-opacity","0").filter(e=>1==e.sets.length).style("fill",e=>e.colour?e.colour:e.color?e.color:k(e.sets)).style("fill-opacity",".25"),R.style("fill",t=>t.colour||t.color?"#FFF":e.textFill?e.textFill:1==t.sets.length?k(t.sets):"#444"));let B=u;L?(B=U(u),B.selectAll("path").attrTween("d",q)):B.selectAll("path").attr("d",e=>I(e.sets.map(e=>b[e])),v);const D=B.selectAll("text").filter(e=>e.sets in w).text(e=>N(e)).attr("x",e=>Math.floor(w[e.sets].x)).attr("y",e=>Math.floor(w[e.sets].y));c&&(L?"on"in D?D.on("end",E(b,N)):D.each("end",E(b,N)):D.each(E(b,N)));const H=U(P.exit()).remove();H.selectAll("path").attrTween("d",q);const W=H.selectAll("text").attr("x",n/2).attr("y",r/2);return null!==d&&(R.style("font-size","0px"),D.style("font-size",d),W.style("font-size","0px")),{circles:b,textCentres:w,nodes:P,enter:T,update:B,exit:H}}return N.wrap=function(e){return arguments.length?(c=e,N):c},N.useViewBox=function(){return t=!0,N},N.width=function(e){return arguments.length?(n=e,N):n},N.height=function(e){return arguments.length?(r=e,N):r},N.padding=function(e){return arguments.length?(o=e,N):o},N.distinct=function(e){return arguments.length?(y=e,N):y},N.colours=function(e){return arguments.length?(k=e,N):k},N.colors=function(e){return arguments.length?(k=e,N):colors},N.fontSize=function(e){return arguments.length?(d=e,N):d},N.round=function(e){return arguments.length?(v=e,N):v},N.duration=function(e){return arguments.length?(i=e,N):i},N.layoutFunction=function(e){return arguments.length?(M=e,N):M},N.normalize=function(e){return arguments.length?(s=e,N):s},N.scaleToFit=function(e){return arguments.length?(l=e,N):l},N.styled=function(e){return arguments.length?(f=e,N):f},N.orientation=function(e){return arguments.length?(a=e,N):a},N.orientationOrder=function(e){return arguments.length?(m=e,N):m},N.lossFunction=function(e){return arguments.length?(C="default"===e?p:"logRatio"===e?h:e,N):C},N}function E(e,t){return function(n){const r=this,o=e[n.sets[0]].radius||50,i=t(n)||"",a=i.split(/\s+/).reverse(),s=(i.length+a.length)/3;let l=a.pop(),c=[l],u=0;r.textContent=null;const f=[];function d(e){const t=r.ownerDocument.createElementNS(r.namespaceURI,"tspan");return t.textContent=e,f.push(t),r.append(t),t}let m=d(l);for(;l=a.pop(),l;){c.push(l);const e=c.join(" ");m.textContent=e,e.length>s&&m.getComputedTextLength()>o&&(c.pop(),m.textContent=c.join(" "),c=[l],m=d(l),u++)}const p=.35-1.1*u/2,h=r.getAttribute("x"),y=r.getAttribute("y");f.forEach((e,t)=>{e.setAttribute("x",h),e.setAttribute("y",y),e.setAttribute("dy",p+1.1*t+"em")})}}function k(e,t,n){let r=t[0].radius-a(t[0],e);for(let n=1;n<t.length;++n){const o=t[n].radius-a(t[n],e);o<=r&&(r=o)}for(let t=0;t<n.length;++t){const o=a(n[t],e)-n[t].radius;o<=r&&(r=o)}return r}function M(e,t,n){const i=[];for(const t of e)i.push({x:t.x,y:t.y}),i.push({x:t.x+t.radius/2,y:t.y}),i.push({x:t.x-t.radius/2,y:t.y}),i.push({x:t.x,y:t.y+t.radius/2}),i.push({x:t.x,y:t.y-t.radius/2});let s=i[0],l=k(i[0],e,t);for(let n=1;n<i.length;++n){const r=k(i[n],e,t);r>=l&&(s=i[n],l=r)}const u=Object(r.nelderMead)(n=>-1*k({x:n[0],y:n[1]},e,t),[s.x,s.y],{maxIterations:500,minErrorDelta:1e-10}).x,f={x:n?0:u[0],y:u[1]};let d=!0;for(const t of e)if(a(f,t)>t.radius){d=!1;break}for(const e of t)if(a(f,e)<e.radius){d=!1;break}if(d)return f;if(1==e.length)return{x:e[0].x,y:e[0].y};const m={};return o(e,m),0===m.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==m.arcs.length?{x:m.arcs[0].circle.x,y:m.arcs[0].circle.y}:t.length?M(e,[]):c(m.arcs.map(e=>e.p1))}function C(e){const t={},n=Object.keys(e);for(const e of n)t[e]=[];for(let r=0;r<n.length;r++){const o=n[r],i=e[o];for(let s=r+1;s<n.length;++s){const r=n[s],l=e[r],c=a(i,l);c+l.radius<=i.radius+1e-10?t[r].push(o):c+i.radius<=l.radius+1e-10&&t[o].push(r)}}return t}function A(e,t,n){const r={},o=C(e);for(let i=0;i<t.length;++i){const a=t[i].sets,s={},l={};for(let e=0;e<a.length;++e){s[a[e]]=!0;const t=o[a[e]];for(let e=0;e<t.length;++e)l[t[e]]=!0}const c=[],u=[];for(let t in e)t in s?c.push(e[t]):t in l||u.push(e[t]);const f=M(c,u,n);r[a]=f,f.disjoint&&t[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return r}function N(e,t){const n=C(e.selectAll("svg").datum()),r=new Set;for(const e of t.sets)for(let t in n){const o=n[t];for(let n=0;n<o.length;++n)if(o[n]==e){r.add(t);break}}function o(e){return e.every(e=>!r.has(e))}e.selectAll("g").sort((e,n)=>e.sets.length!=n.sets.length?e.sets.length-n.sets.length:e==t?o(n.sets)?-1:1:n==t?o(e.sets)?1:-1:n.size-e.size)}function O(e,t,n){const r=[];return r.push("\nM",e,t),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}function z(e){const t=e.split(" ");return{x:Number.parseFloat(t[1]),y:Number.parseFloat(t[2]),radius:-Number.parseFloat(t[4])}}function j(e){if(0===e.length)return[];const t={};return o(e,t),t.arcs}function L(e,t){if(0===e.length)return"M 0 0";const n=Math.pow(10,t||0),r=null!=t?e=>Math.round(e*n)/n:e=>e;if(1==e.length){const t=e[0].circle;return O(r(t.x),r(t.y),r(t.radius))}const o=["\nM",r(e[0].p2.x),r(e[0].p2.y)];for(const t of e){const e=r(t.circle.radius);o.push("\nA",e,e,0,t.large?1:0,t.sweep?1:0,r(t.p1.x),r(t.p1.y))}return o.join(" ")}function I(e,t){return L(j(e),t)}function q(e,t={}){const{lossFunction:n,layoutFunction:r=u,normalize:o=!0,orientation:i=Math.PI/2,orientationOrder:a,width:s=600,height:l=350,padding:c=15,scaleToFit:f=!1,symmetricalTextCentre:d=!1,distinct:m,round:y=2}=t;let v=r(e,{lossFunction:"default"!==n&&n?"logRatio"===n?h:n:p,distinct:m});o&&(v=x(v,i,a));const g=_(v,s,l,c,f),b=A(g,e,d),w=new Map(Object.keys(g).map(e=>[e,{set:e,x:g[e].x,y:g[e].y,radius:g[e].radius}])),S=e.map(e=>{const t=e.sets.map(e=>w.get(e)),n=j(t);return{circles:t,arcs:n,path:L(n,y),area:e,has:new Set(e.sets)}});function E(e){let t="";for(const n of S)n.has.size>e.length&&e.every(e=>n.has.has(e))&&(t+=" "+n.path);return t}return S.map(({circles:e,arcs:t,path:n,area:r})=>({data:r,text:b[r.sets],circles:e,arcs:t,path:n,distinctPath:n+E(r.sets)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSet=t.fixCombinations=t.fixSets=void 0;const r=n(3);t.fixSets=function(e,t){return e?r.asSets(e.map(e=>Object.assign({},e,{elems:r.fromIndicesArray(e.elems,t)}))):[]},t.fixCombinations=function(e,t,n){if(!e)return null;if(!Array.isArray(e))return r.generateCombinations(t,Object.assign({elems:n},e));const o=new Map(t.map(e=>[e.name,e]));return r.asCombinations(e.map(e=>Object.assign({},e,{elems:r.fromIndicesArray(e.elems,n)})),"composite",e=>e.set_names.map(e=>o.get(e)).filter(Boolean))},t.resolveSet=function(e,t,n,r){if(Array.isArray(e))return e.map(e=>r[e]);const o=e;if(!o.type||"set"===o.type){const e=t.find(e=>e.name===o.name);if(e)return e}return n.find(e=>e.name===o.name)}}])}));
//# sourceMappingURL=index.js.map