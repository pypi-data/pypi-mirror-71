---
# All Modules & Modules

configs:
  composex:
    network:
      use_cloudmap: True

services:
  serviceA:
    image: 373709687836.dkr.ecr.eu-west-1.amazonaws.com/blog-app-01:1589570337
    ports:
      - 80
    configs:
      xray:
        enabled: True
  serviceB:
    image: nginx
    ports:
      - 80:80
    links:
      - serviceC

  serviceC:
    image: nginx
    configs:
      network:
        is_public: False
        use_cloudmap: True


x-tags:
  - name: costcentre
    value: lambda-my-aws
  - name: mail
    value: john@lambda-my-aws.io

x-sns:
  Topics:
    topic01:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic02:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic03:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic04:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic05:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic06:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic07:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic08:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic09:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic10:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic11:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic12:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic13:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic14:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic15:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic16:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic17:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic18:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic19:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic20:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic21:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic22:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: Queue01
      Settings: {}
      Services:
        - name: serviceB
          access: RW
    topic23:
      Properties:
        Subscriptions:
          - Protocol: SQS
            Endpoint: arn:aws:sqs:eu-west-1:012345678910:queue/queue02
      Settings: {}
      Services:
        - name: serviceB
          access: RW

x-sqs:
  Queue01:
    Properties: {}
    Settings: {}
    Services:
      - name: serviceC
        access: RWMessages
