(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[77],{1663:function(e,t,r){"use strict";r(2);var n=r(283),a=r.n(n),i=r(0),o=function(e){var t="".concat(e.title," - ").concat(e.objSlug," - Sentry");return Object(i.f)(a.a,{title:t},e.children)};o.displayName="SentryDocumentTitle",t.a=o},1669:function(e,t,r){"use strict";var n=r(8),a=r.n(n),i=r(9),o=r.n(i),c=r(11),u=r.n(c),s=r(12),l=r.n(s),d=r(6),f=r.n(d),p=r(4),b=r(2),y=r.n(b),v=r(45),h=r.n(v),g=r(62),m=r(0);function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){u()(n,e);var t,r=(t=n,function(){var e,r=f()(t);if(O()){var n=f()(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l()(this,e)});function n(){var e;a()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).state={query:e.props.query||e.props.defaultQuery,dropdownVisible:!1},e.searchInputRef=y.a.createRef(),e.blur=function(){e.searchInputRef.current&&e.searchInputRef.current.blur()},e.onSubmit=function(t){t.preventDefault(),e.blur(),e.props.onSearch(e.state.query)},e.clearSearch=function(){e.setState({query:e.props.defaultQuery},(function(){e.props.onSearch(e.state.query),Object(g.a)(e.props.onChange,e.state.query)}))},e.onQueryFocus=function(){e.setState({dropdownVisible:!0})},e.onQueryBlur=function(){e.setState({dropdownVisible:!1})},e.onQueryChange=function(t){var r=t.target.value;e.setState({query:r}),Object(g.a)(e.props.onChange,r)},e}return o()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.query!==this.props.query&&this.setState({query:e.query})}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.width;return Object(m.f)("div",{className:h()("search",t)},Object(m.f)("form",{className:"form-horizontal",onSubmit:this.onSubmit},Object(m.f)("div",null,Object(m.f)(w,{type:"text",className:"search-input form-control",placeholder:this.props.placeholder,name:"query",ref:this.searchInputRef,autoComplete:"off",value:this.state.query,onBlur:this.onQueryBlur,onChange:this.onQueryChange,width:r}),Object(m.f)("span",{className:"icon-search"}),this.state.query!==this.props.defaultQuery&&Object(m.f)("div",null,Object(m.f)("a",{className:"search-clear-form",onClick:this.clearSearch},Object(m.f)("span",{className:"icon-circle-cross"}))))))}}]),n}(y.a.PureComponent);j.displayName="SearchBar",j.defaultProps={query:"",defaultQuery:"",onSearch:function(){}};var w=Object(p.a)("input",{target:"e5a9jdx0",label:"Input"})("width:",(function(e){return e.width?e.width:void 0}),";");t.a=j},1672:function(e,t,r){"use strict";var n=r(4),a=(r(2),r(10)),i=r(0),o=Object(n.a)((function(e){var t=e.className,r=e.children,n=e.error;return Object(i.f)("div",{"data-test-id":"loading-placeholder",className:t},n||r)}),{target:"e1xygdhp0",label:"Placeholder"})("display:flex;flex-direction:column;flex-shrink:0;justify-content:center;background-color:",(function(e){return e.error?e.theme.red100:e.theme.placeholderBackground}),";",(function(e){return e.error&&"color: ".concat(e.theme.red300,";")})," width:",(function(e){return e.width}),";height:",(function(e){return e.height}),";",(function(e){return"circle"===e.shape?"border-radius: 100%;":""})," ",(function(e){return"number"==typeof e.bottomGutter&&e.bottomGutter>0?"margin-bottom: ".concat(Object(a.a)(e.bottomGutter),";"):""}));o.defaultProps={shape:"rect",bottomGutter:0,width:"100%",height:"60px"},t.a=o},1733:function(e,t,r){"use strict";var n=r(15),a=r.n(n),i=r(4),o=(r(2),r(1744)),c=r(0),u=Object(i.a)((function(e){e.height;var t=a()(e,["height"]);return Object(c.f)("div",t,Object(c.f)(o.a,null))}),{target:"e1ply9d40",label:"LoadingPanel"})("flex:1;flex-shrink:0;overflow:hidden;height:",(function(e){return e.height}),";position:relative;border-color:transparent;margin-bottom:0;");u.defaultProps={height:"200px"},t.a=u},1738:function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return j}));var n=r(20),a=r.n(n),i=r(28),o=r.n(i),c=r(17),u=r.n(c),s=r(43),l=r.n(s),d=r(337),f=r.n(d),p=r(74),b=r(1674),y=r(1779);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e,t){var r=t.organization,n=t.project,a=t.environment,i=t.period,o=t.start,c=t.end,u=t.interval,s=t.includePrevious,d=t.query,f=t.yAxis,p=t.field,v=t.referenceEvent,g=t.keyTransactions,m=t.topEvents,O=t.orderby,j=Object(b.a)(s,i),w=Object.fromEntries(Object.entries({interval:u,project:n,environment:a,query:d,yAxis:f,field:p,referenceEvent:v,topEvents:m,orderby:O}).filter((function(e){return void 0!==l()(e,2)[1]}))),q=Object(y.a)({period:i,start:o,end:c},{shouldDoublePeriod:j});return e.requestPromise("".concat(function(e,t){return"/organizations/".concat(e.slug,t?"/key-transactions-stats/":"/events-stats/")}(r,g)),{query:h({},w,{},q)})};function m(e,t,r){return O.apply(this,arguments)}function O(){return(O=o()(a.a.mark((function e(t,r,n){var i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f()(n,Object.values(p.e)),o=h({},i,{query:n.query}),e.abrupt("return",t.requestPromise("/organizations/".concat(r,"/events-facets/"),{query:o}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,r){return w.apply(this,arguments)}function w(){return(w=o()(a.a.mark((function e(t,r,n){var i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f()(n,Object.values(p.e)),o=h({},i,{query:n.query}),e.abrupt("return",t.requestPromise("/organizations/".concat(r,"/events-meta/"),{query:o}).then((function(e){return e.count})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1744:function(e,t,r){"use strict";var n=r(4),a=Object(n.a)("div",{target:"e4k24ed0",label:"LoadingMask"})("background-color:",(function(e){return e.theme.gray100}),";border-radius:",(function(e){return e.theme.borderRadius}),";position:absolute;top:0;bottom:0;left:0;right:0;");t.a=a},1749:function(e,t,r){"use strict";var n=r(17),a=r.n(n),i=r(43),o=r.n(i),c=r(20),u=r.n(c),s=r(15),l=r.n(s),d=r(28),f=r.n(d),p=r(8),b=r.n(p),y=r(9),v=r.n(y),h=r(11),g=r.n(h),m=r(12),O=r.n(m),j=r(6),w=r.n(j),q=r(59),D=r.n(q),P=r(1754),k=r.n(P),S=r(2),x=r.n(S),z=r(1733),Q=r(1738),C=r(1674),N=r(31),_=r(3),R=r(0);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var I=["api","children","organization","loading"],L=function(e){return k()(e,(function(e,t){return I.includes(t)}))};var T=function(e){g()(n,e);var t,r=(t=n,function(){var e,r=w()(t);if(E()){var n=w()(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return O()(this,e)});function n(){var e;b()(this,n);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=r.call.apply(r,[this].concat(a))).state={reloading:!!e.props.loading,errored:!1,timeseriesData:null},e.unmounting=!1,e.fetchData=f()(u.a.mark((function t(){var r,n,a,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.api,a=l()(r,["api"]),i=null,e.setState((function(e){return{reloading:null!==e.timeseriesData,errored:!1}})),t.prev=3,t.next=6,Object(Q.a)(n,a);case 6:i=t.sent,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),t.t0&&t.t0.responseJSON&&t.t0.responseJSON.detail?Object(N.a)(t.t0.responseJSON.detail):Object(N.a)(Object(_.b)("Error loading chart data")),e.setState({errored:!0});case 13:if(!e.unmounting){t.next=15;break}return t.abrupt("return");case 15:e.setState({reloading:!1,timeseriesData:i});case 16:case"end":return t.stop()}}),t,null,[[3,9]])}))),e.getData=function(t){var r=e.props,n=r.period,a=r.includePrevious,i=Object(C.a)(a,n),o=Math.floor(t.length/2);return{current:i?t.slice(o):t,previous:i?t.slice(0,o):null}},e}return v()(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){D()(L(e),L(this.props))||this.fetchData()}},{key:"componentWillUnmount",value:function(){this.unmounting=!0}},{key:"calculateTotalsPerTimestamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 1e3*e};return e.map((function(e,r){var n=o()(e,2),a=n[0],i=n[1];return{name:t(a,i,r),value:i.reduce((function(e,t){return e+t.count}),0)}}))}},{key:"transformPreviousPeriodData",value:function(e,t){var r;return t?{seriesName:null!==(r=this.props.previousSeriesName)&&void 0!==r?r:"Previous",data:this.calculateTotalsPerTimestamp(t,(function(t,r,n){return 1e3*e[n][0]}))}:null}},{key:"transformAggregatedTimeseries",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{seriesName:t,data:this.calculateTotalsPerTimestamp(e)}}},{key:"transformTimeseriesData",value:function(e,t){return[{seriesName:t||"Current",data:e.map((function(e){var t=o()(e,2);return{name:1e3*t[0],value:t[1].reduce((function(e,t){return e+t.count}),0)}}))}]}},{key:"processData",value:function(e){if(!e)return{};var t=e.data,r=e.totals,n=this.props,a=n.includeTransformedData,i=n.includeTimeAggregation,o=n.timeAggregationSeriesName,c=this.getData(t),u=c.current,s=c.previous;return{data:a?this.transformTimeseriesData(u,this.props.currentSeriesName):[],allData:t,originalData:u,totals:r,originalPreviousData:s,previousData:a?this.transformPreviousPeriodData(u,s):null,timeAggregatedData:i?this.transformAggregatedTimeseries(u,o||""):{}}}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.children,a=r.showLoading,i=l()(r,["children","showLoading"]),o=this.state,c=o.timeseriesData,u=o.reloading,s=o.errored,d=this.props.loading||null===c;if(a&&d)return Object(R.f)(z.a,{"data-test-id":"events-request-loading"});if(null!==(e=c)&&void 0===e.data&&void 0===e.totals)return n(B({loading:d,reloading:u,errored:s,results:Object.keys(c).map((function(e){var r=c[e],n=t.transformTimeseriesData(r.data,e)[0];return[r.order||0,n]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}))},i));var f=this.processData(c);return n(B({loading:d,reloading:u,errored:s,timeseriesData:f.data,allTimeseriesData:f.allData,originalTimeseriesData:f.originalData,timeseriesTotals:f.totals,originalPreviousTimeseriesData:f.originalPreviousData,previousTimeseriesData:f.previousData,timeAggregatedData:f.timeAggregatedData},i))}}]),n}(x.a.PureComponent);T.displayName="EventsRequest",T.defaultProps={period:void 0,start:null,end:null,interval:"1d",limit:15,query:"",includePrevious:!0,includeTransformedData:!0},t.a=T},1754:function(e,t,r){var n=r(225),a=r(1759),i=r(252);e.exports=function(e,t){return i(e,a(n(t)))}},1759:function(e,t){e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},1761:function(e,t,r){"use strict";var n=r(4),a=(r(2),r(189)),i=r(27),o=r(1672),c=r(0);function u(e){var t=e.className,r=e.type,n=e.user,i=e.size,u=void 0===i?38:i;return n?Object(c.f)(a.a,{user:n,size:u,className:t}):"system"===r?Object(c.f)(s,{className:t,size:u},Object(c.f)(l,{size:"md"})):Object(c.f)(o.a,{className:t,width:"".concat(u,"px"),height:"".concat(u,"px"),shape:"circle"})}u.displayName="ActivityAvatar",t.a=u;var s=Object(n.a)("span",{target:"e1n845yu0",label:"SystemAvatar"})("display:flex;justify-content:center;align-items:center;width:",(function(e){return e.size}),"px;height:",(function(e){return e.size}),"px;background-color:",(function(e){return e.theme.gray800}),";color:",(function(e){return e.theme.white}),";border-radius:50%;"),l=Object(n.a)(i.db,{target:"e1n845yu1",label:"StyledIconSentry"})({name:"xa3qai",styles:"padding-bottom:3px;"})},1773:function(e,t,r){"use strict";var n=r(5),a=r.n(n),i=r(17),o=r.n(i),c=r(15),u=r.n(c),s=r(8),l=r.n(s),d=r(9),f=r.n(d),p=r(11),b=r.n(p),y=r(12),v=r.n(y),h=r(6),g=r.n(h),m=r(2),O=r.n(m),j=r(2003),w=r(1798),q=r(0);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=function(e){b()(n,e);var t,r=(t=n,function(){var e,r=g()(t);if(P()){var n=g()(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return v()(this,e)});function n(){return l()(this,n),r.apply(this,arguments)}return f()(n,[{key:"render",value:function(){var e=this.props,t=e.series,r=e.stacked,n=e.colors,i=u()(e,["series","stacked","colors"]);return Object(q.f)(w.a,a()({},i,{series:t.map((function(e,t){var a=e.seriesName,i=e.data,c=u()(e,["seriesName","data"]);return Object(j.a)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({stack:!!r&&"area",name:a,data:i.map((function(e){return[e.name,e.value]})),color:n&&n[t],lineStyle:{opacity:1,width:.4},areaStyle:{color:n&&n[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0},c))}))}))}}]),n}(O.a.Component);k.displayName="AreaChart",t.a=k},1779:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(43),a=r.n(n),i=r(47),o=r.n(i),c=r(34),u=r(55),s=function(e){var t=e.period,r=e.start,n=e.end,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.shouldDoublePeriod;if(t||r||n||(t=c.q),t){if(!s)return{statsPeriod:t};var l=t.match(/([0-9]+)([mhdw])/),d=a()(l,3),f=d[1],p=d[2];return{statsPeriod:"".concat(2*parseInt(f,10)).concat(p)}}if(!r||!n)throw new Error("start and end required");var b=Object(u.j)(r),y=Object(u.j)(n);if(s){var v=o()(n).diff(o()(r)),h=o()(r).subtract(v);return{start:Object(u.j)(h),end:y}}return{start:b,end:y}}},2003:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(17),a=r.n(n),i=r(1848);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)(c({},e))}},2008:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return y})),r.d(t,"b",(function(){return v}));var n=r(17),a=r.n(n),i=r(3),o=r(33),c=r(2009),u=r(31);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=r.toNewQuery();Object(o.e)(l({},h(n,"request"),{organization_id:parseInt(t.id,10)},g(a)));var s=Object(c.a)(e,t.slug,a);return s.then((function(e){return Object(u.d)(Object(i.b)("Query saved")),Object(o.e)(l({},h(n,"success"),{organization_id:parseInt(t.id,10)},g(a))),e})).catch((function(e){Object(u.a)(Object(i.b)("Query not saved")),Object(o.e)(l({},h(n,"failed"),{organization_id:parseInt(t.id,10)},g(a),{error:e&&e.message||"Could not save a ".concat(n?"new":"existing"," query")}))})),s}var f={request:"Discoverv2: Request to save a saved query as a new query",success:"Discoverv2: Successfully saved a saved query as a new query",failed:"Discoverv2: Failed to save a saved query as a new query"},p={request:"Discoverv2: Request to save a new query",success:"Discoverv2: Successfully saved a new query",failed:"Discoverv2: Failed to save a new query"};function b(e,t,r){var n=r.toNewQuery();if(!r.name)return Object(u.a)(Object(i.b)("Please name your query")),Promise.reject();Object(o.e)(l({eventKey:"discover_v2.update_query_request",eventName:"Discoverv2: Request to update a saved query",organization_id:parseInt(t.id,10)},g(n)));var a=Object(c.d)(e,t.slug,n);return a.then((function(e){return Object(u.d)(Object(i.b)("Query updated")),Object(o.e)(l({eventKey:"discover_v2.update_query_success",eventName:"Discoverv2: Successfully updated a saved query",organization_id:parseInt(t.id,10)},g(n))),e})).catch((function(e){Object(u.a)(Object(i.b)("Query not updated")),Object(o.e)(l({eventKey:"discover_v2.update_query_failed",eventName:"Discoverv2: Failed to update a saved query",organization_id:parseInt(t.id,10)},g(n),{error:e&&e.message||"Failed to update a query"}))})),a}function y(e,t,r){var n=r.toNewQuery();Object(o.e)(l({eventKey:"discover_v2.update_query_name_request",eventName:"Discoverv2: Request to update a saved query's name",organization_id:parseInt(t.id,10)},g(n)));var a=Object(c.d)(e,t.slug,n);return a.then((function(e){Object(u.d)(Object(i.b)("Query name saved")),Object(o.e)(l({eventKey:"discover_v2.update_query_name_success",eventName:"Discoverv2: Successfully updated a saved query's name",organization_id:parseInt(t.id,10)},g(n)))})).catch((function(e){Object(u.a)(Object(i.b)("Query name not saved")),Object(o.e)(l({eventKey:"discover_v2.update_query_failed",eventName:"Discoverv2: Failed to update a saved query's name",organization_id:parseInt(t.id,10)},g(n),{error:e&&e.message||"Failed to update a query name"}))})),a}function v(e,t,r){Object(o.e)(l({eventKey:"discover_v2.delete_query_request",eventName:"Discoverv2: Request to delete a saved query",organization_id:parseInt(t.id,10)},g(r.toNewQuery())));var n=Object(c.b)(e,t.slug,r.id);return n.then((function(){Object(u.d)(Object(i.b)("Query deleted")),Object(o.e)(l({eventKey:"discover_v2.delete_query_success",eventName:"Discoverv2: Successfully deleted a saved query",organization_id:parseInt(t.id,10)},g(r.toNewQuery())))})).catch((function(e){Object(u.a)(Object(i.b)("Query not deleted")),Object(o.e)(l({eventKey:"discover_v2.delete_query_failed",eventName:"Discoverv2: Failed to delete a saved query",organization_id:parseInt(t.id,10)},g(r.toNewQuery()),{error:e&&e.message||"Failed to delete query"}))})),n}function h(e,t){return{eventKey:e?"discover_v2.save_new_query_"+t:"discover_v2.save_existing_query_"+t,eventName:e?p[t]:f[t]}}function g(e){return{projects:e.projects,fields:e.fields,query:e.query}}},2009:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return u}));var n=r(3),a=r(31);function i(e,t,r){var i=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(r,"/"),{method:"GET"});return i.catch((function(){Object(a.a)(Object(n.b)("Unable to load saved query"))})),i}function o(e,t,r){var i=e.requestPromise("/organizations/".concat(t,"/discover/saved/"),{method:"POST",data:r});return i.catch((function(){Object(a.a)(Object(n.b)("Unable to create your saved query"))})),i}function c(e,t,r){var i=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(r.id,"/"),{method:"PUT",data:r});return i.catch((function(){Object(a.a)(Object(n.b)("Unable to update your saved query"))})),i}function u(e,t,r){var i=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(r,"/"),{method:"DELETE"});return i.catch((function(){Object(a.a)(Object(n.b)("Unable to delete the saved query"))})),i}},2087:function(e,t,r){"use strict";var n=r(8),a=r.n(n),i=r(9),o=r.n(i),c=r(11),u=r.n(c),s=r(12),l=r.n(s),d=r(6),f=r.n(d),p=r(4),b=r(2),y=r.n(b),v=r(46),h=r(26),g=r(10),m=r(3),O=r(0);function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=function(e){u()(n,e);var t,r=(t=n,function(){var e,r=f()(t);if(j()){var n=f()(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l()(this,e)});function n(){return a()(this,n),r.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.title,r=e.subtitle,n=e.isDismissable,a=e.onCloseClick,i=e.children,o=e.backgroundImg,c=e.className;return Object(O.f)(q,{backgroundImg:o,className:c},n?Object(O.f)(x,{src:"icon-close","aria-label":Object(m.b)("Close"),onClick:a}):null,Object(O.f)(D,null,Object(O.f)(P,null,t),Object(O.f)(k,null,r),Object(O.f)(S,null,i)))}}]),n}(y.a.Component);w.displayName="Banner",w.defaultProps={isDismissable:!0};var q=Object(p.a)("div",{target:"e114y1g30",label:"BannerWrapper"})("background:",(function(e){return e.backgroundImg?"url("+e.backgroundImg+")":e.theme.gray700}),";background-repeat:no-repeat;background-size:cover;background-position:center center;position:relative;min-height:200px;margin-bottom:",Object(g.a)(3),";box-shadow:",(function(e){return e.theme.dropShadowLight}),";border-radius:",(function(e){return e.theme.borderRadius}),";color:",(function(e){return e.theme.white}),";@media (min-width:",h.a.breakpoints[1],"){min-height:220px;}@media (min-width:",h.a.breakpoints[3],"){min-height:260px;}"),D=Object(p.a)("div",{target:"e114y1g31",label:"BannerContent"})("position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:",Object(g.a)(4),";@media (max-width:",h.a.breakpoints[0],"){position:relative;}"),P=Object(p.a)("h1",{target:"e114y1g32",label:"BannerTitle"})("margin-bottom:",Object(g.a)(.25),";@media (min-width:",h.a.breakpoints[1],"){margin-top:",Object(g.a)(2),";margin-bottom:",Object(g.a)(.5),";font-size:42px;}"),k=Object(p.a)("div",{target:"e114y1g33",label:"BannerSubtitle"})("font-size:",h.a.fontSizeMedium,";@media (min-width:",h.a.breakpoints[1],"){font-size:",h.a.fontSizeExtraLarge,";margin-bottom:",Object(g.a)(1),";flex-direction:row;min-width:650px;}"),S=Object(p.a)("div",{target:"e114y1g34",label:"BannerActions"})("display:flex;justify-content:center;width:100%;@media (min-width:",h.a.breakpoints[1],"){width:auto;}"),x=Object(p.a)(v.a,{target:"e114y1g35",label:"BannerIcon"})("position:absolute;display:block;top:",Object(g.a)(2),";right:",Object(g.a)(2),";color:",(function(e){return e.theme.white}),";cursor:pointer;z-index:1;");t.a=w},2660:function(e,t,r){e.exports=r.p+"background-space.bc7f1e.svg"},2871:function(e,t,r){"use strict";r.r(t),r.d(t,"StyledPageHeader",(function(){return ct})),r.d(t,"DiscoverLanding",(function(){return it}));var n=r(17),a=r.n(n),i=r(8),o=r.n(i),c=r(9),u=r.n(c),s=r(11),l=r.n(s),d=r(12),f=r.n(d),p=r(6),b=r.n(p),y=r(4),v=r(2),h=r.n(v),g=r(7),m=r(59),O=r.n(m),j=r(337),w=r.n(j),q=r(224),D=r(3),P=r(33),k=r(90),S=r(1640),x=r(2087),z=r(32),Q=r(342),C=r(36),N=r(188),_=r(646),R=r(1669),A=r(1663),B=r(120),E=r(10),I=r(81),L=r(1668),T=r(639),M=r(464),U=r(494),Y=r(5),K=r.n(Y),G=r(45),H=r.n(G),F=r(47),W=r.n(F),V=r(27),J=r(182),Z=r(150),X=r(286),$=r(77),ee=r(632),te=r(250),re=r(215),ne=r(58),ae=r(2008),ie=r(29),oe=r.n(ie),ce=r(1749),ue=r(1773),se=r(1674),le=r(55),de=r(50),fe=r(26),pe=r(0),be={isLoading:!1,isReloading:!1,maskBackgroundColor:fe.a.white};function ye(e){var t=e.className,r=e.children,n=e.isReloading,a=e.isLoading,i=e.maskBackgroundColor,o=a||n;return Object(pe.f)(ve,{className:t},o&&Object(pe.f)("div",null,Object(pe.f)(he,{isReloading:n,maskBackgroundColor:i}),Object(pe.f)(ge,null)),r)}ye.displayName="LoadingContainer",ye.defaultProps=be;var ve=Object(y.a)("div",{target:"eli80hs0",label:"Container"})({name:"79elbk",styles:"position:relative;"}),he=Object(y.a)("div",{target:"eli80hs1",label:"LoadingMask"})("position:absolute;z-index:1;background-color:",(function(e){return e.maskBackgroundColor}),";width:100%;height:100%;opacity:",(function(e){return e.isReloading?"0.6":"1"}),";"),ge=Object(y.a)(de.default,{target:"eli80hs2",label:"Indicator"})({name:"vp3xgh",styles:"position:absolute;z-index:3;width:100%;"});function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var je=function(e){l()(n,e);var t,r=(t=n,function(){var e,r=b()(t);if(Oe()){var n=b()(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f()(this,e)});function n(){return o()(this,n),r.apply(this,arguments)}return u()(n,[{key:"shouldComponentUpdate",value:function(e){return!O()(this.getRefreshProps(this.props),this.getRefreshProps(e))}},{key:"getRefreshProps",value:function(e){var t=e.organization,r=e.location,n=e.eventView,a=n.getEventsAPIPayload(r);return{organization:t,apiPayload:a,query:a.query,start:a.start?Object(le.k)(a.start):null,end:a.end?Object(le.k)(a.end):null,period:a.statsPeriod,project:n.project,environment:n.environment,yAxis:n.getYAxis()}}},{key:"render",value:function(){var e=this.props.api,t=this.getRefreshProps(this.props),r=t.query,n=t.start,i=t.end,o=t.period,c=t.organization,u=t.project,s=t.environment,l=t.yAxis,d=fe.a.charts.getColorPalette(1);return Object(pe.f)(ce.a,{organization:c,api:e,query:r,start:n,end:i,period:o,interval:Object(se.c)({start:n,end:i,period:o},!0),project:u,environment:s,includePrevious:!1,yAxis:l},(function(e){var t=e.loading,r=e.timeseriesData;if(e.errored)return Object(pe.f)(we,null,Object(pe.f)(V.tb,{color:"gray500",size:"md"}));if(t)return Object(pe.f)(we,null,Object(pe.f)(de.default,{mini:!0}));var n=(r||[]).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{areaStyle:{color:d[0],opacity:1},lineStyle:{opacity:0},smooth:!0})}));return Object(pe.f)(ue.a,{height:100,series:oe()(n),xAxis:{show:!1,axisPointer:{show:!1}},yAxis:{show:!1},tooltip:{show:!1},toolBox:{show:!1},grid:{left:0,top:0,right:0,bottom:0,containLabel:!1},options:{hoverAnimation:!1}})}))}}]),n}(h.a.Component);je.displayName="MiniGraph";var we=Object(y.a)((function(e){return Object(pe.f)(ye,K()({},e,{maskBackgroundColor:"transparent"}))}),{target:"e1tcz5cg0",label:"StyledGraphContainer"})({name:"1gv83l",styles:"height:100px;display:flex;justify-content:center;align-items:center;"}),qe=Object(ne.a)(je),De=r(1761),Pe=r(86),ke=r(104),Se=r(62),xe=r(610);function ze(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Qe=function(e){l()(n,e);var t,r=(t=n,function(){var e,r=b()(t);if(ze()){var n=b()(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f()(this,e)});function n(){var e;o()(this,n);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=r.call.apply(r,[this].concat(a))).handleClick=function(t){t.preventDefault();var r=e.props,n=r.onEventClick,a=r.to;Object(Se.a)(n),g.browserHistory.push(a)},e}return u()(n,[{key:"render",value:function(){var e=this.props,t=e.title,r=e.subtitle,n=e.queryDetail,a=e.renderContextMenu,i=e.renderGraph,o=e.createdBy,c=e.dateStatus;return Object(pe.f)(ke.a,{"data-test-id":"card-".concat(t),onClick:this.handleClick,to:this.props.to},Object(pe.f)(_e,{interactive:!0},Object(pe.f)(Re,null,Object(pe.f)(Ne,null,Object(pe.f)(Ae,null,t),Object(pe.f)(Be,null,n)),Object(pe.f)(Ce,null,o?Object(pe.f)(De.a,{type:"user",user:o,size:34}):Object(pe.f)(De.a,{type:"system",size:34}))),Object(pe.f)(Ee,null,i()),Object(pe.f)(Ie,null,Object(pe.f)(Le,null,r,c?Object(pe.f)(Te,null,Object(D.b)("Edited")," ",c):null),a&&a())))}}]),n}(h.a.PureComponent);Qe.displayName="QueryCard";var Ce=Object(y.a)("span",{target:"e14rqrhq0",label:"AvatarWrapper"})("border:3px solid ",(function(e){return e.theme.gray300}),";border-radius:50%;height:min-content;"),Ne=Object(y.a)("div",{target:"e14rqrhq1",label:"QueryCardContent"})("flex-grow:1;overflow:hidden;margin-right:",Object(E.a)(1),";"),_e=Object(y.a)(xe.a,{target:"e14rqrhq2",label:"StyledQueryCard"})({name:"1h9y2eg",styles:"justify-content:space-between;height:100%;&:focus,&:hover{top:-1px;}"}),Re=Object(y.a)("div",{target:"e14rqrhq3",label:"QueryCardHeader"})("display:flex;padding:",Object(E.a)(1.5)," ",Object(E.a)(2),";"),Ae=Object(y.a)("div",{target:"e14rqrhq4",label:"QueryTitle"})("color:",(function(e){return e.theme.textColor}),";",Pe.a,";"),Be=Object(y.a)("div",{target:"e14rqrhq5",label:"QueryDetail"})("font-family:",(function(e){return e.theme.text.familyMono}),";font-size:",(function(e){return e.theme.fontSizeSmall}),";color:",(function(e){return e.theme.gray500}),";line-height:1.5;",Pe.a,";"),Ee=Object(y.a)("div",{target:"e14rqrhq6",label:"QueryCardBody"})("background:",(function(e){return e.theme.gray200}),";max-height:100px;height:100%;overflow:hidden;"),Ie=Object(y.a)("div",{target:"e14rqrhq7",label:"QueryCardFooter"})("display:flex;justify-content:space-between;align-items:center;padding:",Object(E.a)(1)," ",Object(E.a)(2),";"),Le=Object(y.a)("div",{target:"e14rqrhq8",label:"DateSelected"})("font-size:",(function(e){return e.theme.fontSizeSmall}),";display:grid;grid-column-gap:",Object(E.a)(1),";",Pe.a,";color:",(function(e){return e.theme.gray700}),";"),Te=Object(y.a)("span",{target:"e14rqrhq9",label:"DateStatus"})("color:",(function(e){return e.theme.purple400}),";padding-left:",Object(E.a)(1),";"),Me=Qe;function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ke(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ge=function(e){l()(n,e);var t,r=(t=n,function(){var e,r=b()(t);if(Ke()){var n=b()(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f()(this,e)});function n(){var e;o()(this,n);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=r.call.apply(r,[this].concat(a))).handleDeleteQuery=function(t){return function(r){r.preventDefault(),r.stopPropagation();var n=e.props,a=n.api,i=n.organization,o=n.onQueryChange,c=n.location,u=n.savedQueries;Object(ae.b)(a,i,t).then((function(){1===u.length&&c.query.cursor?g.browserHistory.push({pathname:c.pathname,query:Ye({},c.query,{cursor:void 0})}):o()}))}},e.handleDuplicateQuery=function(t){return function(r){r.preventDefault(),r.stopPropagation();var n=e.props,a=n.api,i=n.location,o=n.organization,c=n.onQueryChange;(t=t.clone()).name="".concat(t.name," copy"),Object(ae.a)(a,o,t).then((function(){c(),g.browserHistory.push({pathname:i.pathname,query:{}})}))}},e}return u()(n,[{key:"componentDidMount",value:function(){Object(J.b)()}},{key:"renderQueries",value:function(){var e=this.props.pageLinks,t=Object(re.a)(e||""),r=[];return t.previous&&!1!==t.previous.results||(r=r.concat(this.renderPrebuiltQueries())),0===(r=r.concat(this.renderSavedQueries())).filter((function(e){return e})).length?Object(pe.f)(Je,null,Object(pe.f)("p",null,Object(D.b)("No saved queries match that filter"))):r}},{key:"renderPrebuiltQueries",value:function(){var e=this,t=this.props,r=t.location,n=t.organization,a=t.savedQuerySearchQuery,i=Object(U.g)(n),o="string"==typeof a&&a.length>0,c=o?a.toLowerCase():"";return i.map((function(t,a){var i=L.a.fromNewQueryWithLocation(t,r);if(o&&i.name&&!i.name.toLowerCase().includes(c))return null;var u=Object(D.b)("Last ")+i.statsPeriod,s=W()(i.start).format("MMM D, YYYY h:mm A")+" - "+W()(i.end).format("MMM D, YYYY h:mm A"),l=i.getResultsViewUrlTarget(n.slug);return Object(pe.f)(Me,{key:"".concat(a,"-").concat(i.name),to:l,title:i.name,subtitle:i.statsPeriod?u:s,queryDetail:i.query,createdBy:i.createdBy,renderGraph:function(){return Object(pe.f)(qe,{location:r,eventView:i,organization:n})},onEventClick:function(){Object(P.e)({eventKey:"discover_v2.prebuilt_query_click",eventName:"Discoverv2: Click a pre-built query",organization_id:parseInt(e.props.organization.id,10),query_name:i.name})}})}))}},{key:"renderSavedQueries",value:function(){var e=this,t=this.props,r=t.savedQueries,n=t.location,a=t.organization;return r&&Array.isArray(r)&&0!==r.length?r.map((function(t,r){var i=L.a.fromSavedQuery(t),o=Object(D.b)("Last ")+i.statsPeriod,c=W()(i.start).format("MMM D, YYYY h:mm A")+" - "+W()(i.end).format("MMM D, YYYY h:mm A"),u=i.getResultsViewUrlTarget(a.slug),s=Object(pe.f)(te.a,{date:t.dateUpdated});return Object(pe.f)(Me,{key:"".concat(r,"-").concat(i.id),to:u,title:i.name,subtitle:i.statsPeriod?o:c,queryDetail:i.query,createdBy:i.createdBy,dateStatus:s,onEventClick:function(){Object(P.e)({eventKey:"discover_v2.prebuilt_query_click",eventName:"Discoverv2: Click a pre-built query",organization_id:parseInt(e.props.organization.id,10),query_name:i.name})},renderGraph:function(){return Object(pe.f)(qe,{location:n,eventView:i,organization:a})},renderContextMenu:function(){return Object(pe.f)(Fe,null,Object(pe.f)($.a,{"data-test-id":"delete-query",onClick:e.handleDeleteQuery(i)},Object(D.b)("Delete Query")),Object(pe.f)($.a,{"data-test-id":"duplicate-query",onClick:e.handleDuplicateQuery(i)},Object(D.b)("Duplicate Query")))}})})):[]}},{key:"render",value:function(){var e=this.props.pageLinks;return Object(pe.f)(h.a.Fragment,null,Object(pe.f)(He,null,this.renderQueries()),Object(pe.f)(ee.a,{pageLinks:e,onCursor:function(e,t,r,n){var a=Number(e.split(":")[1]),i=Ye({},r,{cursor:e});a<=0&&-1===n&&delete i.cursor,g.browserHistory.push({pathname:t,query:i})}}))}}]),n}(h.a.Component);Ge.displayName="QueryList";var He=Object(y.a)("div",{target:"e87120q0",label:"QueryGrid"})("display:grid;grid-template-columns:minmax(100px,1fr);grid-gap:",Object(E.a)(3),";@media (min-width:",(function(e){return e.theme.breakpoints[1]}),"){grid-template-columns:repeat(2,minmax(100px,1fr));}@media (min-width:",(function(e){return e.theme.breakpoints[2]}),"){grid-template-columns:repeat(3,minmax(100px,1fr));}"),Fe=function(e){var t=e.children;return Object(pe.f)(Z.a,null,(function(e){var r=e.isOpen,n=e.getRootProps,a=e.getActorProps,i=e.getMenuProps,o=H()("dropdown",{"anchor-right":!0,open:r});return Object(pe.f)(We,n({className:o}),Object(pe.f)(Ve,a({onClick:function(e){e.stopPropagation(),e.preventDefault()}}),Object(pe.f)(V.u,{"data-test-id":"context-menu",size:"md"})),r&&Object(pe.f)("ul",K()({},i({}),{className:H()("dropdown-menu")}),t))}))};Fe.displayName="ContextMenu";var We=Object(y.a)("span",{target:"e87120q1",label:"MoreOptions"})("display:flex;color:",(function(e){return e.theme.gray700}),";"),Ve=Object(y.a)("div",{target:"e87120q2",label:"DropdownTarget"})({name:"k008qs",styles:"display:flex;"}),Je=Object(y.a)(X.a,{target:"e87120q3",label:"StyledEmptyStateWarning"})({name:"1mmilsc",styles:"grid-column:1 / 4;"}),Ze=Object(ne.a)(Ge),Xe=r(2660),$e=r.n(Xe);function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var nt=[{label:Object(D.b)("Recently Edited"),value:"-dateUpdated"},{label:Object(D.b)("My Queries"),value:"myqueries"},{label:Object(D.b)("Query Name (A-Z)"),value:"name"},{label:Object(D.b)("Date Created (Newest)"),value:"-dateCreated"},{label:Object(D.b)("Date Created (Oldest)"),value:"dateCreated"},{label:Object(D.b)("Most Outdated"),value:"dateUpdated"}];function at(){return"true"===B.a.getItem("discover-banner-dismissed")}var it=function(e){l()(n,e);var t,r=(t=n,function(){var e,r=b()(t);if(rt()){var n=b()(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f()(this,e)});function n(){var e;o()(this,n);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=r.call.apply(r,[this].concat(a))).state={loading:!0,reloading:!1,error:!1,errors:[],isBannerHidden:at(),savedQueries:[],savedQueriesPageLinks:""},e.shouldReload=!0,e.handleQueryChange=function(){e.fetchData({reloading:!0})},e.handleClick=function(){B.a.setItem("discover-banner-dismissed","true"),e.setState({isBannerHidden:!0})},e.handleSearchQuery=function(t){var r=e.props.location;g.browserHistory.push({pathname:r.pathname,query:tt({},r.query,{cursor:void 0,query:String(t).trim()||void 0})})},e.handleSortChange=function(t){var r=e.props.location;g.browserHistory.push({pathname:r.pathname,query:tt({},r.query,{cursor:void 0,sort:t})})},e.onGoLegacyDiscover=function(){B.a.setItem("discover:version","1");var t=C.default.get("user");Object(P.e)({eventKey:"discover_v2.opt_out",eventName:"Discoverv2: Go to discover",organization_id:parseInt(e.props.organization.id,10),user_id:parseInt(t.id,10)})},e}return u()(n,[{key:"getSavedQuerySearchQuery",value:function(){var e=this.props.location;return String(Object(T.d)(e.query.query)||"").trim()}},{key:"getActiveSort",value:function(){var e=this.props.location,t=e.query.sort?Object(T.d)(e.query.sort):"-dateUpdated";return nt.find((function(e){return e.value===t}))||nt[0]}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.location,n=Object(U.g)(t),a=this.getSavedQuerySearchQuery(),i=Object(T.d)(r.query.cursor),o=9;if(!i)if(a&&a.length>0){var c=a.toLowerCase(),u=n.reduce((function(e,t){var n=L.a.fromNewQueryWithLocation(t,r);return n.name&&n.name.toLowerCase().includes(c)?e+1:e}),0);o=Math.max(1,o-u)}else o=Math.max(1,o-n.length);var s={cursor:i,query:'version:2 name:"'.concat(a,'"'),per_page:o,sortBy:this.getActiveSort().value};return i||delete s.cursor,[["savedQueries","/organizations/".concat(t.slug,"/discover/saved/"),{query:s}]]}},{key:"componentDidUpdate",value:function(e){var t=at();t!==this.state.isBannerHidden&&this.setState({isBannerHidden:t});var r=["sort","cursor","query"];!O()(w()(e.location.query,r),w()(this.props.location.query,r))&&this.fetchData()}},{key:"renderBanner",value:function(){var e=this;if(this.state.isBannerHidden)return null;var t=this.props,r=t.location,n=t.organization,a=L.a.fromNewQueryWithLocation(M.b,r).getResultsViewUrlTarget(n.slug);return Object(pe.f)(x.a,{title:Object(D.b)("Discover Trends"),subtitle:Object(D.b)("Customize and save queries by search conditions, event fields, and tags"),backgroundImg:$e.a,onCloseClick:this.handleClick},Object(pe.f)(dt,{to:a,onClick:function(){Object(P.e)({eventKey:"discover_v2.build_new_query",eventName:"Discoverv2: Build a new Discover Query",organization_id:parseInt(e.props.organization.id,10)})}},Object(D.b)("Build a new query")),Object(pe.f)(dt,{href:"https://docs.sentry.io/performance/discover/"},Object(D.b)("Read the docs")))}},{key:"renderActions",value:function(){var e=this,t=this.getActiveSort();return Object(pe.f)(st,null,Object(pe.f)(ut,{defaultQuery:"",query:this.getSavedQuerySearchQuery(),placeholder:Object(D.b)("Search saved queries"),onSearch:this.handleSearchQuery}),Object(pe.f)(Q.b,{buttonProps:{prefix:Object(D.b)("Sort By")},label:t.label},nt.map((function(r){var n=r.label,a=r.value;return Object(pe.f)(Q.a,{key:a,onSelect:e.handleSortChange,eventKey:a,isActive:a===t.value},n)}))))}},{key:"renderNoAccess",value:function(){return Object(pe.f)(q.b,null,Object(pe.f)(k.b,{type:"warning"},Object(D.b)("You don't have access to this feature")))}},{key:"renderBody",value:function(){var e=this.props,t=e.location,r=e.organization,n=this.state,a=n.savedQueries,i=n.savedQueriesPageLinks;return Object(pe.f)(Ze,{pageLinks:i,savedQueries:a,savedQuerySearchQuery:this.getSavedQuerySearchQuery(),location:t,organization:r,onQueryChange:this.handleQueryChange})}},{key:"render",value:function(){var e=this,t=this.props,r=t.location,n=t.organization,a=L.a.fromNewQueryWithLocation(M.b,r).getResultsViewUrlTarget(n.slug);return Object(pe.f)(N.a,{organization:n,features:["discover-query"],renderDisabled:this.renderNoAccess},Object(pe.f)(A.a,{title:Object(D.b)("Discover"),objSlug:n.slug},Object(pe.f)(ot,null,Object(pe.f)(_.a,{organization:n},Object(pe.f)(q.b,null,Object(pe.f)(ct,null,Object(D.b)("Discover"),Object(pe.f)(lt,{"data-test-id":"build-new-query",to:a,priority:"primary",onClick:function(){Object(P.e)({eventKey:"discover_v2.build_new_query",eventName:"Discoverv2: Build a new Discover Query",organization_id:parseInt(e.props.organization.id,10)})}},Object(D.b)("Build a new query"))),this.renderBanner(),this.renderActions(),this.renderComponent(),Object(pe.f)(N.a,{features:["organizations:discover"],organization:n},Object(pe.f)("div",null,Object(pe.f)(ft,{href:"/organizations/".concat(n.slug,"/discover/"),onClick:this.onGoLegacyDiscover},Object(D.b)("Go to Legacy Discover")))))))))}}]),n}(S.a);it.displayName="DiscoverLanding";var ot=Object(y.a)(q.b,{target:"eierko0",label:"StyledPageContent"})({name:"y8aj3r",styles:"padding:0;"}),ct=Object(y.a)("div",{target:"eierko1",label:"StyledPageHeader"})("display:flex;align-items:flex-end;font-size:",(function(e){return e.theme.headerFontSize}),";color:",(function(e){return e.theme.gray800}),";justify-content:space-between;margin-bottom:",Object(E.a)(2),";"),ut=Object(y.a)(R.a,{target:"eierko2",label:"StyledSearchBar"})({name:"i9gxme",styles:"flex-grow:1;"}),st=Object(y.a)("div",{target:"eierko3",label:"StyledActions"})("display:grid;grid-gap:",Object(E.a)(2),";grid-template-columns:auto min-content;align-items:center;margin-bottom:",Object(E.a)(3),";"),lt=Object(y.a)(z.a,{target:"eierko4",label:"StyledButton"})({name:"epvm6",styles:"white-space:nowrap;"}),dt=Object(y.a)(z.a,{target:"eierko5",label:"StarterButton"})("margin:",Object(E.a)(1),";"),ft=Object(y.a)("a",{target:"eierko6",label:"SwitchLink"})("font-size:",(function(e){return e.theme.fontSizeSmall}),";margin-left:",Object(E.a)(1),";");t.default=Object(I.a)(it)}}]);
//# sourceMappingURL=DiscoverV2Landing.js.map