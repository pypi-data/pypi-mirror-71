(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[112],{1743:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return w})),n.d(e,"a",(function(){return S}));var r=n(20),a=n.n(r),i=n(8),o=n.n(i),c=n(9),s=n.n(c),u=n(11),l=n.n(u),f=n(12),d=n.n(f),p=n(6),b=n.n(p),y=n(28),h=n.n(y),v=n(2),O=n.n(v),j=n(0);function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function m(t,e){var n=t.split(" ")[0],r=t.split(" ").splice(1).join(" "),a=e.generationByIdentifier(n);return void 0===a?t:a+" "+r}function w(){return x.apply(this,arguments)}function x(){return(x=h()(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.e(205).then(n.t.bind(null,1900,7)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S=function(t){l()(r,t);var e,n=(e=r,function(){var t,n=b()(e);if(g()){var r=b()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(t){var e;return o()(this,r),(e=n.call(this,t))._isMounted=void 0,e.state={iOSDeviceList:null},e}return s()(r,[{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0,w().then((function(e){t._isMounted&&t.setState({iOSDeviceList:e})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this.props,e=t.value,n=t.children,r=this.state.iOSDeviceList;if(!e)return null;if(!r)return e;var a=m(e,r);return Object(j.f)("span",{"data-test-id":"loaded-device-name"},n?n(a):a)}}]),r}(O.a.Component);S.displayName="DeviceName"},1942:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r,a=n(15),i=n.n(a),o=n(5),c=n.n(o),s=n(43),u=n.n(s),l=n(8),f=n.n(l),d=n(9),p=n.n(d),b=n(11),y=n.n(b),h=n(12),v=n.n(h),O=n(6),j=n.n(O),g=n(131),m=n.n(g),w=n(59),x=n.n(w),S=n(2),k=n.n(S),D=n(31),R=n(188),q=n(32),P=n(3),N=n(58),z=n(395),L=n(81),E=n(0);function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}
//! Coordinate with other ExportQueryType (src/sentry/data_export/base.py)
!function(t){t.IssuesByTag="Issues-by-Tag",t.Discover="Discover"}(r||(r={}));var V=function(t){y()(r,t);var e,n=(e=r,function(){var t,n=j()(e);if(I()){var r=j()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return v()(this,t)});function r(){var t;f()(this,r);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return(t=n.call.apply(n,[this].concat(a))).state=t.initialState,t.resetState=function(){t.setState(t.initialState)},t.startDataExport=function(){var e=t.props,n=e.api,r=e.organization.slug,a=e.payload,i=a.queryType,o=a.queryInfo;t.setState({inProgress:!0}),n.requestPromise("/organizations/".concat(r,"/data-export/"),{includeAllArgs:!0,method:"POST",data:{query_type:i,query_info:o}}).then((function(t){var e=u()(t,3),n=(e[0],e[1],e[2]);Object(D.d)(201===(null==n?void 0:n.status)?Object(P.b)("Sit tight. We'll shoot you an email when your data is ready for download."):Object(P.b)("It looks like we're already working on it. Sit tight, we'll email you."))})).catch((function(e){var n,r,a=null!==(n=null==e?void 0:null===(r=e.responseJSON)||void 0===r?void 0:r.detail)&&void 0!==n?n:"We tried our hardest, but we couldn't export your data. Give it another go.";Object(D.a)(Object(P.b)(a)),t.setState({inProgress:!1})}))},t}return p()(r,[{key:"componentDidUpdate",value:function(t){var e=t.payload,n=this.props.payload;x()(e,n)||this.resetState()}},{key:"render",value:function(){var t=this.state.inProgress,e=this.props,n=e.children,r=e.disabled,a=e.icon;return Object(E.f)(R.a,{features:["organizations:data-export"]},t?Object(E.f)(T,c()({size:"small",priority:"default",title:"You can get on with your life. We'll email you when your data's ready."},this.props,{disabled:!0,icon:a}),Object(P.b)("We're working on it...")):Object(E.f)(T,c()({onClick:m()(this.startDataExport,500),disabled:r||!1,size:"small",priority:"default",title:"Put your data to work. Start your export and we'll email you when it's finished.",icon:a},this.props),n||Object(P.b)("Export All to CSV")))}},{key:"initialState",get:function(){return{inProgress:!1}}}]),r}(k.a.Component);V.displayName="DataExport";var T=function(t){var e=t.children,n=i()(t,["children"]);return Object(E.f)(q.a,n,e,Object(E.f)(z.a,{type:"new"}))};T.displayName="NewButton",e.b=Object(N.a)(Object(L.a)(V))},2810:function(t,e,n){"use strict";n.r(e),n.d(e,"GroupTagValues",(function(){return T}));var r=n(8),a=n.n(r),i=n(9),o=n.n(i),c=n(11),s=n.n(c),u=n(12),l=n.n(u),f=n(6),d=n.n(f),p=n(4),b=n(502),y=n.n(b),h=n(904),v=n.n(h),O=n(2),j=n.n(O),g=n(25),m=n(3),w=n(1640),x=n(690),S=n(32),k=n(1743),D=n(85),R=n(392),q=n(27),P=n(439),N=n(632),z=n(250),L=n(1942),E=n(10),I=n(0);function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var T=function(t){s()(r,t);var e,n=(e=r,function(){var t,n=d()(e);if(V()){var r=d()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return o()(r,[{key:"getEndpoints",value:function(){var t=this.props.environments,e=this.props.params,n=e.groupId,r=e.tagKey;return[["tag","/issues/".concat(n,"/tags/").concat(r,"/")],["tagValueList","/issues/".concat(n,"/tags/").concat(r,"/values/"),{query:{environment:t}}]]}},{key:"renderBody",value:function(){var t=this.props,e=t.group,n=t.params,r=n.orgId,a=n.tagKey,i=t.environments,o=this.state,c=o.tag,s=o.tagValueList,u=o.tagValueListPageLinks,l=y()(s,v()("count")).reverse();if(0===l.length&&i.length>0)return Object(I.f)(P.a,{heading:Object(m.b)("Sorry, the tags for this issue could not be found."),message:Object(m.b)("No tags were found for the currently selected environments")});var f="/organizations/".concat(r,"/issues/"),d=l.map((function(t,e){var n=c.totalValues?"".concat(Object(g.s)(t.count,c.totalValues).toFixed(2),"%"):"--",r=t.query||"".concat(c.key,':"').concat(t.value,'"');return Object(I.f)("tr",{key:e},Object(I.f)("td",{className:"bar-cell"},Object(I.f)("span",{className:"label"},n)),Object(I.f)("td",null,Object(I.f)(A,null,Object(I.f)(R.a,{to:{pathname:f,query:{query:r}}},"user"===c.key?Object(I.f)(x.a,{user:t,avatarSize:20,hideEmail:!0}):Object(I.f)(k.a,{value:t.name})),t.email&&Object(I.f)(C,{href:"mailto:".concat(t.email)},Object(I.f)(q.O,{size:"xs",color:"gray500"})),Object(g.n)(t.value)&&Object(I.f)(C,{href:t.value},Object(I.f)(q.R,{size:"xs",color:"gray500"})))),Object(I.f)("td",null,Object(I.f)(z.a,{date:t.lastSeen})))}));return Object(I.f)(j.a.Fragment,null,Object(I.f)(W,null,"user"===c.key?Object(m.b)("Affected Users"):c.name,Object(I.f)(B,{size:"small",priority:"default",href:"/".concat(r,"/").concat(e.project.slug,"/issues/").concat(e.id,"/tags/").concat(a,"/export/")},Object(m.b)("Export Page to CSV")),Object(I.f)("a",null),Object(I.f)(L.b,{payload:{queryType:L.a.IssuesByTag,queryInfo:{project:e.project.id,group:e.id,key:a}}})),Object(I.f)("table",{className:"table table-striped"},Object(I.f)("thead",null,Object(I.f)("tr",null,Object(I.f)(_,{width:20},"%"),Object(I.f)("th",null),Object(I.f)(_,{width:300},Object(m.b)("Last Seen")))),Object(I.f)("tbody",null,d)),Object(I.f)(N.a,{pageLinks:u}),Object(I.f)("p",null,Object(I.f)("small",null,Object(m.b)("Note: Percentage of issue is based on events seen in the last 7 days."))))}}]),r}(w.a),W=Object(p.a)("h3",{target:"ewx0sc40",label:"Header"})({name:"1nylpq2",styles:"display:flex;align-items:flex-end;"}),B=Object(p.a)(S.a,{target:"ewx0sc41",label:"BrowserExportButton"})("margin:0 ",Object(E.a)(1.5),";"),_=Object(p.a)("th",{target:"ewx0sc42",label:"TableHeader"})("width:",(function(t){return t.width}),"px;"),A=Object(p.a)("div",{target:"ewx0sc43",label:"ValueWrapper"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),C=Object(p.a)(D.a,{target:"ewx0sc44",label:"StyledExternalLink"})("margin-left:",Object(E.a)(.5),";");e.default=T}}]);
//# sourceMappingURL=OrganizationGroupTagsValues.js.map