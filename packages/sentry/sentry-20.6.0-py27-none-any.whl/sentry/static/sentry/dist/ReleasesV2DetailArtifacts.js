(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[182,173],{1684:function(t,e,n){"use strict";var r=n(5),a=n.n(r),i=n(15),c=n.n(i),o=n(8),s=n.n(o),l=n(9),u=n.n(l),f=n(11),b=n.n(f),p=n(12),d=n.n(p),h=n(6),j=n.n(h),O=n(2),m=n.n(O),y=n(45),g=n.n(y),v=n(284),R=n(0);function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var k=function(t){b()(r,t);var e,n=(e=r,function(){var t,n=j()(e);if(w()){var r=j()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(){return s()(this,r),n.apply(this,arguments)}return u()(r,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.disabled,r=t.title,i=t.children,o=c()(t,["className","disabled","title","children"]);return Object(R.f)(v.a,a()({},o,{disabled:n}),Object(R.f)("a",{href:"#",className:g()(e||"",{disabled:n}),title:r},i))}}]),r}(m.a.PureComponent);k.displayName="LinkWithConfirmation",e.a=k},1685:function(t,e,n){"use strict";n(2);var r=n(25),a=n(336),i=n(0);function c(t){var e=t.className,n=t.bytes;return Object(i.f)("span",{className:e},Object(a.a)({value:Object(r.i)(n),fixed:"xx KB"}))}c.displayName="FileSize",e.a=c},1747:function(t,e,n){"use strict";var r=n(5),a=n.n(r),i=n(15),c=n.n(i),o=n(8),s=n.n(o),l=n(9),u=n.n(l),f=n(11),b=n.n(f),p=n(12),d=n.n(p),h=n(6),j=n.n(h),O=n(4),m=n(2),y=n.n(m),g=n(186),v=n.n(g),R=n(104),w=n(85),k=n(46),x=n(27),N=n(10),L=n(0);function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var D=function(t){b()(r,t);var e,n=(e=r,function(){var t,n=j()(e);if(z()){var r=j()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(){return s()(this,r),n.apply(this,arguments)}return u()(r,[{key:"render",value:function(){var t=this.props,e=t.size,n=t.priority,r=t.icon,a=t.children,i=t.onClick,c=t.withoutMarginBottom,o=t.openInNewTab,s=t.to,l=t.href;return Object(L.f)(S,{to:s,href:l,onClick:i,size:e,priority:n,withoutMarginBottom:c,openInNewTab:o},r&&Object(L.f)(C,null,"string"==typeof r?Object(L.f)(k.a,{src:r}):r),Object(L.f)(T,null,a),Object(L.f)(I,null,Object(L.f)(x.j,{direction:"right"})))}}]),r}(y.a.Component);D.displayName="AlertLink",D.defaultProps={priority:"warning",size:"normal",withoutMarginBottom:!1,openInNewTab:!1},e.a=D;var S=Object(O.a)((function(t){var e=t.openInNewTab,n=t.to,r=t.href,i=c()(t,["openInNewTab","to","href"]),o=v()(i,["withoutMarginBottom","priority","size"]);return r?Object(L.f)(w.a,a()({},o,{href:r,openInNewTab:e})):Object(L.f)(R.a,a()({},o,{to:n||""}))}),{target:"e1ylhppg0",label:"StyledLink"})("display:flex;background-color:",(function(t){return t.theme.alert[t.priority].backgroundLight}),";color:",(function(t){return t.theme.gray700}),";border:1px dashed ",(function(t){return t.theme.alert[t.priority].border}),";padding:",(function(t){return"small"===t.size?"".concat(Object(N.a)(1)," ").concat(Object(N.a)(1.5)):Object(N.a)(2)}),";margin-bottom:",(function(t){return t.withoutMarginBottom?0:Object(N.a)(3)}),";border-radius:0.25em;transition:0.2s border-color;&.focus-visible{outline:none;box-shadow:",(function(t){return t.theme.alert[t.priority].border}),"7f 0 0 0 2px;}"),C=Object(O.a)("span",{target:"e1ylhppg1",label:"IconWrapper"})("display:flex;margin:",Object(N.a)(.5)," ",Object(N.a)(1.5)," ",Object(N.a)(.5)," 0;"),I=Object(O.a)(C,{target:"e1ylhppg2",label:"IconLink"})("margin:",Object(N.a)(.5)," 0;"),T=Object(O.a)("div",{target:"e1ylhppg3",label:"AlertLinkText"})({name:"56nju3",styles:"line-height:1.5;flex-grow:1;"})},2260:function(t,e,n){"use strict";n.r(e),n.d(e,"ReleaseArtifacts",(function(){return M}));var r=n(8),a=n.n(r),i=n(9),c=n.n(i),o=n(11),s=n.n(o),l=n(12),u=n.n(l),f=n(6),b=n.n(f),p=n(4),d=n(2),h=n.n(d),j=n(186),O=n.n(j),m=n(205),y=n(74),g=n(31),v=n(3),R=n(286),w=n(1685),k=n(1684),x=n(187),N=n(50),L=n(632),z=n(38),D=n(58),S=n(81),C=n(10),I=n(27),T=n(0);function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var M=function(t){s()(r,t);var e,n=(e=r,function(){var t,n=b()(e);if(A()){var r=b()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u()(this,t)});function r(){var t;return a()(this,r),(t=n.call(this)).fetchData=function(){t.setState({loading:!0,error:!1}),t.props.api.request(t.getFilesEndpoint(),{method:"GET",data:O()(t.props.location.query,Object.values(y.e)),success:function(e,n,r){t.setState({error:!1,loading:!1,fileList:e,pageLinks:r.getResponseHeader("Link")})},error:function(){t.setState({error:!0,loading:!1})}})},t.state={loading:!0,error:!1,fileList:[],pageLinks:null},t}return c()(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getFilesEndpoint",value:function(){var t=this.props.params,e=t.orgId,n=t.projectId,r=t.release,a=encodeURIComponent(r),i=null!=n?n:this.props.projectId;return i?"/projects/".concat(e,"/").concat(i,"/releases/").concat(a,"/files/"):"/organizations/".concat(e,"/releases/").concat(a,"/files/")}},{key:"handleRemove",value:function(t){var e=this;Object(g.b)(Object(v.b)("Removing artifact..")),this.props.api.request(this.getFilesEndpoint()+"".concat(t,"/"),{method:"DELETE",success:function(){var n=e.state.fileList.filter((function(e){return e.id!==t}));e.setState({fileList:n}),Object(g.d)(Object(v.b)("Artifact removed."))},error:function(){Object(g.a)(Object(v.b)("Unable to remove artifact. Please try again."))}})}},{key:"render",value:function(){var t=this;if(this.state.loading)return Object(T.f)(N.default,null);if(this.state.error)return Object(T.f)(x.a,{onRetry:this.fetchData});if(0===this.state.fileList.length)return Object(T.f)(m.a,null,Object(T.f)(m.c,null,Object(T.f)(R.a,{small:this.props.smallEmptyMessage},Object(T.f)("p",null,Object(v.b)("There are no artifacts uploaded for this release.")))));var e=new Set(this.props.organization.access);return Object(T.f)("div",null,Object(T.f)(m.a,null,Object(T.f)(m.e,null,Object(T.f)(E,null,Object(v.b)("Name")),Object(T.f)(B,null,Object(v.b)("Distribution")),Object(T.f)(F,null,Object(v.b)("Size"))),Object(T.f)(m.c,null,this.state.fileList.map((function(n){return Object(T.f)(m.f,{key:n.id},Object(T.f)(E,null,Object(T.f)("strong",null,n.name||"(empty)")),Object(T.f)(B,null,n.dist||Object(T.f)("span",{className:"text-light"},Object(v.b)("None"))),Object(T.f)(F,null,Object(T.f)(w.a,{bytes:n.size}),Object(T.f)(P,null,e.has("project:write")?Object(T.f)("a",{href:t.props.api.baseUrl+t.getFilesEndpoint()+"".concat(n.id,"/?download=1"),className:"btn btn-sm btn-default"},Object(T.f)("span",{className:"icon icon-open"})):Object(T.f)(z.a,{title:Object(v.b)("You do not have the required permission to download this artifact.")},Object(T.f)("div",{className:"btn btn-sm btn-default disabled"},Object(T.f)("span",{className:"icon icon-open"}))),Object(T.f)("div",{style:{marginLeft:5}},Object(T.f)(k.a,{className:"btn btn-sm btn-default",title:Object(v.b)("Delete artifact"),message:Object(v.b)("Are you sure you want to remove this artifact?"),onConfirm:t.handleRemove.bind(t,n.id)},Object(T.f)(I.q,null))))))})))),Object(T.f)(L.a,{pageLinks:this.state.pageLinks}))}}]),r}(h.a.Component);M.displayName="ReleaseArtifacts";var E=Object(p.a)("div",{target:"e9h6amz0",label:"NameColumn"})("display:flex;flex:7;padding-right:",Object(C.a)(2),";word-wrap:break-word;word-break:break-all;"),B=Object(p.a)("div",{target:"e9h6amz1",label:"DistributionColumn"})("display:flex;flex:2;padding-right:",Object(C.a)(2),";"),F=Object(p.a)("div",{target:"e9h6amz2",label:"SizeAndActionsColumn"})({name:"8if6xy",styles:"display:flex;flex:3;justify-content:space-between;"}),P=Object(p.a)("div",{target:"e9h6amz3",label:"AlignCenter"})({name:"70qvj9",styles:"display:flex;align-items:center;"});e.default=Object(S.a)(Object(D.a)(M))},2822:function(t,e,n){"use strict";n.r(e);var r=n(8),a=n.n(r),i=n(9),c=n.n(i),o=n(11),s=n.n(o),l=n(12),u=n.n(l),f=n(6),b=n.n(f),p=n(2),d=n.n(p),h=n(3),j=n(2260),O=n(1639),m=n(1645),y=n(122),g=n(81),v=n(1747),R=n(188),w=n(1966),k=n(0);function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var N=function(t){s()(r,t);var e,n=(e=r,function(){var t,n=b()(e);if(x()){var r=b()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u()(this,t)});function r(){return a()(this,r),n.apply(this,arguments)}return c()(r,[{key:"getTitle",value:function(){var t=this.props,e=t.params,n=t.organization;return Object(m.a)(Object(h.b)("Artifacts - Release %s",Object(y.d)(e.release)),n.slug,!1)}},{key:"renderBody",value:function(){var t=this.context.project,e=this.props,n=e.params,r=e.location,a=e.organization;return Object(k.f)(d.a.Fragment,null,Object(k.f)(R.a,{features:["artifacts-in-settings"]},(function(e){return e.hasFeature?Object(k.f)(v.a,{to:"/settings/".concat(a.slug,"/projects/").concat(t.slug,"/source-maps/").concat(encodeURIComponent(n.release),"/"),priority:"info"},Object(h.c)("Artifacts were moved to [sourceMaps] in Settings.",{sourceMaps:Object(k.f)("u",null,Object(h.b)("Source Maps"))})):Object(k.f)(j.default,{params:n,location:r,projectId:t.slug,smallEmptyMessage:!0})})))}}]),r}(O.a);N.contextType=w.ReleaseContext,e.default=Object(g.a)(N)}}]);
//# sourceMappingURL=ReleasesV2DetailArtifacts.js.map