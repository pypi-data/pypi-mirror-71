(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[173],{1684:function(t,e,n){"use strict";var a=n(5),i=n.n(a),r=n(15),c=n.n(r),s=n(8),l=n.n(s),o=n(9),f=n.n(o),u=n(11),b=n.n(u),d=n(12),p=n.n(d),j=n(6),h=n.n(j),O=n(2),m=n.n(O),v=n(45),y=n.n(v),g=n(284),R=n(0);function N(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var k=function(t){b()(a,t);var e,n=(e=a,function(){var t,n=h()(e);if(N()){var a=h()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return p()(this,t)});function a(){return l()(this,a),n.apply(this,arguments)}return f()(a,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.disabled,a=t.title,r=t.children,s=c()(t,["className","disabled","title","children"]);return Object(R.f)(g.a,i()({},s,{disabled:n}),Object(R.f)("a",{href:"#",className:y()(e||"",{disabled:n}),title:a},r))}}]),a}(m.a.PureComponent);k.displayName="LinkWithConfirmation",e.a=k},1685:function(t,e,n){"use strict";n(2);var a=n(25),i=n(336),r=n(0);function c(t){var e=t.className,n=t.bytes;return Object(r.f)("span",{className:e},Object(i.a)({value:Object(a.i)(n),fixed:"xx KB"}))}c.displayName="FileSize",e.a=c},2260:function(t,e,n){"use strict";n.r(e),n.d(e,"ReleaseArtifacts",(function(){return F}));var a=n(8),i=n.n(a),r=n(9),c=n.n(r),s=n(11),l=n.n(s),o=n(12),f=n.n(o),u=n(6),b=n.n(u),d=n(4),p=n(2),j=n.n(p),h=n(186),O=n.n(h),m=n(205),v=n(74),y=n(31),g=n(3),R=n(286),N=n(1685),k=n(1684),w=n(187),x=n(50),L=n(632),D=n(38),z=n(58),S=n(81),C=n(10),E=n(27),A=n(0);function q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var F=function(t){l()(a,t);var e,n=(e=a,function(){var t,n=b()(e);if(q()){var a=b()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return f()(this,t)});function a(){var t;return i()(this,a),(t=n.call(this)).fetchData=function(){t.setState({loading:!0,error:!1}),t.props.api.request(t.getFilesEndpoint(),{method:"GET",data:O()(t.props.location.query,Object.values(v.e)),success:function(e,n,a){t.setState({error:!1,loading:!1,fileList:e,pageLinks:a.getResponseHeader("Link")})},error:function(){t.setState({error:!0,loading:!1})}})},t.state={loading:!0,error:!1,fileList:[],pageLinks:null},t}return c()(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getFilesEndpoint",value:function(){var t=this.props.params,e=t.orgId,n=t.projectId,a=t.release,i=encodeURIComponent(a),r=null!=n?n:this.props.projectId;return r?"/projects/".concat(e,"/").concat(r,"/releases/").concat(i,"/files/"):"/organizations/".concat(e,"/releases/").concat(i,"/files/")}},{key:"handleRemove",value:function(t){var e=this;Object(y.b)(Object(g.b)("Removing artifact..")),this.props.api.request(this.getFilesEndpoint()+"".concat(t,"/"),{method:"DELETE",success:function(){var n=e.state.fileList.filter((function(e){return e.id!==t}));e.setState({fileList:n}),Object(y.d)(Object(g.b)("Artifact removed."))},error:function(){Object(y.a)(Object(g.b)("Unable to remove artifact. Please try again."))}})}},{key:"render",value:function(){var t=this;if(this.state.loading)return Object(A.f)(x.default,null);if(this.state.error)return Object(A.f)(w.a,{onRetry:this.fetchData});if(0===this.state.fileList.length)return Object(A.f)(m.a,null,Object(A.f)(m.c,null,Object(A.f)(R.a,{small:this.props.smallEmptyMessage},Object(A.f)("p",null,Object(g.b)("There are no artifacts uploaded for this release.")))));var e=new Set(this.props.organization.access);return Object(A.f)("div",null,Object(A.f)(m.a,null,Object(A.f)(m.e,null,Object(A.f)(I,null,Object(g.b)("Name")),Object(A.f)(P,null,Object(g.b)("Distribution")),Object(A.f)(T,null,Object(g.b)("Size"))),Object(A.f)(m.c,null,this.state.fileList.map((function(n){return Object(A.f)(m.f,{key:n.id},Object(A.f)(I,null,Object(A.f)("strong",null,n.name||"(empty)")),Object(A.f)(P,null,n.dist||Object(A.f)("span",{className:"text-light"},Object(g.b)("None"))),Object(A.f)(T,null,Object(A.f)(N.a,{bytes:n.size}),Object(A.f)(U,null,e.has("project:write")?Object(A.f)("a",{href:t.props.api.baseUrl+t.getFilesEndpoint()+"".concat(n.id,"/?download=1"),className:"btn btn-sm btn-default"},Object(A.f)("span",{className:"icon icon-open"})):Object(A.f)(D.a,{title:Object(g.b)("You do not have the required permission to download this artifact.")},Object(A.f)("div",{className:"btn btn-sm btn-default disabled"},Object(A.f)("span",{className:"icon icon-open"}))),Object(A.f)("div",{style:{marginLeft:5}},Object(A.f)(k.a,{className:"btn btn-sm btn-default",title:Object(g.b)("Delete artifact"),message:Object(g.b)("Are you sure you want to remove this artifact?"),onConfirm:t.handleRemove.bind(t,n.id)},Object(A.f)(E.q,null))))))})))),Object(A.f)(L.a,{pageLinks:this.state.pageLinks}))}}]),a}(j.a.Component);F.displayName="ReleaseArtifacts";var I=Object(d.a)("div",{target:"e9h6amz0",label:"NameColumn"})("display:flex;flex:7;padding-right:",Object(C.a)(2),";word-wrap:break-word;word-break:break-all;"),P=Object(d.a)("div",{target:"e9h6amz1",label:"DistributionColumn"})("display:flex;flex:2;padding-right:",Object(C.a)(2),";"),T=Object(d.a)("div",{target:"e9h6amz2",label:"SizeAndActionsColumn"})({name:"8if6xy",styles:"display:flex;flex:3;justify-content:space-between;"}),U=Object(d.a)("div",{target:"e9h6amz3",label:"AlignCenter"})({name:"70qvj9",styles:"display:flex;align-items:center;"});e.default=Object(S.a)(Object(z.a)(F))}}]);
//# sourceMappingURL=ReleaseArtifacts.js.map