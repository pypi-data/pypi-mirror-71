(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[126],{1641:function(t,e,n){"use strict";var a=n(15),r=n.n(a),c=n(8),o=n.n(c),i=n(9),s=n.n(i),u=n(11),l=n.n(u),f=n(12),m=n.n(f),d=n(6),b=n.n(d),p=n(4),g=n(2),h=n.n(g),j=n(10),O=n(224),v=n(0);function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var T=function(t){l()(a,t);var e,n=(e=a,function(){var t,n=b()(e);if(y()){var a=b()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return m()(this,t)});function a(){return o()(this,a),n.apply(this,arguments)}return s()(a,[{key:"render",value:function(){var t=this.props,e=t.icon,n=t.title,a=t.action,c=t.tabs,o=t.noTitleStyles,i=r()(t,["icon","title","action","tabs","noTitleStyles"]);return Object(v.f)("div",i,Object(v.f)(I,null,e&&Object(v.f)(S,null,e),n&&Object(v.f)(z,{tabs:c,styled:o},Object(v.f)(O.a,null,n)),a&&Object(v.f)(C,{tabs:c},a)),c&&Object(v.f)("div",null,c))}}]),a}(h.a.Component);T.displayName="SettingsPageHeading",T.defaultProps={noTitleStyles:!1};var I=Object(p.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),z=Object(p.a)("div",{target:"e1uay4fd1",label:"Title"})((function(t){return!t.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(t){return t.tabs?"".concat(Object(j.a)(4)," 0 ").concat(Object(j.a)(2)):"".concat(Object(j.a)(4)," 0")}),";flex:1;"),S=Object(p.a)("div",{target:"e1uay4fd2",label:"Icon"})("margin-right:",Object(j.a)(1),";"),C=Object(p.a)("div",{target:"e1uay4fd3",label:"Action"})((function(t){return t.tabs?"margin-top: ".concat(Object(j.a)(2)):null}),";"),w=Object(p.a)(T,{target:"e1uay4fd4",label:"StyledSettingsPageHeading"})("font-size:14px;margin-top:-",Object(j.a)(4),";");e.a=w},1648:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(641),r=n.n(a),c=n(493);function o(t,e){var n,a,o,i,s=e.routes,u=e.params,l=e.location,f=e.stepBack,m=s.map((function(t){return t.path||""}));"string"!=typeof t?(i=s.indexOf(t)+1,o=r()(m.slice(0,i),(function(t){return"/"===t[0]}))):o=r()(m,(function(t){return"/"===t[0]}));var d=m.slice(o,i);void 0!==f&&(d=d.slice(0,f));var b=null!==(n=null==l?void 0:l.search)&&void 0!==n?n:"",p=null!==(a=null==l?void 0:l.hash)&&void 0!==a?a:"",g="".concat(d.join("")).concat("string"!=typeof t?"":t).concat(b).concat(p);return Object(c.a)(g,u)}},1663:function(t,e,n){"use strict";n(2);var a=n(283),r=n.n(a),c=n(0),o=function(t){var e="".concat(t.title," - ").concat(t.objSlug," - Sentry");return Object(c.f)(r.a,{title:e},t.children)};o.displayName="SentryDocumentTitle",e.a=o},1768:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return m})),n.d(e,"a",(function(){return d})),n.d(e,"e",(function(){return b}));var a=n(137),r=n(3),c=n(31),o=n(175),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if("function"==typeof t[e]){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];t[e].apply(t,a)}};function s(t,e,n){return a.a.fetchDetails(e.teamId),t.request("/teams/".concat(e.orgId,"/").concat(e.teamId,"/"),{success:function(t){a.a.fetchDetailsSuccess(e.teamId,t),i(n,"success",t)},error:function(t){a.a.fetchDetailsError(e.teamId,t),i(n,"error",t)}})}function u(t,e){a.a.updateSuccess(t,e)}function l(t,e,n){var r="/teams/".concat(e.orgId,"/").concat(e.teamId,"/");return a.a.update(e.teamId,e.data),t.request(r,{method:"PUT",data:e.data,success:function(t){u(e.teamId,t),i(n,"success",t)},error:function(t){a.a.updateError(e.teamId,t),i(n,"error",t)}})}function f(t,e,n){var r="/organizations/".concat(e.orgId,"/members/").concat(e.memberId||"me","/teams/").concat(e.teamId,"/"),c=Object(o.a)();return a.a.update(c,e.teamId),t.request(r,{method:"POST",data:e.data,success:function(t){a.a.updateSuccess(e.teamId,t),i(n,"success",t)},error:function(t){a.a.updateError(c,e.teamId,t),i(n,"error",t)}})}function m(t,e,n){var r="/organizations/".concat(e.orgId,"/members/").concat(e.memberId||"me","/teams/").concat(e.teamId,"/"),c=Object(o.a)();return a.a.update(c,e.teamId),t.request(r,{method:"DELETE",success:function(t){a.a.updateSuccess(e.teamId,t),i(n,"success",t)},error:function(t){a.a.updateError(c,e.teamId,t),i(n,"error",t)}})}function d(t,e,n){return a.a.createTeam(e),t.requestPromise("/organizations/".concat(n.orgId,"/teams/"),{method:"POST",data:e}).then((function(t){return a.a.createTeamSuccess(t),Object(c.d)(Object(r.c)("[team] has been added to the [organization] organization",{team:"#".concat(t.slug),organization:n.orgId})),t}),(function(t){throw a.a.createTeamError(e.slug||e.name,t),Object(c.a)(Object(r.c)("Unable to create [team] in the [organization] organization",{team:"#".concat(e.slug||e.name),organization:n.orgId})),t}))}function b(t,e){return a.a.removeTeam(e.teamId),t.requestPromise("/teams/".concat(e.orgId,"/").concat(e.teamId,"/"),{method:"DELETE"}).then((function(t){return a.a.removeTeamSuccess(e.teamId,t),Object(c.d)(Object(r.c)("[team] has been removed from the [organization] organization",{team:"#".concat(e.teamId),organization:e.orgId})),t}),(function(t){throw a.a.removeTeamError(e.teamId,t),Object(c.a)(Object(r.c)("Unable to remove [team] from the [organization] organization",{team:"#".concat(e.teamId),organization:e.orgId})),t}))}},2884:function(t,e,n){"use strict";n.r(e),n.d(e,"OrganizationTeamsContainer",(function(){return it}));var a=n(5),r=n.n(a),c=n(2),o=n.n(c),i=n(21),s=n.n(i),u=n(30),l=n.n(u),f=n(396),m=n(25),d=n(128),b=n(207),p=n(58),g=n(81),h=n(8),j=n.n(h),O=n(9),v=n.n(O),y=n(11),T=n.n(y),I=n(12),z=n.n(I),S=n(6),C=n.n(S),w=n(108),R=n(1663),k=n(3),L=n(32),P=n(205),M=n(1641),x=n(1648),q=n(27),D=n(7),A=n(631),E=n(633),N=n(20),U=n.n(N),Y=n(28),J=n.n(Y),W=n(4),B=n(31),H=n(1768),F=n(288),G=n(10),K=n(0);function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var V=function(t){T()(a,t);var e,n=(e=a,function(){var t,n=C()(e);if(Q()){var a=C()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return z()(this,t)});function a(){var t;j()(this,a);for(var e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return(t=n.call.apply(n,[this].concat(r))).state={loading:!1,error:!1},t.handleRequestAccess=J()(U.a.mark((function e(){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props.team;try{t.joinTeam({successMessage:Object(k.c)("You have requested access to [team]",{team:"#".concat(n.slug)}),errorMessage:Object(k.c)("Unable to request access to [team]",{team:"#".concat(n.slug)})})}catch(t){}case 2:case"end":return e.stop()}}),e)}))),t.handleJoinTeam=function(){var e=t.props.team;t.joinTeam({successMessage:Object(k.c)("You have joined [team]",{team:"#".concat(e.slug)}),errorMessage:Object(k.c)("Unable to join [team]",{team:"#".concat(e.slug)})})},t.joinTeam=function(e){var n=e.successMessage,a=e.errorMessage,r=t.props,c=r.api,o=r.organization,i=r.team;return t.setState({loading:!0}),new Promise((function(e,r){return Object(H.c)(c,{orgId:o.slug,teamId:i.slug},{success:function(){t.setState({loading:!1,error:!1}),Object(B.d)(n),e()},error:function(){t.setState({loading:!1,error:!0}),Object(B.a)(a),r(new Error("Unable to join team"))}})}))},t.handleLeaveTeam=function(){var e=t.props,n=e.api,a=e.organization,r=e.team;t.setState({loading:!0}),Object(H.d)(n,{orgId:a.slug,teamId:r.slug},{success:function(){t.setState({loading:!1,error:!1}),Object(B.d)(Object(k.c)("You have left [team]",{team:"#".concat(r.slug)}))},error:function(){t.setState({loading:!1,error:!0}),Object(B.a)(Object(k.c)("Unable to leave [team]",{team:"#".concat(r.slug)}))}})},t}return v()(a,[{key:"render",value:function(){var t=this.props,e=t.team,n=t.urlPrefix,a=t.openMembership,r=Object(K.f)(F.a,{team:e,avatarSize:36,description:Object(k.d)("%s Member","%s Members",e.memberCount)}),c=e.hasAccess;return Object(K.f)($,null,Object(K.f)(tt,null,c?Object(K.f)(X,{to:"".concat(n,"teams/").concat(e.slug,"/")},r):r),Object(K.f)(_,null,this.state.loading?Object(K.f)(L.a,{size:"small",disabled:!0},"..."):e.isMember?Object(K.f)(L.a,{size:"small",onClick:this.handleLeaveTeam},Object(k.b)("Leave Team")):e.isPending?Object(K.f)(L.a,{size:"small",disabled:!0},Object(k.b)("Request Pending")):a?Object(K.f)(L.a,{size:"small",onClick:this.handleJoinTeam},Object(k.b)("Join Team")):Object(K.f)(L.a,{size:"small",onClick:this.handleRequestAccess},Object(k.b)("Request Access"))))}}]),a}(o.a.Component);V.displayName="AllTeamsRow";var X=Object(W.a)(D.Link,{target:"ekr4bwh0",label:"TeamLink"})("display:inline-block;&.focus-visible{margin:-",Object(G.a)(1),";padding:",Object(G.a)(1),";background:#f2eff5;border-radius:3px;outline:none;}"),Z=Object(p.a)(V),$=Object(W.a)(P.f,{target:"ekr4bwh1",label:"TeamPanelItem"})({name:"chq20z",styles:"padding:0;align-items:center;"}),_=Object(W.a)("div",{target:"ekr4bwh2",label:"Spacer"})("padding:",Object(G.a)(2),";"),tt=Object(W.a)(_,{target:"ekr4bwh3",label:"TeamNameWrapper"})({name:"1rr4qq7",styles:"flex:1;"});function et(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var nt=function(t){T()(a,t);var e,n=(e=a,function(){var t,n=C()(e);if(et()){var a=C()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return z()(this,t)});function a(){var t;j()(this,a);for(var e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return(t=n.call.apply(n,[this].concat(r))).handleCreateTeam=function(e){var n=t.props,a=n.useCreateModal,r=n.organization;a&&(e.preventDefault(),Object(w.d)({organization:r,onClose:function(){}}))},t}return v()(a,[{key:"render",value:function(){var t=this.props,e=t.access,n=t.organization,a=t.urlPrefix,r=t.openMembership,c=t.useCreateModal,o=this.props.teamList.map((function(t){return Object(K.f)(Z,{urlPrefix:a,access:e,team:t,organization:n,openMembership:r,key:t.slug})}));if(0!==o.length)return o;var i=c?"#":"/organizations/".concat(n.slug,"/teams/new/");return Object(K.f)(A.a,null,Object(k.c)("No teams here. [teamCreate]",{root:Object(K.f)(E.a,{noMargin:!0}),teamCreate:e.has("project:admin")?Object(k.c)("You can always [link:create one].",{link:Object(K.f)(D.Link,{to:i,onClick:this.handleCreateTeam})}):null}))}}]),a}(o.a.Component);nt.displayName="AllTeamsList";var at=nt;function rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ct=function(t){T()(a,t);var e,n=(e=a,function(){var t,n=C()(e);if(rt()){var a=C()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return z()(this,t)});function a(){return j()(this,a),n.apply(this,arguments)}return v()(a,[{key:"render",value:function(){var t=this.props,e=t.allTeams,n=t.activeTeams,a=t.organization,r=t.access,c=t.features,o=t.routes,i=t.params,s=a;if(!a)return null;var u=r.has("project:admin"),l=Object(K.f)(L.a,{priority:"primary",size:"small",disabled:!u,title:u?void 0:Object(k.b)("You do not have permission to create teams"),onClick:function(){return Object(w.d)({organization:a})},icon:Object(K.f)(q.b,{size:"xs",isCircled:!0})},Object(k.b)("Create Team")),f=o.find((function(t){return"teams/"===t.path})),m=Object(x.a)(f,{routes:o,params:i,stepBack:-2}),d=new Set(n.map((function(t){return t.id}))),b=e.filter((function(t){return!d.has(t.id)})),p=Object(k.b)("Teams");return Object(K.f)("div",{"data-test-id":"team-list"},Object(K.f)(R.a,{title:p,objSlug:a.slug}),Object(K.f)(M.a,{title:p,action:l}),Object(K.f)(P.a,null,Object(K.f)(P.e,null,Object(k.b)("Your Teams")),Object(K.f)(P.c,null,Object(K.f)(at,{useCreateModal:!0,urlPrefix:m,organization:s,teamList:n,access:r,openMembership:!1}))),Object(K.f)(P.a,null,Object(K.f)(P.e,null,Object(k.b)("Other Teams")),Object(K.f)(P.c,null,Object(K.f)(at,{useCreateModal:!0,urlPrefix:m,organization:s,teamList:b,access:r,openMembership:!(!c.has("open-membership")&&!r.has("org:write"))}))))}}]),a}(o.a.Component);ct.displayName="OrganizationTeams";var ot=ct,it=l()({displayName:"OrganizationTeamsContainer",mixins:[s.a.listenTo(b.a,"onTeamListChange"),s.a.listenTo(d.a,"onProjectListChange")],getInitialState:function(){return{teamList:Object(m.t)(b.a.getAll(),(function(t){return t&&t.name})),projectList:Object(m.t)(d.a.getAll(),(function(t){return t&&t.name})),projectStats:{}}},componentDidMount:function(){this.fetchStats()},fetchStats:function(){Object(f.e)(this.props.api,{orgId:this.props.params.orgId,query:{since:(new Date).getTime()/1e3-86400,stat:"generated",group:"project"}})},onTeamListChange:function(){var t=b.a.getAll();this.setState({teamList:Object(m.t)(t,(function(t){return t.name}))})},onProjectListChange:function(){var t=d.a.getAll();this.setState({projectList:Object(m.t)(t,(function(t){return t.name}))})},render:function(){var t=this.props.organization;if(!t)return null;var e=this.state.teamList,n=this.state.teamList.filter((function(t){return t.isMember}));return Object(K.f)(ot,r()({},this.props,{access:new Set(t.access),features:new Set(t.features),organization:t,projectList:this.state.projectList,allTeams:e,activeTeams:n}))}});e.default=Object(p.a)(Object(g.a)(it))}}]);
//# sourceMappingURL=OrganizationTeams.js.map