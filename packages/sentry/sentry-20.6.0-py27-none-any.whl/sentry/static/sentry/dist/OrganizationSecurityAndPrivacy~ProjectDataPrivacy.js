(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[21],{1639:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(8),a=n.n(r),o=n(9),i=n.n(o),l=n(11),c=n.n(l),s=n(12),u=n.n(s),d=n(6),f=n.n(d),p=n(283),b=n.n(p),h=(n(2),n(1640)),g=n(0);function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var y=function(e){c()(r,e);var t,n=(t=r,function(){var e,n=f()(t);if(v()){var r=f()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return u()(this,e)});function r(){return a()(this,r),n.apply(this,arguments)}return i()(r,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(g.f)(b.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),r}(h.a);y.displayName="AsyncView"},1641:function(e,t,n){"use strict";var r=n(15),a=n.n(r),o=n(8),i=n.n(o),l=n(9),c=n.n(l),s=n(11),u=n.n(s),d=n(12),f=n.n(d),p=n(6),b=n.n(p),h=n(4),g=n(2),v=n.n(g),y=n(10),O=n(224),j=n(0);function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var S=function(e){u()(r,e);var t,n=(t=r,function(){var e,n=b()(t);if(m()){var r=b()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return f()(this,e)});function r(){return i()(this,r),n.apply(this,arguments)}return c()(r,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.action,o=e.tabs,i=e.noTitleStyles,l=a()(e,["icon","title","action","tabs","noTitleStyles"]);return Object(j.f)("div",l,Object(j.f)(R,null,t&&Object(j.f)(E,null,t),n&&Object(j.f)(w,{tabs:o,styled:i},Object(j.f)(O.a,null,n)),r&&Object(j.f)(A,{tabs:o},r)),o&&Object(j.f)("div",null,o))}}]),r}(v.a.Component);S.displayName="SettingsPageHeading",S.defaultProps={noTitleStyles:!1};var R=Object(h.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),w=Object(h.a)("div",{target:"e1uay4fd1",label:"Title"})((function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(e){return e.tabs?"".concat(Object(y.a)(4)," 0 ").concat(Object(y.a)(2)):"".concat(Object(y.a)(4)," 0")}),";flex:1;"),E=Object(h.a)("div",{target:"e1uay4fd2",label:"Icon"})("margin-right:",Object(y.a)(1),";"),A=Object(h.a)("div",{target:"e1uay4fd3",label:"Action"})((function(e){return e.tabs?"margin-top: ".concat(Object(y.a)(2)):null}),";"),P=Object(h.a)(S,{target:"e1uay4fd4",label:"StyledSettingsPageHeading"})("font-size:14px;margin-top:-",Object(y.a)(4),";");t.a=P},1654:function(e,t,n){"use strict";var r=n(5),a=n.n(r),o=n(15),i=n.n(o),l=n(8),c=n.n(l),s=n(9),u=n.n(s),d=n(11),f=n.n(d),p=n(12),b=n.n(p),h=n(6),g=n.n(h),v=n(173),y=n(1),O=n.n(y),j=n(2),m=n.n(j),S=n(49),R=n(1651),w=n.n(R),E=n(634),A=n(205),P=n(1682),C=n(0);function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var I=function(e){f()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(D()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)});function r(){return c()(this,r),n.apply(this,arguments)}return u()(r,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.fields,o=t.access,l=t.disabled,c=t.additionalFieldProps,s=t.renderFooter,u=t.renderHeader,d=i()(t,["title","fields","access","disabled","additionalFieldProps","renderFooter","renderHeader"]);return Object(C.f)(A.a,{id:"string"==typeof n?Object(E.a)(n):void 0},n&&Object(C.f)(A.e,null,n),Object(C.f)(A.c,null,"function"==typeof u&&u({title:n,fields:r}),r.map((function(t){if("function"==typeof t)return t();t.defaultValue;var n=i()(t,["defaultValue"]);return!0===l&&(n.disabled=!0,n.disabledReason=void 0),Object(C.f)(P.a,a()({access:o,disabled:l,key:t.name},d,c,{field:n,highlighted:e.props.highlighted==="#".concat(t.name)}))})),"function"==typeof s&&s({title:n,fields:r})))}}]),r}(m.a.Component);function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}I.displayName="FormPanel";var k=function(e){f()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(x()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)});function r(){var e;c()(this,r);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).state={highlighted:T(e.props,e.context).hash},e}return u()(r,[{key:"componentDidMount",value:function(){this.scrollToHash()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(T(this.props,this.context).hash!==T(e,this.context).hash){var t=T(e,this.context).hash;this.scrollToHash(t),this.setState({highlighted:t})}}},{key:"scrollToHash",value:function(e){var t=e||T(this.props,this.context).hash;if(t)try{w()(Object(E.a)(decodeURIComponent(t)),{align:"middle",offset:-100})}catch(e){S.c(e)}}},{key:"render",value:function(){var e=this.props,t=e.forms,n=e.title,r=e.fields,o=e.access,l=e.disabled,c=e.features,s=e.additionalFieldProps,u=e.renderFooter,d=e.renderHeader,f=(e.location,i()(e,["forms","title","fields","access","disabled","features","additionalFieldProps","renderFooter","renderHeader","location"])),p={access:o,disabled:l,features:c,additionalFieldProps:s,renderFooter:u,renderHeader:d,highlighted:this.state.highlighted};return Object(C.f)(v.Box,f,void 0!==t&&t.map((function(e,t){return Object(C.f)(I,a()({key:t,title:e.title,fields:e.fields},p))})),void 0===t&&void 0!==r&&Object(C.f)(I,a()({title:n,fields:r},p)))}}]),r}(m.a.Component);k.displayName="JsonForm",k.contextTypes={location:O.a.object},k.defaultProps={additionalFieldProps:{}};t.a=k;function T(e,t){return e.location||t.location||{}}},1872:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(3);function a(e){return-1===e?Object(r.b)("Unlimited"):0===e?Object(r.b)("Disabled"):Object(r.c)("[value] per issue",{value:e})}var o,i=((o=Array.from(new Array(21),(function(e,t){return t}))).push(-1),o)},2304:function(e,t,n){"use strict";var r,a,o,i,l,c=n(29),s=n.n(c),u=n(20),d=n.n(u),f=n(17),p=n.n(f),b=n(28),h=n.n(b),g=n(8),v=n.n(g),y=n(9),O=n.n(y),j=n(11),m=n.n(j),S=n(12),R=n.n(S),w=n(6),E=n.n(w),A=n(4),P=n(2),C=n.n(P),D=n(10),I=n(3),x=n(205),k=n(54),T=n(31),U=n(85),N=n(32);function F(e){switch(e){case r.ANYTHING:return Object(I.b)("Anything");case r.IMEI:return Object(I.b)("IMEI numbers");case r.MAC:return Object(I.b)("MAC addresses");case r.EMAIL:return Object(I.b)("Email addresses");case r.PEMKEY:return Object(I.b)("PEM keys");case r.URLAUTH:return Object(I.b)("Auth in URLs");case r.USSSN:return Object(I.b)("US social security numbers");case r.USER_PATH:return Object(I.b)("Usernames in filepaths");case r.UUID:return Object(I.b)("UUIDs");case r.CREDITCARD:return Object(I.b)("Credit card numbers");case r.PASSWORD:return Object(I.b)("Password fields");case r.IP:return Object(I.b)("IP addresses");case r.PATTERN:return Object(I.b)("Regex matches");default:return""}}function L(e){switch(e){case a.MASK:return{label:Object(I.b)("Mask"),description:Object(I.b)("Replace with ****")};case a.HASH:return{label:Object(I.b)("Hash"),description:Object(I.b)("Replace with DEADBEEF")};case a.REMOVE:return{label:Object(I.b)("Remove"),description:Object(I.b)("Replace with null")};case a.REPLACE:return{label:Object(I.b)("Replace"),description:Object(I.b)("Replace with Placeholder")};default:return{label:""}}}!function(e){e.PATTERN="pattern",e.CREDITCARD="creditcard",e.PASSWORD="password",e.IP="ip",e.IMEI="imei",e.EMAIL="email",e.UUID="uuid",e.PEMKEY="pemkey",e.URLAUTH="urlauth",e.USSSN="usssn",e.USER_PATH="userpath",e.MAC="mac",e.ANYTHING="anything"}(r||(r={})),function(e){e.MASK="mask",e.REMOVE="remove",e.HASH="hash",e.REPLACE="replace"}(a||(a={})),function(e){e.LOADING="loading",e.INVALID="invalid",e.NOT_FOUND="not_found",e.LOADED="loaded",e.ERROR="error"}(o||(o={})),function(e){e.VALUE="value",e.UNARY="unary",e.BINARY="binary",e.STRING="string"}(i||(i={})),function(e){e.Unknown="unknown",e.InvalidSelector="invalid-selector",e.RegexParse="regex-parse"}(l||(l={}));var V=[{type:i.BINARY,value:"&&"},{type:i.BINARY,value:"||"}],M=[{type:i.UNARY,value:"!"}],z=[{type:i.VALUE,value:"**",description:Object(I.b)("everywhere")},{type:i.VALUE,value:"password",description:Object(I.b)('attributes named "password"')},{type:i.VALUE,value:"$error.value",description:Object(I.b)("the exception value")},{type:i.VALUE,value:"$message",description:Object(I.b)("the log message")},{type:i.VALUE,value:"extra.MyValue",description:Object(I.b)('the key "MyValue" in "Additional Data"')},{type:i.VALUE,value:"extra.**",description:Object(I.b)('everything in "Additional Data"')},{type:i.VALUE,value:"$http.headers.x-custom-token",description:Object(I.b)("the X-Custom-Token HTTP header")},{type:i.VALUE,value:"$user.ip_address",description:Object(I.b)("the user IP address")},{type:i.VALUE,value:"$frame.vars.foo",description:Object(I.b)('the local variable "foo"')},{type:i.VALUE,value:"contexts.device.timezone",description:Object(I.b)("the timezone in the device context")},{type:i.VALUE,value:"tags.server_name",description:Object(I.b)('the tag "server_name"')}],H=n(88),W=n.n(H),B=n(186),q=n.n(B),Y=n(59),X=n.n(Y),_=n(190),K=n(25),G=n(502),$=n.n(G),J=n(390),Z=n(292),Q=n(0),ee=function(e){var t=e.label,n=e.tooltipInfo,r=e.children,a=e.isFullWidth;return Object(Q.f)(ne,{isFullWidth:a},Object(Q.f)(re,null,Object(Q.f)(ae,null,t),Object(Q.f)(Z.a,{title:n,position:"top",size:"sm"})),r)};ee.displayName="FormField";var te=ee,ne=Object(A.a)("div",{target:"e9evr3l0",label:"Wrapper"})((function(e){return e.isFullWidth&&"\n      grid-column-start: 1;\n      grid-column-end: -1;\n    "})),re=Object(A.a)("div",{target:"e9evr3l1",label:"Label"})("display:flex;align-items:center;margin-bottom:",Object(D.a)(.5),";"),ae=Object(A.a)("span",{target:"e9evr3l2",label:"LabelDescription"})("margin-right:",Object(D.a)(1),";"),oe=n(474),ie=n(38),le=n(27),ce=function(e){var t=e.status,n=e.onClickIconClose;switch(t){case o.ERROR:case o.INVALID:case o.NOT_FOUND:return Object(Q.f)(se,{onClick:n},Object(Q.f)(ie.a,{title:Object(I.b)("Clear Event ID")},Object(Q.f)(le.m,{color:"red"})));case o.LOADING:return Object(Q.f)(oe.a,{isSaving:!0});case o.LOADED:return Object(Q.f)(le.i,{color:"green"});default:return null}},se=Object(A.a)("div",{target:"e1e6il260",label:"CloseIcon"})({name:"5v85of",styles:"cursor:pointer;:first-child{line-height:0;}"});function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var pe=function(e){m()(r,e);var t,n=(t=r,function(){var e,n=E()(t);if(fe()){var r=E()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return R()(this,e)});function r(){var e,t,a;v()(this,r);for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return(a=n.call.apply(n,[this].concat(l))).state={value:(null===(e=a.props.eventId)||void 0===e?void 0:e.value)||"",status:null===(t=a.props.eventId)||void 0===t?void 0:t.status},a.loadState=function(){a.setState(de({},a.props.eventId))},a.handleChange=function(e){var t=e.replace(/-/g,"").trim();t!==a.state.value&&a.setState({value:t,status:void 0})},a.isEventIdValid=function(){var e=a.state.value;return!e||32===e.length||(a.setState({status:o.INVALID}),!1)},a.handleBlur=function(e){e.preventDefault(),a.isEventIdValid()&&a.props.onUpdateEventId(a.state.value)},a.handleKeyDown=function(e){13===e.keyCode&&a.isEventIdValid()&&a.props.onUpdateEventId(a.state.value)},a.handleClickIconClose=function(){a.setState({value:"",status:void 0})},a.getErrorMessage=function(){switch(a.state.status){case o.INVALID:return Object(I.b)("This event ID is invalid.");case o.ERROR:return Object(I.b)("An error occurred while fetching the suggestions based on this Event ID.");case o.NOT_FOUND:return Object(I.b)("The chosen event ID was not found in projects you have access to.");default:return}},a}return O()(r,[{key:"componentDidUpdate",value:function(e){X()(e.eventId,this.props.eventId)||this.loadState()}},{key:"render",value:function(){var e=this.props.disabled,t=this.state,n=t.value,r=t.status;return Object(Q.f)(te,{label:Object(I.b)("Event ID (Optional)"),tooltipInfo:Object(I.b)("Providing an event ID will automatically provide you a list of suggested sources")},Object(Q.f)(ve,null,Object(Q.f)(he,{name:"eventId",disabled:e,value:n,placeholder:Object(I.b)("XXXXXXXXXXXXXX"),onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,showStatus:r!==o.LOADED,error:this.getErrorMessage()}),Object(Q.f)(ge,null,Object(Q.f)(ce,{onClickIconClose:this.handleClickIconClose,status:r}))))}}]),r}(C.a.Component);pe.displayName="EventIdField";var be=pe,he=Object(A.a)(J.a,{target:"e6p37p20",label:"StyledTextField"})("flex:1;font-weight:400;input{height:40px;padding-right:",(function(e){return e.showStatus?Object(D.a)(4):Object(D.a)(1.5)}),";}margin-bottom:0;"),ge=Object(A.a)("div",{target:"e6p37p21",label:"Status"})("height:40px;position:absolute;right:",Object(D.a)(1.5),";top:0;display:flex;align-items:center;"),ve=Object(A.a)("div",{target:"e6p37p22",label:"FieldWrapper"})({name:"7boy05",styles:"position:relative;display:flex;align-items:center;"}),ye=n(5),Oe=n.n(ye),je=n(15),me=n.n(je),Se=n(65),Re=n(165);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ae=function(e){m()(r,e);var t,n=(t=r,function(){var e,n=E()(t);if(Ee()){var r=E()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return R()(this,e)});function r(){var e;v()(this,r);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).selectRef=C.a.createRef(),e}return O()(r,[{key:"componentDidMount",value:function(){var e,t;this.selectRef.current&&(null===(e=this.selectRef.current)||void 0===e?void 0:null===(t=e.select)||void 0===t?void 0:t.inputRef)&&(this.selectRef.current.select.inputRef.autocomplete="off")}},{key:"render",value:function(){return Object(Q.f)(Re.a,Oe()({},this.props,{isSearchable:!1,styles:{control:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{minHeight:"40px",height:"40px"})}},ref:this.selectRef,components:{Option:function(e){var t=e.data,n=t.label,r=t.description,a=me()(t,["label","description"]),o=e.isSelected,i=me()(e,["data","isSelected"]);return Object(Q.f)(Se.z.Option,Oe()({isSelected:o,data:a},i),Object(Q.f)(De,{isSelected:o},Object(Q.f)("div",null,n),r&&Object(Q.f)(Ce,null,"(".concat(r,")"))))}},openOnFocus:!0,required:!0}))}}]),r}(C.a.Component);Ae.displayName="SelectField";var Pe=Ae,Ce=Object(A.a)("div",{target:"edqu2gu0",label:"Description"})("color:",(function(e){return e.theme.gray500}),";"),De=Object(A.a)("div",{target:"edqu2gu1",label:"Wrapper"})("display:grid;grid-template-columns:1fr auto;grid-gap:",Object(D.a)(1),";",(function(e){return e.isSelected&&"\n      ".concat(Ce," {\n        :not(:hover) {\n          color: ").concat(e.theme.white,";\n        }\n      }\n    ")})),Ie=n(249);function xe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ke=function(e){m()(r,e);var t,n=(t=r,function(){var e,n=E()(t);if(xe()){var r=E()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return R()(this,e)});function r(){var e;v()(this,r);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).state={isOpen:!1},e.toggleModal=function(){e.setState({isOpen:!e.state.isOpen})},e.stopPropagation=function(e){e.stopPropagation()},e}return O()(r,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props,n=t.examples,r=t.sourceName;return Object(Q.f)(Ne,{onClick:this.stopPropagation},Object(Q.f)(N.a,{size:"xsmall",onClick:this.toggleModal},Object(I.b)("examples")),e&&Object(Q.f)(Ue,{show:!0,onHide:this.toggleModal},Object(Q.f)(W.a.Header,{closeButton:!0},Object(I.b)("Examples for %s in current event",Object(Q.f)("code",null,r))),Object(Q.f)(W.a.Body,null,n.map((function(e){return Object(Q.f)("pre",{key:e},e)})))))}}]),r}(C.a.Component);ke.displayName="SourceSuggestionExamples";var Te=ke,Ue=Object(A.a)(W.a,{target:"e1lnzv930",label:"StyledModal"})(".modal-dialog{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) !important;margin:0;z-index:1003;@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){width:100%;}}.modal-body{max-height:500px;overflow-y:auto;padding:",Object(D.a)(3)," ",Object(D.a)(4),";margin:-",Object(D.a)(3)," -",Object(D.a)(4),";}.close{outline:none;}"),Ne=Object(A.a)("span",{target:"e1lnzv931",label:"Wrapper"})({name:"cs19if",styles:"grid-column:3/3;"});function Fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Le=function(e){m()(r,e);var t,n=(t=r,function(){var e,n=E()(t);if(Fe()){var r=E()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return R()(this,e)});function r(){var e;v()(this,r);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).state={suggestions:[],fieldValues:[],activeSuggestion:0,showSuggestions:!1,hideCaret:!1},e.selectorField=C.a.createRef(),e.suggestionList=C.a.createRef(),e.getFilteredSuggestions=function(t,n){var r=[];switch(n){case i.BINARY:r=V;break;case i.VALUE:r=e.getValueSuggestions();break;case i.UNARY:r=M;break;default:r=[].concat(s()(e.getValueSuggestions()),s()(M))}return r.filter((function(e){return e.value.toLowerCase().indexOf(t.toLowerCase())>-1}))},e.getNewSuggestions=function(t){var n=t[t.length-1],r=t[t.length-2];return Array.isArray(n)?e.getNewSuggestions(n):Array.isArray(r)?"binary"===(null==n?void 0:n.type)?e.getFilteredSuggestions(null==n?void 0:n.value,i.VALUE):e.getFilteredSuggestions("",i.BINARY):"value"===(null==n?void 0:n.type)&&"unary"===(null==r?void 0:r.type)?e.getFilteredSuggestions(null==n?void 0:n.value,i.VALUE):"unary"===(null==n?void 0:n.type)?e.getFilteredSuggestions("",i.VALUE):"string"===(null==n?void 0:n.type)&&"value"===(null==r?void 0:r.type)?e.getFilteredSuggestions("",i.BINARY):"string"!==(null==n?void 0:n.type)||"string"!==(null==r?void 0:r.type)||(null==r?void 0:r.value)?"string"===(null==r?void 0:r.type)&&!(null==n?void 0:n.value)||"value"===(null==r?void 0:r.type)&&!(null==n?void 0:n.value)||"binary"===(null==n?void 0:n.type)?e.getFilteredSuggestions(null==n?void 0:n.value,i.BINARY):e.getFilteredSuggestions(null==n?void 0:n.value,null==n?void 0:n.type):e.getFilteredSuggestions("",i.STRING)},e.loadFieldValues=function(t){var n=[],r=t.split(" "),a=function(t){var a=r[t],o=n[n.length-1];if(o&&!Array.isArray(o)&&!o.value&&!a)return"continue";if(a.includes("!")&&a.split("!")[1]){var l=a.split("!")[1],c=e.getAllSuggestions().find((function(e){return e.value===l}));return c?(n.push([M[0],c]),"continue"):(n.push([M[0],{type:i.STRING,value:l}]),"continue")}var s=e.getAllSuggestions().find((function(e){return e.value===a}));if(s)return n.push(s),"continue";n.push({type:i.STRING,value:a})};for(var o in r)a(o);var l=e.getNewSuggestions(n);e.setState({fieldValues:n,activeSuggestion:0,suggestions:l})},e.scrollToSuggestion=function(){var t,n,r=e.state,a=r.activeSuggestion,o=r.hideCaret;null===(t=e.suggestionList)||void 0===t||null===(n=t.current)||void 0===n||n.children[a].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),o||e.setState({hideCaret:!0})},e.handleChange=function(t){e.loadFieldValues(t),e.props.onChange(t)},e.handleClickOutside=function(){e.setState({showSuggestions:!1,hideCaret:!1})},e.handleChangeParentValue=function(){var t=e.props.onChange,n=e.state.fieldValues,r=[];for(var a in n){var o=n[a];Array.isArray(o)?r.push("".concat(o[0].value).concat(o[1].value)):r.push(o.value)}t(r.join(" "))},e.getNewFieldValues=function(t){var n=s()(e.state.fieldValues),r=n[n.length-1];return Object(K.c)(r)?Array.isArray(r)?(n[n.length-1]=[r[0],t],n):("unary"===(null==r?void 0:r.type)&&(n[n.length-1]=[r,t]),"string"===(null==r?void 0:r.type)&&(n[n.length-1]=t),n):[t]},e.handleClickSuggestionItem=function(t){return function(){var n=e.getNewFieldValues(t);e.setState({fieldValues:n,activeSuggestion:0,showSuggestions:!1,hideCaret:!1},(function(){e.handleChangeParentValue()}))}},e.handleKeyDown=function(t){t.persist();var n=t.keyCode,r=e.state,a=r.activeSuggestion,o=r.suggestions;if(8!==n&&32!==n)if(13!==n)if(38!==n)if(40!==n);else{if(a===o.length-1)return;e.setState({activeSuggestion:a+1},(function(){e.scrollToSuggestion()}))}else{if(0===a)return;e.setState({activeSuggestion:a-1},(function(){e.scrollToSuggestion()}))}else e.handleClickSuggestionItem(o[a])();else e.toggleSuggestions(!0)},e.toggleSuggestions=function(t){e.setState({showSuggestions:t})},e.handleFocus=function(){e.toggleSuggestions(!0)},e.checkPossiblyRegExMatchExpression=function(t){var n=e.props.isRegExMatchesSelected,r=e.state.help;if(n)r&&e.setState({help:""});else{var a=RegExp("^/.*/g?$").test(t);r?a||e.setState({help:""}):a&&e.setState({help:Object(I.b)("You might want to change Data Type's value to 'Regex matches'")})}},e}return O()(r,[{key:"componentDidMount",value:function(){this.loadFieldValues(this.props.value),this.toggleSuggestions(!1)}},{key:"componentDidUpdate",value:function(e){e.suggestions!==this.props.suggestions&&(this.loadFieldValues(this.props.value),this.toggleSuggestions(!1)),e.isRegExMatchesSelected===this.props.isRegExMatchesSelected&&e.value===this.props.value||this.checkPossiblyRegExMatchExpression(this.props.value)}},{key:"getAllSuggestions",value:function(){return[].concat(s()(this.getValueSuggestions()),s()(M),s()(V))}},{key:"getValueSuggestions",value:function(){return this.props.suggestions||[]}},{key:"render",value:function(){var e=this,t=this.props,n=t.error,r=t.value,a=t.onBlur,o=this.state,i=o.showSuggestions,l=o.suggestions,c=o.activeSuggestion,s=o.hideCaret,u=o.help;return Object(Q.f)(Me,{ref:this.selectorField,hideCaret:s},Object(Q.f)(ze,{name:"source",placeholder:Object(I.b)("Enter a custom attribute, variable or header name"),onChange:this.handleChange,autoComplete:"off",value:r,onKeyDown:this.handleKeyDown,error:n,help:n?void 0:u,onBlur:a,onFocus:this.handleFocus}),i&&l.length>0&&Object(Q.f)(C.a.Fragment,null,Object(Q.f)(He,{ref:this.suggestionList,"data-test-id":"source"},l.slice(0,50).map((function(t,n){return Object(Q.f)(We,{key:t.value,onClick:e.handleClickSuggestionItem(t),active:n===c,tabIndex:-1},Object(Q.f)(Ie.b,null,t.value),t.description&&Object(Q.f)(Be,null,"(",Object(Q.f)(Ie.b,null,t.description),")"),t.examples&&t.examples.length>0&&Object(Q.f)(Te,{examples:t.examples,sourceName:t.value}))}))),Object(Q.f)(qe,{onClick:this.handleClickOutside})))}}]),r}(C.a.Component);Le.displayName="SourceField";var Ve=Le,Me=Object(A.a)("div",{target:"e1v8r40u0",label:"Wrapper"})("position:relative;width:100%;",(function(e){return e.hideCaret&&"caret-color: transparent;"})),ze=Object(A.a)(J.a,{target:"e1v8r40u1",label:"StyledTextField"})({name:"1w3cjy3",styles:"width:100%;height:40px;input{height:40px;}z-index:1002;:focus{outline:none;}"}),He=Object(A.a)("ul",{target:"e1v8r40u2",label:"Suggestions"})("position:absolute;width:100%;padding-left:0;list-style:none;margin-bottom:0;box-shadow:0 2px 0 rgba(37,11,54,0.04);border:1px solid ",(function(e){return e.theme.borderDark}),";border-radius:0 0 ",Object(D.a)(.5)," ",Object(D.a)(.5),";background:",(function(e){return e.theme.white}),";top:35px;right:0;z-index:1002;overflow:hidden;max-height:200px;overflow-y:auto;"),We=Object(A.a)("li",{target:"e1v8r40u3",label:"Suggestion"})("display:grid;grid-template-columns:auto 1fr max-content;grid-gap:",Object(D.a)(1),";border-bottom:1px solid ",(function(e){return e.theme.borderLight}),";padding:",Object(D.a)(1)," ",Object(D.a)(2),";font-size:",(function(e){return e.theme.fontSizeMedium}),";cursor:pointer;background:",(function(e){return e.active?e.theme.gray200:e.theme.white}),";:hover{background:",(function(e){return e.active?e.theme.gray200:e.theme.gray100}),";}"),Be=Object(A.a)("div",{target:"e1v8r40u4",label:"SuggestionDescription"})("display:flex;overflow:hidden;color:",(function(e){return e.theme.gray500}),";"),qe=Object(A.a)("div",{target:"e1v8r40u5",label:"SuggestionsOverlay"})({name:"17x90tk",styles:"position:fixed;top:0;left:0;right:0;bottom:0;z-index:1001;"});function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Xe=function(e){var t=e.rule,n=e.errors,o=e.sourceSuggestions,i=e.onUpdateEventId,l=e.eventId,c=e.onChange,s=e.onValidate,u=t.source,d=t.type,f=t.method;return Object(Q.f)(Ke,null,Object(Q.f)(Ge,{hasTwoColumns:t.method===a.REPLACE},Object(Q.f)(te,{label:Object(I.b)("Method"),tooltipInfo:Object(I.b)("What to do")},Object(Q.f)(Pe,{placeholder:Object(I.b)("Select method"),name:"method",options:$()(Object.values(a)).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},L(e),{value:e})})),value:f,onChange:function(e){var t=e.value;return c("method",t)}})),t.method===a.REPLACE&&Object(Q.f)(te,{label:Object(I.b)("Custom Placeholder (Optional)"),tooltipInfo:Object(I.b)("It will replace the default placeholder [Filtered]")},Object(Q.f)($e,{name:"placeholder",placeholder:"[".concat(Object(I.b)("Filtered"),"]"),onChange:function(e){c("placeholder",e)},value:t.placeholder}))),Object(Q.f)(Ge,{hasTwoColumns:t.type===r.PATTERN},Object(Q.f)(te,{label:Object(I.b)("Data Type"),tooltipInfo:Object(I.b)("What to look for. Use an existing pattern or define your own using regular expressions.")},Object(Q.f)(Pe,{placeholder:Object(I.b)("Select type"),name:"type",options:$()(Object.values(r)).map((function(e){return{label:F(e),value:e}})),value:d,onChange:function(e){var t=e.value;return c("type",t)}})),t.type===r.PATTERN&&Object(Q.f)(te,{label:Object(I.b)("Regex matches"),tooltipInfo:Object(I.b)("Custom Perl-style regex (PCRE)")},Object(Q.f)(Je,{name:"pattern",placeholder:Object(I.b)("[a-zA-Z0-9]+"),onChange:function(e){c("pattern",e)},value:t.pattern,onBlur:s("pattern"),error:null==n?void 0:n.pattern}))),i&&Object(Q.f)(be,{onUpdateEventId:i,eventId:l}),Object(Q.f)(te,{label:Object(I.b)("Source"),tooltipInfo:Object(I.b)("Where to look. In the simplest case this can be an attribute name.")},Object(Q.f)(Ve,{onChange:function(e){c("source",e)},value:u,onBlur:s("source"),isRegExMatchesSelected:d===r.PATTERN,suggestions:o,error:null==n?void 0:n.source})))};Xe.displayName="Form";var _e=Xe,Ke=Object(A.a)("div",{target:"e14ybjqh0",label:"Wrapper"})("display:grid;grid-row-gap:",Object(D.a)(2),";"),Ge=Object(A.a)("div",{target:"e14ybjqh1",label:"GroupField"})("display:grid;grid-gap:",Object(D.a)(2),";@media (min-width:",(function(e){return e.theme.breakpoints[0]}),"){",(function(e){return e.hasTwoColumns&&"grid-template-columns: 1fr 1fr;"}),"}"),$e=Object(A.a)(J.a,{target:"e14ybjqh2",label:"StyledTextField"})("height:40px;input{height:40px;}",(function(e){return!e.error&&"margin-bottom: 0;"})," @media (min-width:",(function(e){return e.theme.breakpoints[0]}),"){margin-bottom:0;}"),Je=Object(A.a)($e,{target:"e14ybjqh3",label:"RegularExpression"})("font-size:",(function(e){return e.theme.fontSizeSmall}),";input{font-family:",(function(e){return e.theme.text.familyMono}),";}");function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function et(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var tt=function(e){m()(o,e);var t,n=(t=o,function(){var e,n=E()(t);if(et()){var r=E()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return R()(this,e)});function o(){var e,t;v()(this,o);for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return(t=n.call.apply(n,[this].concat(l))).state={rule:{id:-1,type:r.CREDITCARD,method:a.MASK,source:""},isNewRule:Object(K.c)(null===(e=t.props.rule)||void 0===e?void 0:e.id),isFormValid:!1,errors:{}},t.loadRule=function(){var e=t.props.rule;e&&t.setState({rule:e})},t.updateErrors=function(){t.setState((function(e){return{errors:Qe({},e.errors,{},t.props.errors)}}))},t.clearError=function(e){t.setState((function(t){return{errors:q()(t.errors,e)}}))},t.handleChange=function(e,n){var a=Qe({},t.state.rule,p()({},e,n));a.type===r.PATTERN&&(a.pattern=(null==a?void 0:a.pattern)||""),a.type!==r.PATTERN&&(null==a||delete a.pattern,t.clearError("pattern")),"pattern"!==e&&"source"!==e||t.clearError(e),t.setState({rule:a})},t.handleValidation=function(e){return function(){var n=!t.state.rule[e],r=t.state.errors[e];n&&r||(!n||r?!n&&r&&t.clearError(e):t.setState((function(t){return{errors:Qe({},t.errors,p()({},e,Object(I.b)("Field Required")))}})))}},t.handleValidateForm=function(){var e=t.state.rule,n=!Object.keys(q()(e,"id")).find((function(t){return!e[t]}));t.setState({isFormValid:n})},t.handleSave=function(){var e=t.state.rule;(0,t.props.onSaveRule)(e)},t}return O()(o,[{key:"componentDidMount",value:function(){this.loadRule()}},{key:"componentDidUpdate",value:function(e,t){X()(e.errors,this.props.errors)||this.updateErrors(),this.props.rule&&this.props.rule.id!==t.rule.id||X()(t.rule,this.state.rule)||this.handleValidateForm()}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.sourceSuggestions,r=e.onUpdateEventId,a=e.eventId,o=this.state,i=o.rule,l=o.isFormValid,c=o.errors,s=o.isNewRule;return Object(Q.f)(rt,{show:!0,animation:!1,onHide:t},Object(Q.f)(W.a.Header,{closeButton:!0},s?Object(I.b)("Add an advanced data scrubbing rule"):Object(I.b)("Edit an advanced data scrubbing rule")),Object(Q.f)(W.a.Body,null,Object(Q.f)(_e,{onChange:this.handleChange,onValidate:this.handleValidation,sourceSuggestions:n,rule:i,onUpdateEventId:r,eventId:a,errors:c})),Object(Q.f)(W.a.Footer,null,Object(Q.f)(_.a,{gap:1.5},Object(Q.f)(N.a,{onClick:t},Object(I.b)("Cancel")),Object(Q.f)(N.a,{disabled:!l,onClick:this.handleSave,priority:"primary"},Object(I.b)("Save Rule")))))}}]),o}(C.a.Component);tt.displayName="Dialog";var nt=tt,rt=Object(A.a)(W.a,{target:"ez7z6pc0",label:"StyledModal"})(".modal-dialog{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) !important;margin:0;@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){width:100%;}}.close{outline:none;}"),at=n(631),ot=C.a.forwardRef((function(e,t){var n=e.rules,o=e.onShowEditRuleModal,i=e.onDeleteRule,l=e.disabled;return Object(Q.f)(it,{ref:t,isDisabled:l},n.map((function(e){var t=e.id;return Object(Q.f)(lt,{key:t},Object(Q.f)(Ie.b,null,function(e){var t=e.method,n=e.type,o=e.source,i=L(t),l=F(n),c=[];return c.push("[".concat(i.label,"]")),c.push(e.type===r.PATTERN?"[".concat(e.pattern,"]"):"[".concat(l,"]")),e.method===a.REPLACE&&e.placeholder&&c.push(" with [".concat(e.placeholder,"]")),"".concat(c.join(" ")," ").concat(Object(I.b)("from")," [").concat(o,"]")}(e)),o&&Object(Q.f)(N.a,{label:Object(I.b)("Edit Rule"),size:"small",onClick:o(t),icon:Object(Q.f)(le.t,null),disabled:l}),i&&Object(Q.f)(N.a,{label:Object(I.b)("Delete Rule"),size:"small",onClick:i(t),icon:Object(Q.f)(le.q,null),disabled:l}))})))})),it=Object(A.a)("ul",{target:"e1itmygm0",label:"List"})("list-style:none;margin:0;padding:0;margin-bottom:0 !important;",(function(e){return e.isDisabled&&"\n      color: ".concat(e.theme.gray400,";\n      background: ").concat(e.theme.gray100,";\n  ")})),lt=Object(A.a)("li",{target:"e1itmygm1",label:"ListItem"})("display:grid;grid-template-columns:auto max-content max-content;grid-column-gap:",Object(D.a)(1),";align-items:center;padding:",Object(D.a)(1)," ",Object(D.a)(2),";border-bottom:1px solid ",(function(e){return e.theme.borderDark}),";&:hover{background-color:",(function(e){return e.theme.gray100}),";}&:last-child{border-bottom:0;}");function ct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var st=function(e){m()(r,e);var t,n=(t=r,function(){var e,n=E()(t);if(ct()){var r=E()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return R()(this,e)});function r(){var e;v()(this,r);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).state={},e.handleDeleteRule=function(t){return function(){(0,e.props.onDeleteRule)([t])}},e.handleShowEditRuleModal=function(t){return function(){e.setState({editRule:t})}},e.handleCloseEditRuleModal=function(){e.setState({editRule:void 0})},e.handleSave=function(t){(0,e.props.onUpdateRule)(t)},e}return O()(r,[{key:"componentDidUpdate",value:function(e){e.rules.length>0&&!X()(e.rules,this.props.rules)&&0===Object.keys(this.props.errors).length&&this.handleCloseEditRuleModal()}},{key:"render",value:function(){var e=this.state.editRule,t=this.props,n=t.rules,r=t.sourceSuggestions,a=t.onUpdateEventId,o=t.eventId,i=t.disabled,l=t.errors;return 0===n.length?Object(Q.f)(at.a,{icon:Object(Q.f)(le.tb,{size:"xl"}),description:Object(I.b)("You have no data scrubbing rules")}):Object(Q.f)(C.a.Fragment,null,Object(Q.f)(ot,{rules:n,onDeleteRule:this.handleDeleteRule,onShowEditRuleModal:this.handleShowEditRuleModal,disabled:i}),Object(K.c)(e)&&Object(Q.f)(nt,{rule:n[e],sourceSuggestions:r,onClose:this.handleCloseEditRuleModal,onUpdateEventId:a,onSaveRule:this.handleSave,eventId:o,errors:l}))}}]),r}(C.a.PureComponent);st.displayName="Content";var ut=st;function dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ft=function(e){m()(r,e);var t,n=(t=r,function(){var e,n=E()(t);if(dt()){var r=E()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return R()(this,e)});function r(){var e;v()(this,r);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).state={isCollapsed:!0},e.rulesListRef=C.a.createRef(),e.loadContentHeight=function(){if(!e.state.contentHeight){var t,n=null===(t=e.rulesListRef.current)||void 0===t?void 0:t.offsetHeight;n&&e.setState({contentHeight:"".concat(n,"px")})}},e.handleToggleCollapsed=function(){e.setState((function(e){return{isCollapsed:!e.isCollapsed}}))},e}return O()(r,[{key:"componentDidUpdate",value:function(){this.loadContentHeight()}},{key:"render",value:function(){var e=this.props.rules,t=this.state,n=t.isCollapsed,r=t.contentHeight;return 0===e.length?Object(Q.f)(gt,null,Object(I.b)("There are no data scrubbing rules at the organization level")):Object(Q.f)(gt,{isCollapsed:n,contentHeight:r},Object(Q.f)(ht,{onClick:this.handleToggleCollapsed},Object(Q.f)("div",null,Object(I.b)("Organization Rules")),Object(Q.f)(N.a,{label:n?Object(I.b)("Expand Organization Rules"):Object(I.b)("Collapse Organization Rules"),icon:Object(Q.f)(le.j,{size:"xs",direction:n?"down":"up"}),size:"xsmall"})),Object(Q.f)(bt,null,Object(Q.f)(ot,{rules:e,ref:this.rulesListRef})))}}]),r}(C.a.Component);ft.displayName="OrganizationRules";var pt=ft,bt=Object(A.a)("div",{target:"ei0za3e0",label:"Content"})({name:"pq5vrk",styles:"transition:height 300ms cubic-bezier(0.4,0,0.2,1) 0ms;height:0;overflow:hidden;"}),ht=Object(A.a)("div",{target:"ei0za3e1",label:"Header"})("cursor:pointer;display:grid;grid-template-columns:1fr auto;align-items:center;border-bottom:1px solid ",(function(e){return e.theme.borderDark}),";padding:",Object(D.a)(1)," ",Object(D.a)(2),";"),gt=Object(A.a)("div",{target:"ei0za3e2",label:"Wrapper"})("color:",(function(e){return e.theme.gray400}),";background:",(function(e){return e.theme.gray100}),";",(function(e){return!e.contentHeight&&"padding: ".concat(Object(D.a)(1)," ").concat(Object(D.a)(2))}),";",(function(e){return!e.isCollapsed&&" border-bottom: 1px solid ".concat(e.theme.borderDark)}),";",(function(e){return!e.isCollapsed&&e.contentHeight&&"\n      ".concat(bt," {\n        height: ").concat(e.contentHeight,";\n      }\n    ")})),vt=n(43),yt=n.n(vt);function Ot(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mt=function(e){var t=e?JSON.parse(e):{},n=t.rules||{},o=t.applications||{},i=[];for(var l in o){var c,s=Ot(o[l]);try{for(s.s();!(c=s.n()).done;){var u=c.value,d=n[u],f=i.length,p=l;if(d){var b=d.type,h=d.redaction,g=h.method;g!==a.REPLACE||d.type!==r.PATTERN?g!==a.REPLACE?d.type!==r.PATTERN?i.push({id:f,method:g,type:b,source:p}):i.push({id:f,method:g,type:r.PATTERN,source:p,pattern:d.pattern}):i.push({id:f,method:a.REPLACE,type:b,source:p,placeholder:null==h?void 0:h.text}):i.push({id:f,method:a.REPLACE,type:r.PATTERN,source:p,placeholder:null==h?void 0:h.text,pattern:d.pattern})}else if("@"===u[0]){var v=u.slice(1).split(":"),y=yt()(v,2),O=y[0],j=y[1];i.push({id:f,method:j,type:O,source:p})}}}catch(e){s.e(e)}finally{s.f()}}return i};function St(e){return e.type===r.PATTERN&&e.method===a.REPLACE?{type:e.type,pattern:e.pattern,redaction:{method:e.method,text:null==e?void 0:e.placeholder}}:e.type===r.PATTERN?{type:e.type,pattern:e.pattern,redaction:{method:e.method}}:e.method===a.REPLACE?{type:e.type,redaction:{method:e.method,text:null==e?void 0:e.placeholder}}:{type:e.type,redaction:{method:e.method}}}var Rt=function(e,t,n){for(var r={},a={},o=0;o<n.length;o++){var i=n[o],l=String(o);a[l]=St(i),r[i.source]||(r[i.source]=[]),r[i.source].includes(l)||r[i.source].push(l)}var c={rules:a,applications:r};return e.requestPromise(t,{method:"PUT",data:{relayPiiConfig:JSON.stringify(c)}})};function wt(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var At=function(e){var t,n=null===(t=e.responseJSON)||void 0===t?void 0:t.relayPiiConfig[0];if(!n)return{type:l.Unknown,message:Object(I.b)("Unknown error occurred while saving data scrubbing rule")};if(n.startsWith("invalid selector: ")){var r,a=wt(n.split("\n"));try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.startsWith("1 | ")){var i=o.slice(3);return{type:l.InvalidSelector,message:Object(I.b)("Invalid source value: %s",i)}}}}catch(e){a.e(e)}finally{a.f()}}if(n.startsWith("regex parse error:")){var c,s=wt(n.split("\n"));try{for(s.s();!(c=s.n()).done;){var u=c.value;if(u.startsWith("error:")){var d=u.slice(6).replace(/at line \d+ column \d+/,"");return{type:l.RegexParse,message:Object(I.b)("Invalid regex: %s",d)}}}}catch(e){s.e(e)}finally{s.f()}}return{type:l.Unknown,message:Object(I.b)("An unknown error occurred while saving data scrubbing rule")}};function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var It=function(e){m()(r,e);var t,n=(t=r,function(){var e,n=E()(t);if(Dt()){var r=E()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return R()(this,e)});function r(){var e;v()(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).state={rules:[],savedRules:[],relayPiiConfig:e.props.relayPiiConfig,sourceSuggestions:[],eventId:{value:""},orgRules:[],errors:{},isProjectLevel:e.props.endpoint.includes("projects")},e.api=new k.a,e.loadOrganizationRules=function(){var t=e.state.isProjectLevel,n=e.props.organization;if(t)try{e.setState({orgRules:mt(n.relayPiiConfig)})}catch(e){Object(T.a)(Object(I.b)("Unable to load organization rules"))}},e.loadSourceSuggestions=h()(d.a.mark((function t(){var n,r,a,i,l,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.organization,a=n.projectId,(i=e.state.eventId).value){t.next=5;break}return e.setState((function(e){return{sourceSuggestions:z,eventId:Ct({},e.eventId,{status:void 0})}})),t.abrupt("return");case 5:return e.setState((function(e){return{sourceSuggestions:z,eventId:Ct({},e.eventId,{status:o.LOADING})}})),t.prev=6,l={eventId:i.value},a&&(l.projectId=a),t.next=11,e.api.requestPromise("/organizations/".concat(r.slug,"/data-scrubbing-selector-suggestions/"),{query:l});case 11:if(c=t.sent,!((s=c.suggestions)&&s.length>0)){t.next=16;break}return e.setState((function(e){return{sourceSuggestions:s,eventId:Ct({},e.eventId,{status:o.LOADED})}})),t.abrupt("return");case 16:e.setState((function(e){return{sourceSuggestions:z,eventId:Ct({},e.eventId,{status:o.NOT_FOUND})}})),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(6),e.setState((function(e){return{eventId:Ct({},e.eventId,{status:o.ERROR})}}));case 22:case"end":return t.stop()}}),t,null,[[6,19]])}))),e.convertRequestError=function(t){switch(t.type){case l.InvalidSelector:e.setState((function(e){return{errors:Ct({},e.errors,{source:t.message})}}));break;case l.RegexParse:e.setState((function(e){return{errors:Ct({},e.errors,{pattern:t.message})}}));break;default:Object(T.a)(t.message)}},e.handleSave=function(){var t=h()(d.a.mark((function t(n,r){var a,o,i,l,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.endpoint,i=a.onSubmitSuccess,t.prev=1,t.next=4,Rt(e.api,o,n);case 4:(null==(l=t.sent)?void 0:l.relayPiiConfig)&&(c=mt(l.relayPiiConfig),e.setState({rules:c,showAddRuleModal:void 0}),Object(T.d)(r),i&&i(l)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.convertRequestError(At(t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleAddRule=function(t){var n=Ct({},t,{id:e.state.rules.length}),r=[].concat(s()(e.state.rules),[n]);e.handleSave(r,Object(I.b)("Successfully added rule"))},e.handleUpdateRule=function(t){var n=e.state.rules.map((function(e){return e.id===t.id?t:e}));e.handleSave(n,Object(I.b)("Successfully updated rule"))},e.handleDeleteRule=function(t){var n=e.state.rules.filter((function(e){return!t.includes(e.id)}));e.handleSave(n,Object(I.b)("Successfully deleted rule"))},e.handleToggleAddRuleModal=function(t){return function(){e.setState({showAddRuleModal:t})}},e.handleUpdateEventId=function(t){e.setState({eventId:{value:t}},e.loadSourceSuggestions)},e}return O()(r,[{key:"componentDidMount",value:function(){this.loadRules(),this.loadSourceSuggestions(),this.loadOrganizationRules()}},{key:"componentDidUpdate",value:function(e,t){t.relayPiiConfig!==this.state.relayPiiConfig&&this.loadRules()}},{key:"componentWillUnmount",value:function(){this.api.clear()}},{key:"loadRules",value:function(){try{var e=mt(this.state.relayPiiConfig);this.setState({rules:e,savedRules:e})}catch(e){Object(T.a)(Object(I.b)("Unable to load project rules"))}}},{key:"render",value:function(){var e=this.props,t=e.additionalContext,n=e.disabled,r=this.state,a=r.rules,o=r.sourceSuggestions,i=r.showAddRuleModal,l=r.eventId,c=r.orgRules,s=r.isProjectLevel,u=r.errors;return Object(Q.f)(C.a.Fragment,null,Object(Q.f)(x.a,null,Object(Q.f)(x.e,null,Object(Q.f)("div",null,Object(I.b)("Advanced Data Scrubbing"))),Object(Q.f)(x.b,{type:"info"},t," ","".concat(Object(I.b)("The new rules will only apply to upcoming events. "))," ",Object(I.c)("For more details, see [linkToDocs].",{linkToDocs:Object(Q.f)(U.a,{href:"https://docs.sentry.io/data-management/advanced-datascrubbing/"},Object(I.b)("full documentation on data scrubbing"))})),Object(Q.f)(x.c,null,s&&Object(Q.f)(pt,{rules:c}),Object(Q.f)(ut,{errors:u,rules:a,onDeleteRule:this.handleDeleteRule,onUpdateRule:this.handleUpdateRule,onUpdateEventId:this.handleUpdateEventId,eventId:l,sourceSuggestions:o,disabled:n}),Object(Q.f)(xt,null,Object(Q.f)(N.a,{href:"https://docs.sentry.io/data-management/advanced-datascrubbing/",target:"_blank"},Object(I.b)("Read the docs")),Object(Q.f)(N.a,{disabled:n,onClick:this.handleToggleAddRuleModal(!0),priority:"primary"},Object(I.b)("Add Rule"))))),i&&Object(Q.f)(nt,{errors:u,sourceSuggestions:o,onSaveRule:this.handleAddRule,onClose:this.handleToggleAddRuleModal(!1),onUpdateEventId:this.handleUpdateEventId,eventId:l}))}}]),r}(C.a.Component);It.displayName="DataScrubbing";t.a=It;var xt=Object(A.a)("div",{target:"e1kw79fb0",label:"PanelAction"})("padding:",Object(D.a)(1)," ",Object(D.a)(2),";position:relative;display:grid;grid-gap:",Object(D.a)(1),";grid-template-columns:auto auto;justify-content:flex-end;border-top:1px solid ",(function(e){return e.theme.borderDark}),";")}}]);
//# sourceMappingURL=OrganizationSecurityAndPrivacy~ProjectDataPrivacy.js.map