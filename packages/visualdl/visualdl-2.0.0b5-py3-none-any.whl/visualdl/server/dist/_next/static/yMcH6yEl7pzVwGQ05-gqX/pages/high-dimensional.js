(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"DtL+":function(n,e,t){"use strict";(function(n){var i=t("OnzC"),o=t("ERkP"),r=t.n(o),a=t("r8eb"),u=t("roxr"),l=t("JBtm"),c=t.n(l),s=t("j/s1"),d=t("RbC2"),m=t("O1Fn"),b=t("9bu8"),f=r.a.createElement,g=function(){return t.e(10).then(t.bind(null,"ppfC")).then((function(n){var e=n.divide;return function(n){var t;return e(n.points,n.labels,!!n.visibility,null!==(t=n.keyword)&&void 0!==t?t:"")}}))},h=function(){return new Worker(n,void 0)},v=Object(s.c)(u.a).withConfig({displayName:"HighDimensionalChart__StyledScatterChart",componentId:"i3h5jz-0"})(["height:",";"],a.k),p=s.c.div.withConfig({displayName:"HighDimensionalChart__Empty",componentId:"i3h5jz-1"})(["display:flex;justify-content:center;align-items:center;font-size:",";height:",";"],Object(a.H)(20),a.k),j={show:!0,position:"top",formatter:function(n){return n.data.showing?n.data.name:""}};e.a=function(n){var e=n.run,t=n.tag,r=n.running,u=n.labelVisibility,l=n.keyword,s=n.reduction,O=n.dimension,y=Object(b.g)("common").t,w=Object(m.b)(e&&t?"/embeddings/embedding?".concat(c.a.stringify({run:e,tag:t,dimension:Number.parseInt(O,10),reduction:s})):null,!!r),k=w.data,C=w.error,_=w.loading,E=Object(o.useMemo)((function(){var n,e;return{points:null!==(n=null===k||void 0===k?void 0:k.embedding)&&void 0!==n?n:[],keyword:l,labels:null!==(e=null===k||void 0===k?void 0:k.labels)&&void 0!==e?e:[],visibility:u}}),[k,u,l]),P=Object(d.a)(g,h,i.divide,E),S=Object(o.useMemo)((function(){var n,e;return[{name:"highlighted",data:null!==(n=null===P||void 0===P?void 0:P[0])&&void 0!==n?n:[],label:j},{name:"others",data:null!==(e=null===P||void 0===P?void 0:P[1])&&void 0!==e?e:[],label:j,color:a.F}]}),[P]);return!k&&C?f(p,null,y("common:error")):k||_?f(v,{loading:_,data:S,gl:"3d"===O}):f(p,null,y("common:empty"))}}).call(this,t("dDaE"))},FvZk:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/high-dimensional",function(){return t("ioac")}])},IMpY:function(n,e){},OnzC:function(n,e,t){"use strict";t.d(e,"divide",(function(){return i}));t("IMpY");var i=function(n){var e=n.points,t=n.keyword;return function(n,e){if(!e)return[[],n];var t=[],i=[];return n.forEach((function(n){n.name.includes(e)?t.push(n):i.push(n)})),[t,i]}(function(n,e,t){return n.map((function(n,i){return{name:e[i]||"",showing:!!t,value:n}}))}(e,n.labels,n.visibility),t)}},dDaE:function(n,e,t){n.exports=t.p+"static/chunks/2.04746db37dd77f096ca8.worker.js"},ioac:function(n,e,t){"use strict";t.r(e);var i=t("fGyu"),o=t("0jAH"),r=t("9bu8"),a=t("ERkP"),u=t.n(a),l=t("gI5n"),c=t("r8eb"),s=t("PKwP"),d=t("QRo2"),m=t("E67T"),b=t("wK9i"),f=t("DtL+"),g=t("TpTG"),h=t("1HTM"),v=t("s+3g"),p=t("jd94"),j=t("Obvh"),O=t("bbjh"),y=t("C34g"),w=t("j/s1"),k=t("7xIC"),C=t("O1Fn"),_=t("XPj2"),E=u.a.createElement,P=["2d","3d"],S=["pca","tsne"],D=Object(w.c)(l.a).withConfig({displayName:"high-dimensional__StyledSelect",componentId:"sc-1mk5cn7-0"})(["min-width:",";"],Object(c.s)(160)),x=Object(w.c)(g.a).withConfig({displayName:"high-dimensional__StyledIcon",componentId:"sc-1mk5cn7-1"})(["margin-right:",";vertical-align:middle;"],Object(c.s)(4)),I=w.c.div.withConfig({displayName:"high-dimensional__AsideTitle",componentId:"sc-1mk5cn7-2"})(["font-size:",";line-height:",";font-weight:700;margin-bottom:",";"],Object(c.H)(16),Object(c.H)(16),Object(c.H)(10)),M=function(){var n=Object(r.g)(["high-dimensional","common"]).t,e=Object(a.useState)(!0),t=e[0],l=e[1],c=Object(C.b)("/runs",t),g=c.data,w=c.error,M=c.loading,z=Object(C.b)("/embeddings/tags",t),N=z.data,A=z.error,F=z.loading,H=Object(a.useMemo)((function(){return w||A}),[w,A]),T=Object(a.useMemo)((function(){return M||F}),[M,F]),R=Object(a.useMemo)((function(){return g&&N?g.reduce((function(n,e){var t,o;return[].concat(Object(i.a)(n),Object(i.a)(null!==(t=null===(o=N[e])||void 0===o?void 0:o.map((function(n){return{run:e,tag:n,label:"".concat(e,"/").concat(n)}})))&&void 0!==t?t:[]))}),[]):[]}),[g,N]),J=Object(a.useMemo)((function(){return R.map((function(n){return n.label}))}),[R]),q=Object(k.useRouter)().query,K=Object(a.useMemo)((function(){var n,e,t,i=Array.isArray(q.run)?q.run[0]:q.run;return null!==(n=i&&(null===(e=R.find((function(n){return n.run===i})))||void 0===e?void 0:e.label))&&void 0!==n?n:null===(t=R[0])||void 0===t?void 0:t.label}),[q.run,R]),X=Object(a.useState)(K),Z=X[0],G=X[1];Object(a.useEffect)((function(){return G(K)}),[K]);var L=Object(a.useMemo)((function(){var n;return null!==(n=R.find((function(n){return n.label===Z})))&&void 0!==n?n:{run:"",tag:"",label:""}}),[R,Z]),Q=Object(a.useState)(""),V=Q[0],W=Q[1],Y=Object(_.a)(V),B=Object(a.useState)(P[0]),U=B[0],$=B[1],nn=Object(a.useState)(S[0]),en=nn[0],tn=nn[1],on=Object(a.useState)(!0),rn=on[0],an=on[1],un=Object(a.useMemo)((function(){return E(j.a,{running:t,onToggle:l})}),[t,l]),ln=Object(a.useMemo)((function(){return J.length?E(o.b,{bottom:un},E(o.a,null,E(I,null,n("common:select-runs")),E(D,{list:J,value:Z,onChange:G})),E(o.a,null,E(b.a,null,E(O.a,{placeholder:n("common:search"),value:V,onChange:W})),E(b.a,null,E(s.a,{value:rn,onChange:an},n("high-dimensional:display-all-label")))),E(o.a,null,E(I,null,E(x,{type:"dimension"}),n("high-dimensional:dimension")),E(b.a,null,E(p.c,{value:U,onChange:function(n){return $(n)}},P.map((function(e){return E(v.a,{key:e,value:e},n(e))}))))),E(o.a,null,E(I,null,E(x,{type:"reduction"}),n("high-dimensional:reduction-method")),E(b.a,null,E(p.c,{value:en,onChange:function(n){return tn(n)}},S.map((function(e){return E(v.a,{key:e,value:e},n(e))})))))):null}),[n,un,U,Z,J,rn,en,V]);return E(u.a.Fragment,null,E(h.a,{url:"/runs"}),E(y.a,null,n("common:high-dimensional")),E(d.a,{aside:ln,loading:T},T||R.length?H?E("div",null,n("common:error")):T?null:E(f.a,{dimension:U,keyword:Y,run:L.run,tag:L.tag,running:t,labelVisibility:rn,reduction:en}):E(m.a,null)))};M.getInitialProps=function(){return{namespacesRequired:["high-dimensional","common"]}},e.default=M},roxr:function(n,e,t){"use strict";var i=t("zjfJ"),o=t("ERkP"),r=t.n(o),a=t("r8eb"),u=t("zqQH"),l=t.n(u),c=t("j/s1"),s=t("kF6i"),d=r.a.createElement;function m(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function b(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach((function(e){Object(i.a)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var f=c.c.div.withConfig({displayName:"ScatterChart__Wrapper",componentId:"nafbih-0"})(["position:relative;background-color:",";> .echarts{height:100%;}> .loading{"," "," display:flex;justify-content:center;align-items:center;}"],a.c,Object(a.D)("absolute",0,null,null,0),Object(a.K)("100%")),g={xAxis:{},yAxis:{},toolbox:{show:!0,showTitle:!1,itemSize:0,feature:{dataZoom:{},restore:{},saveAsImage:{}}}},h={grid3D:{},xAxis3D:{},yAxis3D:{},zAxis3D:{}},v={symbolSize:12,type:"scatter"},p={symbolSize:12,type:"scatter3D"};e.a=function(n){var e=n.data,t=n.loading,i=n.gl,r=n.className,u=Object(s.a)({loading:t,gl:i,autoFit:!0}),c=u.ref,m=u.echart,j=u.wrapper,O=Object(o.useMemo)((function(){var n;return b(b({},i?h:g),{},{series:null!==(n=null===e||void 0===e?void 0:e.map((function(n){return b(b({},i?p:v),n)})))&&void 0!==n?n:[]})}),[i,e]);return Object(o.useEffect)((function(){null===m||void 0===m||m.setOption(O)}),[O,m]),d(f,{ref:j,className:r},!m&&d("div",{className:"loading"},d(l.a,{color:a.F,size:"10px"})),d("div",{className:"echarts",ref:c}))}}},[["FvZk",1,2,3,4,0,5,7,6,8,9,12]]]);