var chart_data=[],chart_data2=[],chart_data3=[],url=" https://services7.arcgis.com/2KR0o4aqQbut1crQ/arcgis/rest/services/prediksi_oke/FeatureServer/0/query?f=json&where=hari_ke%20%3C%2051&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&resultOffset=0&resultRecordCount=2000",url_2=" https://services5.arcgis.com/VS6HdKS0VfIhv8Ct/arcgis/rest/services/Statistik_Perkembangan_COVID19_Indonesia/FeatureServer/0/query?f=json&where=Jumlah_Kasus_Baru_per_Hari%20%3E%200&returnGeometry=false&outFields=*&orderByFields=Tanggal%20asc&resultOffset=0&resultRecordCount=2000",url_3="https://services5.arcgis.com/VS6HdKS0VfIhv8Ct/arcgis/rest/services/COVID19_Indonesia_per_Provinsi/FeatureServer/0/query?f=json&where=Kasus_Posi%20%3E%3D%201&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=Kasus_Posi%20desc&resultOffset=0&resultRecordCount=50&cacheHint=true",url_update=(url_3="https://kgi.big.go.id/prov.php","https://kgi.big.go.id/summary.php"),chart1_color_1="#FF0000",chart1_color_2="#0000FF",chart2_color_1="#FF0000",chart2_color_2="#00FF00",chart2_color_3="#000000",font_size=8,stroke_width=1;function am4themes_myTheme(e){e instanceof am4charts.Chart&&(e.background.fill=am4core.color("#FFFFFF"))}function dateConverter(e){return new Date(e).toISOString().substr(0,10)}function dateTimeConverter(e){return new Date(e).toISOString().substr(0,16)}var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);lua=new Date(e.metadata.lastUpdatedAt).toString().split(" "),console.log(lua);var t="<br/>"+lua[2]+" "+lua[1]+" "+lua[3]+"<br/>"+lua[4];document.getElementById("last_updated").innerHTML="Last Updated: "+t,positif=document.getElementById("current_positif"),positif.innerHTML=e.confirmed,sembuh=document.getElementById("current_sembuh"),sembuh.innerHTML=e.recovered,meninggal=document.getElementById("current_meninggal"),meninggal.innerHTML=e.deceased}},xmlhttp.open("GET",url_update,!0),xmlhttp.send(),am4core.ready(function(){am4core.useTheme(am4themes_animated),am4core.useTheme(am4themes_myTheme);var e=am4core.create("chart2",am4charts.XYChart);(t=new XMLHttpRequest).onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);for(i=0;i<t.features.length;i++)dataSet={Tanggal:dateConverter(t.features[i].attributes.Tanggal),Jumlah_Kasus_Kumulatif:t.features[i].attributes.Jumlah_Kasus_Kumulatif,Jumlah_Pasien_Sembuh:t.features[i].attributes.Jumlah_Pasien_Sembuh,Jumlah_Pasien_Meninggal:t.features[i].attributes.Jumlah_Pasien_Meninggal},chart_data2.push(dataSet);console.log(chart_data2),e.data=chart_data2,e.dateFormatter.inputDateFormat="yyyy-MM-dd";let h=e.xAxes.push(new am4charts.DateAxis);h.renderer.grid.template.location=0,h.title.text="Tanggal",h.fontSize=font_size+2,h.renderer.minGridDistance=80,h.renderer.grid.template.location=.5,h.startLocation=.5,h.endLocation=.75;let m=e.yAxes.push(new am4charts.ValueAxis);m.renderer.minGridDistance=30,m.fontSize=font_size+2;var a=e.series.push(new am4charts.LineSeries);a.dataFields.valueY="Jumlah_Kasus_Kumulatif",a.dataFields.dateX="Tanggal",a.name="Positif",a.stroke=am4core.color(chart2_color_1),a.strokeWidth=stroke_width,a.tooltip.fontSize=font_size,a.legendSettings.valueText="{valueY}",a.tooltip.pointerOrientation="vertical";var r=a.bullets.push(new am4charts.CircleBullet);r.fill=am4core.color(chart2_color_1),r.circle.radius=3,r.tooltipText="{dateX}\nPositif: [bold]{valueY}[/]";var s=a.bullets.push(new am4charts.LabelBullet);s.label.text="{valueY}",s.label.horizontalCenter="left",s.label.dx=5,s.label.dy=5,s.fontSize=font_size+2;var l=e.series.push(new am4charts.LineSeries);l.dataFields.valueY="Jumlah_Pasien_Sembuh",l.dataFields.dateX="Tanggal",l.name="Sembuh",l.stroke=am4core.color(chart2_color_2),l.strokeWidth=stroke_width,l.tooltip.fontSize=font_size,l.legendSettings.valueText="{valueY}",l.tooltip.pointerOrientation="vertical";var n=l.bullets.push(new am4charts.CircleBullet);n.fill=am4core.color(chart2_color_2),n.circle.radius=3,n.tooltipText="{dateX}\nSembuh: [bold]{valueY}[/]";var o=l.bullets.push(new am4charts.LabelBullet);o.label.text="{valueY}",o.label.horizontalCenter="left",o.label.dx=5,o.label.dy=5,o.fontSize=font_size+2;var u=e.series.push(new am4charts.LineSeries);u.dataFields.valueY="Jumlah_Pasien_Meninggal",u.dataFields.dateX="Tanggal",u.name="Meninggal",u.stroke=am4core.color(chart2_color_3),u.strokeWidth=stroke_width,u.tooltip.fontSize=font_size,u.legendSettings.valueText="{valueY}",u.tooltip.pointerOrientation="vertical";var c=u.bullets.push(new am4charts.CircleBullet);c.fill=am4core.color(chart2_color_3),c.circle.radius=3,c.tooltipText="{dateX}\nMeninggal: [bold]{valueY}[/]";var d=u.bullets.push(new am4charts.LabelBullet);d.label.text="{valueY}",d.label.horizontalCenter="left",d.label.dx=5,d.label.dy=5,d.fontSize=font_size+2,e.scrollbarX=new am4core.Scrollbar,e.scrollbarY=new am4core.Scrollbar,e.scrollbarY.parent=e.leftAxesContainer,e.scrollbarY.toBack(),e.legend=new am4charts.Legend}},t.open("GET",url_2,!0),t.send();var t,a=am4core.create("chart3",am4charts.XYChart);(t=new XMLHttpRequest).onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);for(i=0;i<e.list_data.length;i++){provinsi=e.list_data[i].key,lokasi="Provinsi","DAERAH ISTIMEWA YOGYAKARTA"===provinsi&&(provinsi="DI YOGYAKARTA"),"INDONESIA"===provinsi&&(lokasi="",provinsi="LOKASI TIDAK DIKETAHUI"),dataSet={Provinsi:provinsi,Kasus_Posi:e.list_data[i].jumlah_kasus,Kasus_Semb:e.list_data[i].jumlah_sembuh,Kasus_Meni:e.list_data[i].jumlah_meninggal},chart_data3.push(dataSet);var t=document.createElement("li");t.innerHTML="<h5>"+lokasi+" "+provinsi+'</h5><p><span class="w3-badge w3-red w3-tiny">'+e.list_data[i].jumlah_kasus+'</span> Positif</p><p><span class="w3-badge w3-green w3-tiny">'+e.list_data[i].jumlah_sembuh+'</span> Sembuh </p><p><span class="w3-badge w3-black w3-tiny">'+e.list_data[i].jumlah_meninggal+"</span> Meninggal</p>",t.addEventListener("mouseover",function(){this.style.backgroundColor="#ddd"}),t.addEventListener("mouseleave",function(){this.style.backgroundColor="white"}),t.addEventListener("click",function(e){isi=this.innerHTML,splitter=isi.split("</h5>"),splitter=splitter[0].split(">"),prov=splitter[1].replace("Provinsi ",""),console.log("Zoom to "+prov)},!1),t.style.cursor="pointer",document.getElementById("provinsi_list").appendChild(t)}console.log(chart_data3),a.data=chart_data3;var r=a.yAxes.push(new am4charts.CategoryAxis);r.dataFields.category="Provinsi",r.renderer.inversed=!0,r.renderer.grid.template.location=0,r.renderer.minGridDistance=10,r.fontSize=font_size+2;var s=a.xAxes.push(new am4charts.ValueAxis);s.title.text="Jumlah Kasus",s.renderer.minGridDistance=30,s.fontSize=font_size+2;var l=a.series.push(new am4charts.ColumnSeries);l.dataFields.categoryY="PROVINSI",l.dataFields.valueX="Kasus_Posi",l.name="Jumlah Kasus",l.fill=am4core.color("#f00"),l.strokeWidth=1,l.columns.template.tooltipText="{categoryY}\n[bold]{valueX}[/]",l.tooltip.fontSize=font_size,l.tooltip.pointerOrientation="vertical"}},t.open("GET",url_3,!0),t.send()});