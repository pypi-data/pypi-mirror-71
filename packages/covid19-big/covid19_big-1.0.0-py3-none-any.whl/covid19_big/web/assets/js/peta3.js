require(["esri/Map","esri/views/MapView","esri/widgets/Expand","esri/widgets/Home","esri/widgets/Legend","esri/widgets/LayerList","esri/widgets/BasemapGallery","esri/widgets/Fullscreen","esri/widgets/Zoom","esri/layers/MapImageLayer","esri/tasks/IdentifyTask","esri/tasks/support/IdentifyParameters","dojo/domReady!"],function(e,t,i,n,a,r,o,s,d,l,c,p){var m,u,g="peta-3",v='"peta3_legend"',w="https://portal.ina-sdi.or.id/gis/rest/services/COVID19/Analisis_Risiko_Pandemi_COVID19_Jakarta/MapServer",y=new e({basemap:"satellite"}),h=new t({container:g,center:[106.840492,-6.199763],zoom:11,map:y}),f=new l(w,null);y.layers.add(f),h.ui.components=[];var b=new n({view:h});h.ui.add(b,"top-right");var E=new d({view:h});h.ui.add(E,"bottom-right");var I=new o({view:h,container:document.createElement("div")}),L=new i({expandIconClass:"esri-icon-basemap",expandTooltip:"Expand BasemapGallery",view:h,content:I.domNode});h.ui.add(L,"top-right");var x=new r({container:document.createElement("div"),view:h,listItemCreatedFunction:function(e){e.item.actionsSections=[[{title:"URL service information",className:"esri-icon-description",id:"information"}]]}});x.on("trigger-action",function(e){var t=e.action.id;console.log(e.item.layer.url),"information"===t&&window.open(e.item.layer.url)});var k=new i({expandIconClass:"esri-icon-layer-list",expandTooltip:"Expand LayerList",view:h,content:x.domNode});h.ui.add(k,"top-right");var C=document.createElement("div");C.style.width="185px",C.setAttribute("id",v);var B=document.createElement("i");B.classList.add("fa","fa-close","w3-right"),B.style.paddingTop="10px",B.style.paddingRight="10px",B.style.cursor="pointer",C.appendChild(B),B.addEventListener("click",function(e){document.getElementById(v).style.visibility="hidden"});new a({view:h,layerInfos:[{layer:f,title:"Analisis Risiko Pandemi COVID19 Jakarta"}],container:C,style:"classic"});h.ui.add(C,"top-left");var T=document.createElement("div");T.classList.add("esri-component","esri-home","esri-widget--button","esri-widget"),T.setAttribute("title","Legend");var M=document.createElement("span");function N(e){u.geometry=e.mapPoint,u.mapExtent=h.extent,document.getElementById(g).style.cursor="wait",m.execute(u).then(function(e){return e.results.map(function(e){var t=e.feature,i=e.layerName;t.attributes.layerName=i,console.log(t.attributes);var n=document.createElement("div"),a=t.attributes,r="<table>";for(var o in a)console.log(o),console.log(a[o]),r+="<tr><td>"+o+"</td><td>"+a[o]+"</td></tr>";return r+="</table>",n.innerHTML=r,t.popupTemplate={title:i,content:n},t})}).then(function(t){t.length>0&&h.popup.open({features:t,location:e.mapPoint});document.getElementById(g).style.cursor="auto"})}M.classList.add("esri-icon-documentation","toggle-icon"),T.appendChild(M),h.ui.add(T,"top-right"),T.addEventListener("click",function(e){var t;"hidden"===(t=document.getElementById(v)).style.visibility?t.style.visibility="visible":t.style.visibility="hidden"}),fullscreen=new s({view:h}),h.ui.add(fullscreen,"top-right"),h.when(function(){h.on("click",N),m=new c(w),(u=new p).tolerance=3,u.layerOption="visible",u.width=h.width,u.height=h.height})});