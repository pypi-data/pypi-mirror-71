{% extends "base.html" %}
{% load request_static %}
{% load cache %}

{% block gui_init_scripts %}
    <script type="text/javascript">
        // {% block gui_init_vars %}
        window.isDebug = {% if debug %}true{% else %}false{% endif %};

        window.host_url = "{{ host_url }}";
        window.endpoint_url = "{{ host_url }}{{ endpoint_path }}";
        window.openapi_path = window.endpoint_url;

        window.project_gui_name = "{{ project_gui_name }}";

        window.project_version = "{{ project_version }}";
        window.gui_version = "{{ gui_version }}";
        window.gui_user_version = "{{ gui_user_version }}";

        // {% endblock %}
        // {% block gui_static_list %}
        window.resourceList = [
            // {% for file in static_files_list %}
                { priority: Number('{{ file.priority }}'), type: '{{ file.type }}', name: '{% static file.name %}?v={{gui_version}}'},
            // {% endfor %}
        ];
        // {% endblock %}
    </script>
{% endblock %}

{% block body %}
    <body class="hold-transition sidebar-mini {% block bodyclass %}{% endblock %}">
    <div id="RealBody" class="{% if user.is_superuser %} is_superuser {% endif %} {% if user.is_staff %} is_staff {% endif %}" style="display: none;">
        {% block gui_body_template %}
            <div class="hold-transition skin-black-light sidebar-mini ">
                <div class="wrapper" >
                    <!-- Navbar -->
                    <div id="top_nav_wrapper">
                        <top_nav :a_links="a_links"></top_nav>
                    </div>
                    <!-- /Navbar -->

                    <!-- Main Sidebar Container -->
                    <div id="sidebar_wrapper">
                        <aside class="main-sidebar sidebar-dark-primary elevation-4">
                            <!-- Logo -->
                            <logo :title="info.title"></logo>
                            <!-- Logo -->

                            <!-- Sidebar -->
                            <sidebar :menu="x_menu" :docs="x_docs" :a_links="a_links"></sidebar>
                            <!-- /.Sidebar -->
                        </aside>
                    </div>
                    <!-- /Main Sidebar Container -->

                    <!-- Content Wrapper. Contains page content -->
                    <div class="content-wrapper">
                        <!--<div>-->
                        <!-- Main content -->
                        {% block content %}
                            <router-view></router-view>
                        {% endblock %}
                        <!-- /Main content -->
                    </div>
                    <!-- /Content Wrapper. Contains page content -->

                    <!-- Control Sidebar -->
                    <div id="gui_customizer_wrapper">
                        <aside class="control-sidebar control-sidebar-dark guiCustomizer">
                            <gui_customizer></gui_customizer>
                        </aside>
                    </div>

                    <!-- /Control Sidebar -->

                    <!-- Main Footer -->
                    <div id="main_footer_wrapper">
                        <main_footer>
                            <template v-slot:footer_buttons>
                                {% block footer_buttons %}{% endblock %}
                            </template>
                        </main_footer>
                    </div>
                    <!-- /Main Footer -->
                </div>
            </div>
        {% endblock %}
    </div>

    {% block script %}{% endblock %}

    {% block app_loader %}
        <script src="{% static 'bundle/app_loader.js' %}"></script>
    {% endblock %}
    </body>
{% endblock %}